"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8592],{7744:(f,p,l)=>{l.d(p,{T:()=>_});var $=l(7398),h=l(2029),v=l(9862);let _=(()=>{class o{constructor(s){this.http=s}getCountries(){return this.http.get("assets/demo/data/countries.json").pipe((0,$.U)(s=>s.data))}static#e=this.\u0275fac=function(a){return new(a||o)(h.LFG(v.eN))};static#t=this.\u0275prov=h.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},7159:(f,p,l)=>{l.d(p,{F:()=>x});var $=l(5619),h=l(2096),v=l(7398),_=l(2029),o=l(8814);let x=(()=>{class s{constructor(t){this.apiService=t,this.cache=[],this.apiURL=t.apiURL,this.data$=new $.X(null),this.message$=new $.X(null)}get dietObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(t,e,r,n){let u="";""!==r&&(u=""!=r.sortField?`sort=${r.sortField}&order=${1===r.sortOrder?"ASC":"DESC"}`:"");const c=""!==u&&""!==n?u+"&"+n:""!==u&&""===n?u:""===u&&""!==n?n:"";this.apiService.get(`diet/get/${t}/${e}${""!==c?"?"+c:""}`).subscribe({next:d=>{d&&d.rows&&d.rows.map(g=>{g.name=g.name?.toLowerCase()}),this.data$.next(d)},error:d=>{this.message$.next(d)}})}getBySearch(t,e){let r="";""!==e&&(r=""!=e.sortField?`?sort=${e.sortField}&order=${1===e.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`diet/search/${t}${r}`).subscribe({next:n=>{this.data$.next(n)},error:n=>{this.message$.next(n)}})}getBySearchQuery(t){this.apiService.get(`diet/searchquery?${t}`).subscribe({next:e=>{this.data$.next(e)},error:e=>{this.message$.next(e)}})}create(t){this.apiService.post("diet/create/",t).subscribe({next:e=>{this.message$.next({severity:"success",summary:"Sikeres \xe9trend r\xf6gz\xedt\xe9s",detail:`${t.name} r\xf6gz\xedtve`})},error:e=>{this.message$.next(e)}})}update(t){this.apiService.put(`diet/update/${t.id}`,t).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres \xe9trend m\xf3dos\xedt\xe1s",detail:`${t.name} m\xf3dos\xedtva`})},error:e=>{this.message$.next(e)}})}delete(t){this.apiService.delete(`diet/delete/${t.id}`).subscribe({next:e=>{this.message$.next({severity:"success",summary:"Sikeres \xe9trend t\xf6rl\xe9s",detail:`${t.name} t\xf6r\xf6lve`})},error:e=>{this.message$.next(e)}})}bulkdelete(t){let e={ids:t.map(r=>r.id)};this.apiService.post("diet/bulkdelete",e).subscribe({next:r=>{this.message$.next({severity:"success",summary:"Sikeres \xe9trend t\xf6rl\xe9s",detail:`${t.length} \xe9trend t\xf6r\xf6lve`})},error:r=>{this.message$.next(r)}})}getDietsForSelector(){return this.cache.length>0?(0,h.of)(this.cache):(this.get(0,999,{sortField:"id",sortOrder:1},""),this.data$.asObservable().pipe((0,v.U)(t=>{const e=t?t.rows:[];return this.cache=e,e})))}getDietColor(t){let e="";return this.cache.map(r=>{t?.toLowerCase()==r.name?.toLowerCase()&&(e=r.color??"")}),e}static#e=this.\u0275fac=function(e){return new(e||s)(_.LFG(o.s))};static#t=this.\u0275prov=_.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},746:(f,p,l)=>{l.d(p,{Q:()=>s});var $=l(5619),h=l(9397),v=l(6306),_=l(2096),o=l(2029),x=l(8814);let s=(()=>{class a{constructor(e){this.apiService=e,this.apiURL=e.apiURL,this.guestData$=new $.X(null),this.serviceMessage$=new $.X(null)}get guestObs(){return this.guestData$.asObservable()}get serviceMessageObs(){return this.serviceMessage$.asObservable()}getGuests(e,r,n,u){let c="";""!==n&&(c=""!=n.sortField?`sort=${n.sortField}&order=${1===n.sortOrder?"ASC":"DESC"}`:"");const i=""!==c&&""!==u?c+"&"+u:""!==c&&""===u?c:""===c&&""!==u?u:"";this.apiService.get(`guest/get/${e}/${r}${""!==i?"?"+i:""}`).subscribe({next:g=>{this.guestData$.next(g)},error:g=>{this.serviceMessage$.next(g)}})}getGuestsBySearch(e,r){let n="";""!==r&&(n=""!=r.sortField?`?sort=${r.sortField}&order=${1===r.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`guest/search/${e}${n}`).subscribe({next:u=>{this.guestData$.next(u)},error:u=>{this.serviceMessage$.next(u)}})}getGuestsBySearchQuery(e){this.apiService.get(`guest/searchquery?${e}`).subscribe({next:r=>{this.guestData$.next(r)},error:r=>{this.serviceMessage$.next(r)}})}getByRFID(e){return this.apiService.get(`guest/getbyrfid/${e}`)}updateLastTagUsage(e){this.apiService.get(`guest/updatelasttagusage/${e}`).subscribe({next:r=>{},error:r=>{this.serviceMessage$.next(r)}})}createGuest(e){this.apiService.post("guest/create/",e).subscribe({next:r=>{this.serviceMessage$.next("success")},error:r=>{this.serviceMessage$.next(r)}})}updateGuest(e){this.apiService.put(`guest/update/${e.id}`,e).subscribe({next:()=>{this.serviceMessage$.next("success")},error:r=>{this.serviceMessage$.next(r)}})}updateGuest2(e){return this.apiService.put(`guest/update/${e.id}`,e).pipe((0,h.b)(()=>console.log(`updated guest id=${e.id}`)),(0,v.K)(this.handleError("updateGuest2")))}deleteGuest(e){this.apiService.delete(`guest/delete/${e.id}`).subscribe({next:r=>{this.serviceMessage$.next(r)},error:r=>{this.serviceMessage$.next(r)}})}deleteGuests(e){let r={ids:e.map(n=>n.id)};this.apiService.post("guest/bulkdelete",r).subscribe({next:n=>{this.serviceMessage$.next(n)},error:n=>{this.serviceMessage$.next(n)}})}handleError(e="operation",r){return n=>(console.error(n),console.error(`${e} failed: ${n.message}`),(0,_.of)(r))}static#e=this.\u0275fac=function(r){return new(r||a)(o.LFG(x.s))};static#t=this.\u0275prov=o.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},3763:(f,p,l)=>{l.d(p,{$:()=>_});var $=l(5619),h=l(2029),v=l(8814);let _=(()=>{class o{constructor(s){this.apiService=s,this.apiURL=s.apiURL,this.data$=new $.X(null),this.message$=new $.X(null)}get logObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(s,a,t,e){let r="";""!==t&&(r=""!=t.sortField?`sort=${t.sortField}&order=${1===t.sortOrder?"ASC":"DESC"}`:"");const n=""!==r&&""!==e?r+"&"+e:""!==r&&""===e?r:""===r&&""!==e?e:"";this.apiService.get(`logs/get/${s}/${a}${""!==n?"?"+n:""}`).subscribe({next:c=>{c&&c.rows?.length&&(c.rows=c.rows.filter(i=>"updatelasttagusage"!==i.action_type),c.rows=c.rows.filter(i=>{if("update"==i.action_type){let d=JSON.parse(i.original_data),g=JSON.parse(i.new_data);if(null==d.rfid&&null!==g.rfid)return!1}return!0}),c.rows.forEach(i=>{if(i.expandable=this.isRowExpandable(i),i.status||(i.response_data=i.original_data),"{}"==i.new_data?i.new_data=null:"{}"==i.original_data?i.original_data=null:"{}"==i.response_data&&(i.response_data=null),200==i.status){let g=JSON.parse(i.response_data).message;if(g){let m=JSON.parse(i.original_data);i.response_data="Success delete"==g?`${m.lastName} ${m.firstName} t\xf6r\xf6lve`:"Update success"==g?`${m.fullname} m\xf3dos\xedtva`:"Guest updated successfully"==g?`${m.lastName} ${m.firstName} m\xf3dos\xedtva`:g}}if(201==i.status){let d=JSON.parse(i.new_data),g="";"conference"==i.table_name?g=`${d?.name} konferencia l\xe9trehozva`:"guest"==i.table_name?g=`${d?.lastName} ${d?.firstName} vend\xe9g l\xe9trehozva`:"users"==i.table_name&&(g=`${d?.fullname} felhaszn\xe1l\xf3 l\xe9trehozva`),i.response_data=g}if(400==i.status){let d=JSON.parse(i.response_data),g=d.error,m=d.message;m&&(i.response_data=m),g&&(i.original_data=JSON.stringify(g))}})),this.data$.next(c)},error:c=>{this.message$.next(c)}})}getBySearch(s,a){let t="";""!==a&&(t=""!=a.sortField?`?sort=${a.sortField}&order=${1===a.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`logs/search/${s}${t}`).subscribe({next:e=>{this.data$.next(e)},error:e=>{this.message$.next(e)}})}getBySearchQuery(s){this.apiService.get(`logs/searchquery?${s}`).subscribe({next:a=>{this.data$.next(a)},error:a=>{this.message$.next(a)}})}create(s){s.userid=Number(localStorage.getItem("userid"))||1,s.user_fullname=localStorage.getItem("fullname")||"SYSTEM",s.user_email=localStorage.getItem("email")||"info@nfcreserve.com",this.apiService.post("logs/create/",s).subscribe({next:a=>{this.message$.next({severity:"success",summary:"Sikeres log r\xf6gz\xedt\xe9s",detail:"Log r\xf6gz\xedtve"})},error:a=>{this.message$.next(a)}})}update(s){this.apiService.put(`logs/update/${s.id}`,s).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres log m\xf3dos\xedt\xe1s",detail:"Log m\xf3dos\xedtva"})},error:a=>{this.message$.next(a)}})}delete(s){this.apiService.delete(`logs/delete/${s.id}`).subscribe({next:a=>{this.message$.next({severity:"success",summary:"Sikeres log t\xf6rl\xe9s",detail:"Log t\xf6r\xf6lve"})},error:a=>{this.message$.next(a)}})}bulkdelete(s){let a={ids:s.map(t=>t.id)};this.apiService.post("logs/bulkdelete",a).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres log t\xf6rl\xe9s",detail:`${s.length} log t\xf6r\xf6lve`})},error:t=>{this.message$.next(t)}})}isRowExpandable(s){return!!s.action_type&&!["scanned code","assign tag","unassign","same code","tag duplicate","already received food","unknown device","import"].includes(s.action_type?.toLowerCase())}static#e=this.\u0275fac=function(a){return new(a||o)(h.LFG(v.s))};static#t=this.\u0275prov=h.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},2835:(f,p,l)=>{l.d(p,{c:()=>_});var $=l(5619),h=l(2029),v=l(8814);let _=(()=>{class o{constructor(s){this.apiService=s,this.apiURL=s.apiURL,this.data$=new $.X(null),this.message$=new $.X(null)}get tagObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(s,a,t,e){let r="";""!==t&&(r=""!=t.sortField?`sort=${t.sortField}&order=${1===t.sortOrder?"ASC":"DESC"}`:"");const n=""!==r&&""!==e?r+"&"+e:""!==r&&""===e?r:""===r&&""!==e?e:"";this.apiService.get(`rfid/get/${s}/${a}${""!==n?"?"+n:""}`).subscribe({next:c=>{let i=c.rows;i&&i.length>0&&i.forEach(d=>{d.identifier=d.rfid}),this.data$.next(c)},error:c=>{this.message$.next(c)}})}getBySearch(s,a){let t="";""!==a&&(t=""!=a.sortField?`?sort=${a.sortField}&order=${1===a.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`rfid/search/${s}${t}`).subscribe({next:e=>{let r=e.rows;r&&r.length>0&&r.forEach(n=>{n.identifier=n.rfid}),this.data$.next(e)},error:e=>{this.message$.next(e)}})}getBySearchQuery(s){this.apiService.get(`rfid/searchquery?${s}`).subscribe({next:a=>{let t=a.rows;t&&t.length>0&&t.forEach(e=>{e.identifier=e.rfid}),this.data$.next(a)},error:a=>{this.message$.next(a)}})}create(s){this.apiService.post("rfid/create/",s).subscribe({next:a=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke r\xf6gz\xedt\xe9s",detail:`${s.identifier} r\xf6gz\xedtve`})},error:a=>{this.message$.next(a)}})}update(s){this.apiService.put(`rfid/update/${s.id}`,s).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke m\xf3dos\xedt\xe1s",detail:`${s.identifier} m\xf3dos\xedtva`})},error:a=>{this.message$.next(a)}})}delete(s){this.apiService.delete(`rfid/delete/${s.id}`).subscribe({next:a=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${s.identifier} t\xf6r\xf6lve`})},error:a=>{this.message$.next(a)}})}bulkdelete(s){let a={ids:s.map(t=>t.id)};this.apiService.post("rfid/bulkdelete",a).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${s.length} c\xedmke t\xf6r\xf6lve`})},error:t=>{this.message$.next(t)}})}getByRFID(s){return this.apiService.get(`rfid/search/${s}`)}static#e=this.\u0275fac=function(a){return new(a||o)(h.LFG(v.s))};static#t=this.\u0275prov=h.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},1836:(f,p,l)=>{function $(){return h=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(h.value)?null:{invalidEmail:{value:h.value}}}l.d(p,{u:()=>$})},8842:(f,p,l)=>{function $(){return h=>{const v=h.get("password"),_=h.get("password_again");return v&&_&&v.value!==_.value?{passwordsDoNotMatch:!0}:null}}l.d(p,{C:()=>$})},3620:(f,p,l)=>{l.d(p,{b:()=>_});var $=l(2832),h=l(9360),v=l(8251);function _(o,x=$.z){return(0,h.e)((s,a)=>{let t=null,e=null,r=null;const n=()=>{if(t){t.unsubscribe(),t=null;const c=e;e=null,a.next(c)}};function u(){const c=r+o,i=x.now();if(i<c)return t=this.schedule(void 0,c-i),void a.add(t);n()}s.subscribe((0,v.x)(a,c=>{e=c,r=x.now(),t||(t=x.schedule(u,o),a.add(t))},()=>{n(),a.complete()},void 0,()=>{e=t=null}))})}}}]);