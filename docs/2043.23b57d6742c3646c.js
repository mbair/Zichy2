"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[2043],{2043:(P,m,o)=>{o.r(m),o.d(m,{AuthModule:()=>r});var h=o(6814),d=o(9739),n=o(2029);let v=(()=>{class l{static#o=this.\u0275fac=function(a){return new(a||l)};static#t=this.\u0275mod=n.oAB({type:l});static#s=this.\u0275inj=n.cJS({imports:[d.Bz.forChild([{path:"error",loadChildren:()=>o.e(5938).then(o.bind(o,5938)).then(s=>s.ErrorModule)},{path:"access",loadChildren:()=>o.e(2514).then(o.bind(o,2514)).then(s=>s.AccessdeniedModule)},{path:"login",loadChildren:()=>Promise.all([o.e(3521),o.e(7853),o.e(2105)]).then(o.bind(o,2105)).then(s=>s.LoginModule)},{path:"forgotpassword",loadChildren:()=>Promise.all([o.e(3521),o.e(8592),o.e(6476)]).then(o.bind(o,6476)).then(s=>s.ForgotPasswordModule)},{path:"register",loadChildren:()=>Promise.all([o.e(7853),o.e(1111),o.e(2426)]).then(o.bind(o,2426)).then(s=>s.RegisterModule)},{path:"newpassword",loadChildren:()=>Promise.all([o.e(3521),o.e(7853),o.e(8592),o.e(4632)]).then(o.bind(o,4632)).then(s=>s.NewPasswordModule)},{path:"verification",loadChildren:()=>Promise.all([o.e(1111),o.e(8798)]).then(o.bind(o,8798)).then(s=>s.VerificationModule)},{path:"lockscreen",loadChildren:()=>Promise.all([o.e(3521),o.e(7853),o.e(6446)]).then(o.bind(o,6446)).then(s=>s.LockScreenModule)},{path:"**",redirectTo:"/notfound"}]),d.Bz]})}return l})();var M=o(1850),E=o(9862);let r=(()=>{class l{static#o=this.\u0275fac=function(a){return new(a||l)};static#t=this.\u0275mod=n.oAB({type:l});static#s=this.\u0275inj=n.cJS({providers:[M.e],imports:[h.ez,v,E.JF]})}return l})()},1850:(P,m,o)=>{o.d(m,{e:()=>I});var h=o(9397),d=o(940),n=o(6306),v=o(6676),E=o(8504),r=o(2029),l=o(9862),S=o(8814),s=o(1206),a=o(9739);v.locale("hu");let I=(()=>{class i{constructor(t,e,g,O){this.http=t,this.apiService=e,this.userService=g,this.router=O,this.apiURL=this.apiService.apiURL}login(t,e){return this.http.post(`${this.apiURL}/users/login`,{email:t,password:e},{observe:"response"}).pipe((0,h.b)(g=>this.setSession(g)),(0,d.d)(),(0,n.K)(this.handleError))}logout(){localStorage.removeItem("token"),localStorage.removeItem("userid"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),localStorage.removeItem("phone"),localStorage.removeItem("userrole"),localStorage.removeItem("user_rolesid"),this.userService.updateUserRole("No Role")}passwordReset(t){return this.http.get(`${this.apiURL}/users/forgotpassrequest/${t}`,{observe:"response"}).pipe((0,h.b)(e=>console.log(e)),(0,d.d)(),(0,n.K)(this.handleError))}passwordRenew(t){return this.http.get(`${this.apiURL}/users/xxxxxxxxxxxxx/${t}`,{observe:"response"}).pipe((0,h.b)(e=>console.log(e)),(0,d.d)(),(0,n.K)(this.handleError))}setSession(t){console.log("authResult",t),localStorage.setItem("token",t.headers.get("Authorization")||""),localStorage.setItem("userid",t.body.id),localStorage.setItem("fullname",t.body.fullname),localStorage.setItem("email",t.body.email),localStorage.setItem("phone",t.body.phone),localStorage.setItem("userrole",t.body.role),localStorage.setItem("user_rolesid",t.body.user_rolesid),this.userService.updateUserRole(t.body.role)}handleError(t){return(0,E._)(JSON.parse(JSON.stringify(t)))}static#o=this.\u0275fac=function(e){return new(e||i)(r.LFG(l.eN),r.LFG(S.s),r.LFG(s.K),r.LFG(a.F0))};static#t=this.\u0275prov=r.Yz7({token:i,factory:i.\u0275fac})}return i})()}}]);