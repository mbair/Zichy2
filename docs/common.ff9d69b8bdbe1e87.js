"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8592],{117:(x,g,a)=>{a.d(g,{T:()=>c});var e=a(2029),l=a(6223),o=a(7394),u=a(1206),y=a(6193),h=a(6814),n=a(5219),s=a(3965),i=a(9515);function p(r,m){if(1&r&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&r){const t=m.$implicit,d=e.oxw(2);e.Q6J("ngClass",d.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}function _(r,m){if(1&r&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&r){const t=m.$implicit,d=e.oxw(2);e.Q6J("ngClass",d.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}const C=function(){return{minWidth:"13rem"}};function b(r,m){if(1&r){const t=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(f){e.CHM(t);const v=e.oxw();return e.KtG(v.handleOnChange(f))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,p,3,2,"ng-template",3),e.YNc(4,_,3,2,"ng-template",4),e.qZA()}if(2&r){const t=m.ngIf,d=e.oxw();e.Akn(e.DdM(11,C)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("formControl",t)("options",d.users)("showClear",d.showClear)}}function T(r,m){if(1&r&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&r){const t=m.$implicit,d=e.oxw(2);e.Q6J("ngClass",d.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}function E(r,m){if(1&r&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&r){const t=m.$implicit,d=e.oxw(2);e.Q6J("ngClass",d.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",null==t?null:t.fullname," ")}}function O(r,m){if(1&r){const t=e.EpF();e.TgZ(0,"p-dropdown",7),e.NdJ("ngModelChange",function(f){e.CHM(t);const v=e.oxw();return e.KtG(v.selectedUser=f)})("onChange",function(f){e.CHM(t);const v=e.oxw();return e.KtG(v.handleOnChange(f))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,T,3,2,"ng-template",3),e.YNc(4,E,3,2,"ng-template",4),e.qZA()}if(2&r){const t=e.oxw();e.Akn(e.DdM(11,C)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("ngModel",t.selectedUser)("options",t.users)("showClear",t.showClear)}}let c=(()=>{class r{constructor(t,d,f){this.userService=t,this.roleService=d,this.cdRef=f,this.change=new e.vpe,this.disabled=!1,this.users=[],this.selectedUser="",this.roles=[],this.subs=new o.w0,this.onChange=v=>{},this.onTouched=()=>{}}ngOnInit(){this.subs.add(this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:t=>{t&&(this.users=this.user_rolesid?t.filter(d=>d.user_rolesid===this.user_rolesid):t,this.fetchRolesForUsers(),this.selectedUser&&!this.users.some(d=>d.id===this.selectedUser)&&(this.selectedUser="",this.onChange("")),this.cdRef.detectChanges())}}))}ngOnDestroy(){this.subs.unsubscribe()}ngOnChanges(t){}fetchRolesForUsers(){this.subs.add(this.roleService.fetchRoles().subscribe({next:t=>{this.roles=t,this.cdRef.detectChanges()}}))}getFormControl(){return this.parentForm?this.parentForm.get(this.controlName):null}handleOnChange(t){this.selectedUser=t.value,this.onChange(t.value),this.onTouched(),this.change.emit({value:t.value,field:this.controlName})}getRoleStyleClass(t){const d=this.roles.find(v=>v.id==t);return`user-role-badge role-${d?d?.name?.trim().toLowerCase().replace(/\s+/g,""):""}`}setDisabledState(t){this.disabled=t,this.cdRef.detectChanges()}writeValue(t){this.selectedUser=t,this.cdRef.detectChanges()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(d){return new(d||r)(e.Y36(u.K),e.Y36(y.N),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",user_rolesid:"user_rolesid",showClear:"showClear"},outputs:{change:"change"},features:[e._Bn([{provide:l.JU,useExisting:(0,e.Gpc)(()=>r),multi:!0}]),e.TTD],decls:3,vars:2,consts:[["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","style","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],[1,"pi","pi-user","mr-1"],["optionLabel","fullname","optionValue","id","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(d,f){if(1&d&&(e.YNc(0,b,5,12,"p-dropdown",0),e.YNc(1,O,5,12,"ng-template",null,1,e.W1O)),2&d){const v=e.MAs(2);e.Q6J("ngIf",f.getFormControl())("ngIfElse",v)}},dependencies:[h.mk,h.O5,l.JJ,l.On,l.oH,n.jx,s.Lt,i.X$],encapsulation:2})}return r})()},3139:(x,g,a)=>{a.d(g,{Q:()=>o});var e=a(8645),l=a(2029);let o=(()=>{class u{constructor(){this.mealChanged=new e.x,this.meals={breakfast:{begin:7,end:10},lunch:{begin:11,end:15},dinner:{begin:17,end:20}},this.checkMealStart(),setInterval(()=>{this.checkMealStart()},2e4)}checkMealStart(){const n=(new Date).getHours();for(const s of Object.keys(this.meals)){const i=this.meals[s];if(n>=i.begin&&n<i.end)return void this.mealChanged.next(s)}}getMealNameByTime(h){const n=h.getHours();for(const s in this.meals){const i=this.meals[s];if(n>=i.begin&&n<=i.end)return this.translateMealName(s)}return"Jelenleg nincs \xe9tkeztet\xe9s"}getMealsForSelector(){let h=[];for(const n in this.meals)h.push(this.translateMealName(n));return h}translateMealName(h){return{breakfast:"reggeli",lunch:"eb\xe9d",dinner:"vacsora"}[h]||h}isOpen(){const h=(new Date).getHours();for(const n in this.meals){const s=this.meals[n];if(h>=s.begin&&h<s.end)return!0}return!1}static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275prov=l.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},2835:(x,g,a)=>{a.d(g,{c:()=>u});var e=a(5619),l=a(2029),o=a(8814);let u=(()=>{class y{constructor(n){this.apiService=n,this.apiURL=n.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get tagObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(n,s,i,p){let _="";""!==i&&(_=""!=i.sortField?`sort=${i.sortField}&order=${1===i.sortOrder?"ASC":"DESC"}`:"");const C=""!==_&&""!==p?_+"&"+p:""!==_&&""===p?_:""===_&&""!==p?p:"";this.apiService.get(`rfid/get/${n}/${s}${""!==C?"?"+C:""}`).subscribe({next:T=>{let E=T.rows;E&&E.length>0&&E.forEach(O=>{O.identifier=O.rfid}),this.data$.next(T)},error:T=>{this.message$.next(T)}})}getBySearch(n,s){let i="";""!==s&&(i=""!=s.sortField?`?sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`rfid/search/${n}${i}`).subscribe({next:p=>{let _=p.rows;_&&_.length>0&&_.forEach(C=>{C.identifier=C.rfid}),this.data$.next(p)},error:p=>{this.message$.next(p)}})}getBySearchQuery(n){this.apiService.get(`rfid/searchquery?${n}`).subscribe({next:s=>{let i=s.rows;i&&i.length>0&&i.forEach(p=>{p.identifier=p.rfid}),this.data$.next(s)},error:s=>{this.message$.next(s)}})}create(n){this.apiService.post("rfid/create/",n).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke r\xf6gz\xedt\xe9s",detail:`${n.rfid} r\xf6gz\xedtve`})},error:s=>{this.message$.next(s)}})}update(n){this.apiService.put(`rfid/update/${n.id}`,n).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke m\xf3dos\xedt\xe1s",detail:`${n.rfid} m\xf3dos\xedtva`})},error:s=>{this.message$.next(s)}})}delete(n){this.apiService.delete(`rfid/delete/${n.id}`).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${n.rfid} t\xf6r\xf6lve`})},error:s=>{this.message$.next(s)}})}bulkdelete(n){let s={ids:n.map(i=>i.id)};this.apiService.post("rfid/bulkdelete",s).subscribe({next:i=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${n.length} c\xedmke t\xf6r\xf6lve`})},error:i=>{this.message$.next(i)}})}getByRFID(n){return this.apiService.get(`rfid/search/${n}`)}static#e=this.\u0275fac=function(s){return new(s||y)(l.LFG(o.s))};static#t=this.\u0275prov=l.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},1836:(x,g,a)=>{function e(){return l=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(l.value)?null:{invalidEmail:{value:l.value}}}a.d(g,{u:()=>e})},8842:(x,g,a)=>{function e(){return l=>{const o=l.get("password"),u=l.get("password_again");return o&&u&&o.value!==u.value?{passwordsDoNotMatch:!0}:null}}a.d(g,{C:()=>e})},4532:(x,g,a)=>{a.d(g,{d:()=>O});var e=a(6814),l=a(2029),o=a(5219);let O=(()=>{class c{static \u0275fac=function(t){return new(t||c)};static \u0275mod=l.oAB({type:c});static \u0275inj=l.cJS({imports:[e.ez,o.m8]})}return c})()},1913:(x,g,a)=>{a.d(g,{h:()=>u,l:()=>y});var e=a(6814),l=a(2029),o=a(2076);let u=(()=>{class h{el;renderer;zone;constructor(s,i,p){this.el=s,this.renderer=i,this.zone=p}selector;enterClass;enterActiveClass;enterToClass;leaveClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;eventListener;documentClickListener;documentKeydownListener;target;enterListener;leaveListener;animating;clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){o.p.hasClass(this.target,this.toggleClass)?o.p.removeClass(this.target,this.toggleClass):o.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",o.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",o.p.addClass(this.target,"hidden"),this.target.style.height=""),o.p.addClass(this.target,this.enterActiveClass),this.enterClass&&o.p.removeClass(this.target,this.enterClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{o.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&o.p.addClass(this.target,this.enterToClass),this.enterListener&&this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterClass&&o.p.removeClass(this.target,this.enterClass),this.enterToClass&&o.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,o.p.addClass(this.target,this.leaveActiveClass),this.leaveClass&&o.p.removeClass(this.target,this.leaveClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{o.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&o.p.addClass(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):(this.leaveClass&&o.p.removeClass(this.target,this.leaveClass),this.leaveToClass&&o.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",s=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(s)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",s=>{const{key:i,keyCode:p,which:_}=s;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===i&&27===p&&27===_&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(s){return!this.el.nativeElement.isSameNode(s.target)&&!this.el.nativeElement.contains(s.target)&&!this.target.contains(s.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}static \u0275fac=function(i){return new(i||h)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.R0b))};static \u0275dir=l.lG2({type:h,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(i,p){1&i&&l.NdJ("click",function(C){return p.clickListener(C)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}})}return h})(),y=(()=>{class h{static \u0275fac=function(i){return new(i||h)};static \u0275mod=l.oAB({type:h});static \u0275inj=l.cJS({imports:[e.ez]})}return h})()}}]);