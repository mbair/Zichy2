"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8592],{117:(S,v,o)=>{o.d(v,{T:()=>g});var e=o(2029),m=o(1206),p=o(6193),f=o(6814),_=o(6223),y=o(5219),n=o(2352),s=o(9515);function r(t,c){if(1&t&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&t){const i=c.$implicit,d=e.oxw(2);e.Q6J("ngClass",d.getRoleStyleClass(i.user_rolesid)),e.xp6(2),e.hij(" ",i.fullname," ")}}function l(t,c){if(1&t&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&t){const i=c.$implicit,d=e.oxw(2);e.Q6J("ngClass",d.getRoleStyleClass(i.user_rolesid)),e.xp6(2),e.hij(" ",i.fullname," ")}}const u=function(){return{minWidth:"13rem"}};function C(t,c){if(1&t){const i=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(x){e.CHM(i);const E=e.oxw();return e.KtG(E.handleOnChange(x))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,r,3,2,"ng-template",3),e.YNc(4,l,3,2,"ng-template",4),e.qZA()}if(2&t){const i=c.ngIf,d=e.oxw();e.Akn(e.DdM(11,u)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("formControl",i)("options",d.users)("showClear",d.showClear)}}function T(t,c){if(1&t&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&t){const i=c.$implicit,d=e.oxw(2);e.Q6J("ngClass",d.getRoleStyleClass(i.user_rolesid)),e.xp6(2),e.hij(" ",i.fullname," ")}}function h(t,c){if(1&t&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&t){const i=c.$implicit,d=e.oxw(2);e.Q6J("ngClass",d.getRoleStyleClass(i.user_rolesid)),e.xp6(2),e.hij(" ",null==i?null:i.fullname," ")}}function a(t,c){if(1&t){const i=e.EpF();e.TgZ(0,"p-dropdown",7),e.NdJ("ngModelChange",function(x){e.CHM(i);const E=e.oxw();return e.KtG(E.selecteduser=x)})("onChange",function(x){e.CHM(i);const E=e.oxw();return e.KtG(E.handleOnChange(x))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,T,3,2,"ng-template",3),e.YNc(4,h,3,2,"ng-template",4),e.qZA()}if(2&t){const i=e.oxw();e.Akn(e.DdM(11,u)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("ngModel",i.selecteduser)("options",i.users)("showClear",i.showClear)}}let g=(()=>{class t{constructor(i,d){this.userService=i,this.roleService=d,this.change=new e.vpe,this.users=[],this.selecteduser="",this.roles=[]}ngOnInit(){this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:i=>{i&&(this.users=this.user_rolesid?i.filter(d=>d.user_rolesid===this.user_rolesid):i,this.fetchRolesForUsers())}})}ngOnChanges(i){}fetchRolesForUsers(){this.roleService.fetchRoles().subscribe({next:i=>{this.roles=i}})}getFormControl(){return this.parentForm?this.parentForm.get(this.controlName):null}handleOnChange(i){this.change.emit({value:i.value,field:this.controlName})}getRoleStyleClass(i){const d=this.roles.find(E=>E.id==i);return`user-role-badge role-${d?d?.name?.trim().toLowerCase().replace(/\s+/g,""):""}`}static#e=this.\u0275fac=function(d){return new(d||t)(e.Y36(m.K),e.Y36(p.N))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",user_rolesid:"user_rolesid",showClear:"showClear"},outputs:{change:"change"},features:[e.TTD],decls:3,vars:2,consts:[["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","style","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],[1,"pi","pi-user","mr-1"],["optionLabel","fullname","optionValue","id","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(d,x){if(1&d&&(e.YNc(0,C,5,12,"p-dropdown",0),e.YNc(1,a,5,12,"ng-template",null,1,e.W1O)),2&d){const E=e.MAs(2);e.Q6J("ngIf",x.getFormControl())("ngIfElse",E)}},dependencies:[f.mk,f.O5,_.JJ,_.On,_.oH,y.jx,n.Lt,s.X$],encapsulation:2})}return t})()},3763:(S,v,o)=>{o.d(v,{$:()=>f});var e=o(5619),m=o(2029),p=o(8814);let f=(()=>{class _{constructor(n){this.apiService=n,this.apiURL=n.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get logObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(n,s,r,l){let u="";""!==r&&(u=""!=r.sortField?`sort=${r.sortField}&order=${1===r.sortOrder?"ASC":"DESC"}`:"");const C=""!==u&&""!==l?u+"&"+l:""!==u&&""===l?u:""===u&&""!==l?l:"";this.apiService.get(`logs/get/${n}/${s}${""!==C?"?"+C:""}`).subscribe({next:h=>{h&&h.rows?.length&&(h.rows=h.rows.filter(a=>"updatelasttagusage"!==a.action_type),h.rows=h.rows.filter(a=>"questions"!==a.table_name),h.rows=h.rows.filter(a=>"answers"!==a.table_name),h.rows=h.rows.filter(a=>{if("update"==a.action_type){let g=JSON.parse(a.original_data),t=JSON.parse(a.new_data);if(null==g.rfid&&null!==t.rfid)return!1}return!0}),h.rows.forEach(a=>{if(a.expandable=this.isRowExpandable(a),a.status||(a.response_data=a.original_data),"{}"==a.new_data?a.new_data=null:"{}"==a.original_data?a.original_data=null:"{}"==a.response_data&&(a.response_data=null),200==a.status){let t=JSON.parse(a.response_data).message;if(t){let c=JSON.parse(a.original_data);a.response_data="Success delete"==t?`${c.lastName} ${c.firstName} t\xf6r\xf6lve`:"Update success"==t?`${c.fullname} m\xf3dos\xedtva`:"Guest updated successfully"==t?`${c.lastName} ${c.firstName} m\xf3dos\xedtva`:t}}if(201==a.status){let g=JSON.parse(a.new_data),t="";if("conference"==a.table_name)t=`${g?.name} konferencia l\xe9trehozva`;else if("guest"==a.table_name)if(null==a.new_data){let i=JSON.parse(JSON.stringify(JSON.parse(a.response_data))).guest||{};a.original_data=JSON.stringify(i),t=`${i.lastName||"N\xe9v hi\xe1nyzik"} ${i.firstName||"N\xe9v hi\xe1nyzik"} vend\xe9g regisztr\xe1lva`}else t=`${g?.lastName} ${g?.firstName} vend\xe9g l\xe9trehozva`;else"users"==a.table_name&&(t=`${g?.fullname} felhaszn\xe1l\xf3 l\xe9trehozva`);a.response_data=t}if(400==a.status){let g=JSON.parse(a.response_data),t=g.error,c=g.message;c&&(a.response_data=c),t&&(a.original_data=JSON.stringify(t))}})),this.data$.next(h)},error:h=>{this.message$.next(h)}})}getBySearch(n,s){let r="";""!==s&&(r=""!=s.sortField?`?sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`logs/search/${n}${r}`).subscribe({next:l=>{this.data$.next(l)},error:l=>{this.message$.next(l)}})}getBySearchQuery(n){this.apiService.get(`logs/searchquery?${n}`).subscribe({next:s=>{this.data$.next(s)},error:s=>{this.message$.next(s)}})}create(n){n.userid=Number(localStorage.getItem("userid"))||1,n.user_fullname=localStorage.getItem("fullname")||"SYSTEM",n.user_email=localStorage.getItem("email")||"info@nfcreserve.com",this.apiService.post("logs/create/",n).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres log r\xf6gz\xedt\xe9s",detail:"Log r\xf6gz\xedtve"})},error:s=>{this.message$.next(s)}})}update(n){this.apiService.put(`logs/update/${n.id}`,n).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres log m\xf3dos\xedt\xe1s",detail:"Log m\xf3dos\xedtva"})},error:s=>{this.message$.next(s)}})}delete(n){this.apiService.delete(`logs/delete/${n.id}`).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres log t\xf6rl\xe9s",detail:"Log t\xf6r\xf6lve"})},error:s=>{this.message$.next(s)}})}bulkdelete(n){let s={ids:n.map(r=>r.id)};this.apiService.post("logs/bulkdelete",s).subscribe({next:r=>{this.message$.next({severity:"success",summary:"Sikeres log t\xf6rl\xe9s",detail:`${n.length} log t\xf6r\xf6lve`})},error:r=>{this.message$.next(r)}})}isRowExpandable(n){return!!n.action_type&&!["scanned code","assign tag","unassign","same code","tag duplicate","already received food","unknown device","import"].includes(n.action_type?.toLowerCase())}static#e=this.\u0275fac=function(s){return new(s||_)(m.LFG(p.s))};static#t=this.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},2835:(S,v,o)=>{o.d(v,{c:()=>f});var e=o(5619),m=o(2029),p=o(8814);let f=(()=>{class _{constructor(n){this.apiService=n,this.apiURL=n.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get tagObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(n,s,r,l){let u="";""!==r&&(u=""!=r.sortField?`sort=${r.sortField}&order=${1===r.sortOrder?"ASC":"DESC"}`:"");const C=""!==u&&""!==l?u+"&"+l:""!==u&&""===l?u:""===u&&""!==l?l:"";this.apiService.get(`rfid/get/${n}/${s}${""!==C?"?"+C:""}`).subscribe({next:h=>{let a=h.rows;a&&a.length>0&&a.forEach(g=>{g.identifier=g.rfid}),this.data$.next(h)},error:h=>{this.message$.next(h)}})}getBySearch(n,s){let r="";""!==s&&(r=""!=s.sortField?`?sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`rfid/search/${n}${r}`).subscribe({next:l=>{let u=l.rows;u&&u.length>0&&u.forEach(C=>{C.identifier=C.rfid}),this.data$.next(l)},error:l=>{this.message$.next(l)}})}getBySearchQuery(n){this.apiService.get(`rfid/searchquery?${n}`).subscribe({next:s=>{let r=s.rows;r&&r.length>0&&r.forEach(l=>{l.identifier=l.rfid}),this.data$.next(s)},error:s=>{this.message$.next(s)}})}create(n){this.apiService.post("rfid/create/",n).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke r\xf6gz\xedt\xe9s",detail:`${n.rfid} r\xf6gz\xedtve`})},error:s=>{this.message$.next(s)}})}update(n){this.apiService.put(`rfid/update/${n.id}`,n).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke m\xf3dos\xedt\xe1s",detail:`${n.rfid} m\xf3dos\xedtva`})},error:s=>{this.message$.next(s)}})}delete(n){this.apiService.delete(`rfid/delete/${n.id}`).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${n.rfid} t\xf6r\xf6lve`})},error:s=>{this.message$.next(s)}})}bulkdelete(n){let s={ids:n.map(r=>r.id)};this.apiService.post("rfid/bulkdelete",s).subscribe({next:r=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${n.length} c\xedmke t\xf6r\xf6lve`})},error:r=>{this.message$.next(r)}})}getByRFID(n){return this.apiService.get(`rfid/search/${n}`)}static#e=this.\u0275fac=function(s){return new(s||_)(m.LFG(p.s))};static#t=this.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()},1836:(S,v,o)=>{function e(){return m=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(m.value)?null:{invalidEmail:{value:m.value}}}o.d(v,{u:()=>e})},8842:(S,v,o)=>{function e(){return m=>{const p=m.get("password"),f=m.get("password_again");return p&&f&&p.value!==f.value?{passwordsDoNotMatch:!0}:null}}o.d(v,{C:()=>e})},4532:(S,v,o)=>{o.d(v,{d:()=>g});var e=o(6814),m=o(2029),p=o(5219);let g=(()=>{class t{static \u0275fac=function(d){return new(d||t)};static \u0275mod=m.oAB({type:t});static \u0275inj=m.cJS({imports:[e.ez,p.m8]})}return t})()},1913:(S,v,o)=>{o.d(v,{h:()=>f,l:()=>_});var e=o(6814),m=o(2029),p=o(2076);let f=(()=>{class y{el;renderer;zone;constructor(s,r,l){this.el=s,this.renderer=r,this.zone=l}selector;enterClass;enterActiveClass;enterToClass;leaveClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;eventListener;documentClickListener;documentKeydownListener;target;enterListener;leaveListener;animating;clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){p.p.hasClass(this.target,this.toggleClass)?p.p.removeClass(this.target,this.toggleClass):p.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",p.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",p.p.addClass(this.target,"hidden"),this.target.style.height=""),p.p.addClass(this.target,this.enterActiveClass),this.enterClass&&p.p.removeClass(this.target,this.enterClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{p.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&p.p.addClass(this.target,this.enterToClass),this.enterListener&&this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterClass&&p.p.removeClass(this.target,this.enterClass),this.enterToClass&&p.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,p.p.addClass(this.target,this.leaveActiveClass),this.leaveClass&&p.p.removeClass(this.target,this.leaveClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{p.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&p.p.addClass(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):(this.leaveClass&&p.p.removeClass(this.target,this.leaveClass),this.leaveToClass&&p.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",s=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(s)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",s=>{const{key:r,keyCode:l,which:u}=s;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===r&&27===l&&27===u&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(s){return!this.el.nativeElement.isSameNode(s.target)&&!this.el.nativeElement.contains(s.target)&&!this.target.contains(s.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}static \u0275fac=function(r){return new(r||y)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(m.R0b))};static \u0275dir=m.lG2({type:y,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(r,l){1&r&&m.NdJ("click",function(C){return l.clickListener(C)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}})}return y})(),_=(()=>{class y{static \u0275fac=function(r){return new(r||y)};static \u0275mod=m.oAB({type:y});static \u0275inj=m.cJS({imports:[e.ez]})}return y})()}}]);