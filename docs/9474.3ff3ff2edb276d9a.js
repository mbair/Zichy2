"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[9474],{9474:(v,m,l)=>{l.d(m,{w:()=>e});var i=l(2029),f=l(6223),u=l(7394),C=l(219),g=l(5219),_=l(4055),S=l(9515);const h=["conferenceSelector"];function b(n,r){1&n&&i._uU(0),2&n&&i.hij(" ",r.$implicit.name," ")}function s(n,r){1&n&&i._uU(0),2&n&&i.hij(" ",r.$implicit.name," ")}let e=(()=>{class n{set preselectConferenceId(t){this._pendingSelectId=t,this.tryPreselectById()}constructor(t,o){this.conferenceService=t,this.messageService=o,this.selectFirstOption=!1,this.showClear=!0,this.style={},this.disabledOptions=[],this.loading=!0,this.disabled=!1,this.conferences=[],this.originalConferences=[],this.selectedConferences=[],this.subscriptions=new u.w0,this.onChange=c=>{},this.onTouched=()=>{}}ngOnInit(){const t=this.conferenceService.getConferencesForSelector().subscribe({next:o=>{this.conferences=o??[],this.originalConferences=[...o??[]],this.syncSelectedConferences(),this.handleSelectFirstOption(),this.updateDisabledFlags(),this.tryPreselectById(),this.loading=!1},error:()=>{this.conferences=[],this.originalConferences=[],this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load conferences. Please try again later."})}});this.subscriptions.add(t)}ngOnChanges(t){t.disabledOptions&&this.originalConferences.length>0&&this.updateDisabledFlags(),t.preselectConferenceId&&this.tryPreselectById()}ngOnDestroy(){this.subscriptions.unsubscribe()}updateDisabledFlags(){this.conferences=this.originalConferences.map(t=>({...t,disabled:this.disabledOptions.some(o=>o.id===t.id)}))}handleSelectFirstOption(){!this.selectFirstOption||this.selectedConferences&&0!==this.selectedConferences.length||(this.selectedConferences=this.conferences.slice(0,this.selectionLimit??1),this.onChange(this.selectedConferences))}tryPreselectById(){if(!this.conferences?.length||null==this._pendingSelectId)return;const t=this.conferences.find(o=>o.id===this._pendingSelectId);this.selectedConferences=t?[t]:[],this.onChange(this.selectedConferences),this.onTouched()}setDisabledState(t){this.disabled=t}syncSelectedConferences(){this.selectedConferences=this.conferences.filter(t=>this.selectedConferences.some(o=>o.id===t.id)),this.onChange(this.selectedConferences)}onSelectionChange(t){this.selectedConferences=t.value,this.onChange(this.selectedConferences),this.onTouched(),this.selectionLimit===this.selectedConferences.length&&this.conferenceSelectorRef&&this.conferenceSelectorRef.hide()}onSelectionClear(){this.selectedConferences=[],this.onChange(this.selectedConferences),this.onTouched()}writeValue(t){this.selectedConferences=t?.slice(0,this.selectionLimit??t.length)||[],this.conferences.length>0&&this.syncSelectedConferences()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(o){return new(o||n)(i.Y36(C.Z),i.Y36(g.ez))};static#t=this.\u0275cmp=i.Xpm({type:n,selectors:[["app-conference-selector"]],viewQuery:function(o,c){if(1&o&&i.Gf(h,5),2&o){let a;i.iGM(a=i.CRH())&&(c.conferenceSelectorRef=a.first)}},inputs:{selectionLimit:"selectionLimit",selectFirstOption:"selectFirstOption",placeholder:"placeholder",showClear:"showClear",style:"style",disabledOptions:"disabledOptions",preselectConferenceId:"preselectConferenceId"},features:[i._Bn([{provide:f.JU,useExisting:(0,i.Gpc)(()=>n),multi:!0}]),i.TTD],decls:5,vars:13,consts:[["dataKey","id","optionLabel","name","optionDisabled","disabled","scrollHeight","400px","appendTo","body","display","chip",1,"multiselect-custom-virtual-scroll",3,"options","ngModel","disabled","selectionLimit","placeholder","emptyMessage","virtualScroll","virtualScrollItemSize","showClear","ngModelChange","onChange","onClear"],["conferenceSelector",""],["pTemplate","item"],["pTemplate","selectedItem"]],template:function(o,c){1&o&&(i.TgZ(0,"p-multiSelect",0,1),i.NdJ("ngModelChange",function(p){return c.selectedConferences=p})("onChange",function(p){return c.onSelectionChange(p)})("onClear",function(){return c.onSelectionClear()}),i.ALo(2,"translate"),i.YNc(3,b,1,1,"ng-template",2),i.YNc(4,s,1,1,"ng-template",3),i.qZA()),2&o&&(i.Akn(c.style),i.s9C("emptyMessage",i.lcZ(2,11,"Nincs tal\xe1lat...")),i.Q6J("options",c.conferences)("ngModel",c.selectedConferences)("disabled",c.disabled)("selectionLimit",c.selectionLimit)("placeholder",c.placeholder)("virtualScroll",!0)("virtualScrollItemSize",43)("showClear",c.showClear))},dependencies:[f.JJ,f.On,g.jx,_.NU,S.X$],encapsulation:2,changeDetection:0})}return n})()},219:(v,m,l)=>{l.d(m,{Z:()=>S});var i=l(5619),f=l(7398),u=l(6306),C=l(2096),g=l(2029),_=l(8814);let S=(()=>{class h{constructor(s){this.apiService=s,this.apiURL=s.apiURL,this.data$=new i.X(null),this.message$=new i.X(null)}get conferenceObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(s,e,n,r){const t=localStorage.getItem("userrole"),o=localStorage.getItem("userid");if("Szervezo"===t&&o){const d=`organizer_user_id=${o}`;r=r?`${r}&${d}`:d}r.includes("enabled=")||(r=r?`${r}&enabled=1`:"enabled=1");let c="";""!==n&&(c=`sort=${n.sortField&&""!==n.sortField?n.sortField:"beginDate"}&order=${1===n.sortOrder?"ASC":"DESC"}`);const a=""!==c&&""!==r?c+"&"+r:""!==c&&""===r?c:""===c&&""!==r?r:"";this.apiService.get(`conference/get/${s}/${e}${""!==a?"?"+a:""}`).subscribe({next:d=>{this.data$.next(d)},error:d=>{this.message$.next(d)}})}getBySearch(s,e){let n="";""!==e&&(n=""!=e.sortField?`?sort=${e.sortField}&order=${1===e.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`conference/search/${s}${n}`).subscribe({next:r=>{this.data$.next(r)},error:r=>{this.message$.next(r)}})}getBySearchQuery(s){this.apiService.get(`conference/searchquery?${s}`).subscribe({next:e=>{this.data$.next(e)},error:e=>{this.message$.next(e)}})}create(s){this.apiService.post("conference/create/",s).subscribe({next:e=>{this.message$.next({severity:"success",summary:"Sikeres konferencia r\xf6gz\xedt\xe9s",detail:`${s.name} r\xf6gz\xedtve`})},error:e=>{this.message$.next(e)}})}update(s){this.apiService.put(`conference/update/${s.id}`,s).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres konferencia m\xf3dos\xedt\xe1s",detail:`${s.name} m\xf3dos\xedtva`})},error:e=>{this.message$.next(e)}})}delete(s){this.apiService.delete(`conference/delete/${s.id}`).subscribe({next:e=>{this.message$.next({severity:"success",summary:"Sikeres konferencia t\xf6rl\xe9s",detail:`${s.name} t\xf6r\xf6lve`})},error:e=>{this.message$.next(e)}})}bulkdelete(s){let e={ids:s.map(n=>n.id)};this.apiService.post("conference/bulkdelete",e).subscribe({next:n=>{this.message$.next({severity:"success",summary:"Sikeres konferencia t\xf6rl\xe9s",detail:`${s.length} konferencia t\xf6r\xf6lve`})},error:n=>{this.message$.next(n)}})}getConferencesForSelector(){return this.get(0,999,{sortField:"beginDate",sortOrder:1},""),this.data$.asObservable().pipe((0,f.U)(e=>e?e.rows:[]))}getById(s){return this.apiService.get(`conference/getbyid/${s}`)}isSlugValid(s){return this.get(0,20,"slug=","sort"),this.data$.pipe((0,f.U)(e=>e&&e.data&&e.rows.length>0),(0,u.K)(()=>(0,C.of)(!1)))}assignRoomsToConference(s,e){return this.apiService.post(`conferencesroom/addroom/${s.id}`,{roomIds:e})}removeRoomsFromConference(s,e){this.apiService.post(`conferencesroom/removeroom/${s}`,{roomIds:e}).subscribe({next:n=>{this.message$.next({severity:"success",summary:"\xd6sszerendel\xe9s t\xf6r\xf6lve",detail:"Szoba-konferencia \xf6sszerendel\xe9s t\xf6r\xf6lve"})},error:n=>{this.message$.next(n)}})}saveFormFieldInfos(s){this.apiService.post(`conference/saveFormFieldInfos/${s.conferenceId}`,s.fields).subscribe({next:e=>{this.message$.next({severity:"success",summary:"Mez\u0151 inform\xe1ci\xf3k mentve",detail:"\u0170rlap mez\u0151 inform\xe1ci\xf3k sikeresen mentve"})},error:e=>{this.message$.next(e)}})}static#e=this.\u0275fac=function(e){return new(e||h)(g.LFG(_.s))};static#t=this.\u0275prov=g.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);