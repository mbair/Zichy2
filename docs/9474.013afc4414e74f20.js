"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[9474],{9474:(M,v,_)=>{_.d(v,{w:()=>S});var e=_(2029),u=_(6990),g=_(9515),C=_(219),E=_(6814),d=_(6223),p=_(5219),$=_(4055);const s=["conferenceSelector"];function n(o,c){1&o&&e._uU(0),2&o&&e.hij(" ",c.$implicit.name," ")}function r(o,c){if(1&o&&e._uU(0),2&o){const t=c.$implicit;e.hij(" ",null==t?null:t.name," ")}}function i(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"p-multiSelect",2,3),e.NdJ("onChange",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.handleOnChange(a))})("onClear",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleOnClear())})("onPanelHide",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPanelHide())}),e.ALo(2,"translate"),e.YNc(3,n,1,1,"ng-template",4),e.YNc(4,r,1,1,"ng-template",5),e.qZA()}if(2&o){const t=c.ngIf,l=e.oxw();e.Akn(l.style),e.s9C("emptyMessage",e.lcZ(2,10,"Nincs tal\xe1lat...")),e.Q6J("formControl",t)("options",l.conferences)("selectionLimit",1)("virtualScroll",!0)("virtualScrollItemSize",43)("placeholder",l.placeholder)("showClear",l.showClear)}}function O(o,c){1&o&&e._uU(0),2&o&&e.hij(" ",c.$implicit.name," ")}function f(o,c){if(1&o&&e._uU(0),2&o){const t=c.$implicit;e.hij(" ",null==t?null:t.name," ")}}function h(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"p-multiSelect",6,3),e.NdJ("ngModelChange",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.selectedConferences=a)})("onChange",function(a){e.CHM(t);const m=e.oxw();return e.KtG(m.handleOnChange(a))})("onClear",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleOnClear())})("onPanelHide",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPanelHide())}),e.ALo(2,"translate"),e.YNc(3,O,1,1,"ng-template",4),e.YNc(4,f,1,1,"ng-template",5),e.qZA()}if(2&o){const t=e.oxw();e.Akn(t.style),e.s9C("emptyMessage",e.lcZ(2,10,"Nincs tal\xe1lat...")),e.Q6J("ngModel",t.selectedConferences)("options",t.conferences)("selectionLimit",t.selectionLimit)("virtualScroll",!0)("virtualScrollItemSize",43)("placeholder",t.placeholder)("showClear",t.showClear)}}let S=(()=>{class o{constructor(t,l){this.translate=t,this.conferenceService=l,this.change=new e.vpe,this.loading=!0,this.conferences=[],this.selectedConferences=[],this.previousSelectedConferences=[]}ngOnInit(){this.translate.onLangChange.subscribe(()=>{this.setConferences()})}ngOnChanges(t){this.setConferences()}getFormControl(){return this.parentForm&&this.controlName?this.parentForm.get(this.controlName):null}setConferences(){this.loading=!0,this.conferenceService.getConferencesForSelector().subscribe(t=>{if(this.conferences=t,this.selectFirstOption&&this.conferences.length>0){this.selectedConferences=this.conferences.slice(0,this.selectionLimit??this.conferences.length),this.getFormControl()?.setValue(this.selectedConferences.map(m=>m.name)||null);const a={originalEvent:{},value:this.selectedConferences.map(m=>m.name)||null};this.handleOnChange(a)}})}handleOnChange(t){this.selectedConferences=t.value,this.getFormControl()?.setValue(this.selectedConferences),this.selectionLimit===this.selectedConferences.length&&setTimeout(()=>this.conferenceSelectorRef?.hide(),0),(0,u.isEqual)(this.selectedConferences,this.previousSelectedConferences)||(this.change.emit({value:this.selectedConferences,field:this.controlName}),this.previousSelectedConferences=[...this.selectedConferences])}onPanelHide(){(0,u.isEqual)(this.selectedConferences,this.previousSelectedConferences)||(this.change.emit({value:this.selectedConferences,field:this.controlName}),this.previousSelectedConferences=[...this.selectedConferences])}handleOnClear(){this.selectedConferences=[],this.getFormControl()?.setValue([]),this.handleOnChange({value:[],originalEvent:new Event("clear")})}static#e=this.\u0275fac=function(l){return new(l||o)(e.Y36(g.sK),e.Y36(C.Z))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-conference-selector"]],viewQuery:function(l,a){if(1&l&&e.Gf(s,5),2&l){let m;e.iGM(m=e.CRH())&&(a.conferenceSelectorRef=m.first)}},inputs:{parentForm:"parentForm",controlName:"controlName",showClear:"showClear",placeholder:"placeholder",selectionLimit:"selectionLimit",selectFirstOption:"selectFirstOption",style:"style"},outputs:{change:"change"},features:[e.TTD],decls:3,vars:2,consts:[["class","multiselect-custom-virtual-scroll","optionLabel","name","optionValue","name","scrollHeight","400px","appendTo","body","display","chip",3,"formControl","options","style","selectionLimit","virtualScroll","virtualScrollItemSize","placeholder","emptyMessage","showClear","onChange","onClear","onPanelHide",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","name","optionValue","name","scrollHeight","400px","appendTo","body","display","chip",1,"multiselect-custom-virtual-scroll",3,"formControl","options","selectionLimit","virtualScroll","virtualScrollItemSize","placeholder","emptyMessage","showClear","onChange","onClear","onPanelHide"],["conferenceSelector",""],["pTemplate","item"],["pTemplate","selectedItem"],["optionLabel","name","optionValue","name","scrollHeight","400px","appendTo","body","display","chip",1,"multiselect-custom-virtual-scroll",3,"ngModel","options","selectionLimit","virtualScroll","virtualScrollItemSize","placeholder","emptyMessage","showClear","ngModelChange","onChange","onClear","onPanelHide"]],template:function(l,a){if(1&l&&(e.YNc(0,i,5,12,"p-multiSelect",0),e.YNc(1,h,5,12,"ng-template",null,1,e.W1O)),2&l){const m=e.MAs(2);e.Q6J("ngIf",a.getFormControl())("ngIfElse",m)}},dependencies:[E.O5,d.JJ,d.On,d.oH,p.jx,$.NU,g.X$],encapsulation:2})}return o})()},219:(M,v,_)=>{_.d(v,{Z:()=>d});var e=_(5619),u=_(7398),x=_(6306),g=_(2096),C=_(2029),E=_(8814);let d=(()=>{class p{constructor(s){this.apiService=s,this.cache=[],this.apiURL=s.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get conferenceObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(s,n,r,i){const O=localStorage.getItem("userrole"),f=localStorage.getItem("userid");if("Szervezo"===O&&f){const c=`organizer_user_id=${f}`;i=i?`${i}&${c}`:c}i.includes("enabled=")||(i=i?`${i}&enabled=1`:"enabled=1");let h="";""!==r&&(h=""!=r.sortField?`sort=${r.sortField}&order=${1===r.sortOrder?"ASC":"DESC"}`:"");const S=""!==h&&""!==i?h+"&"+i:""!==h&&""===i?h:""===h&&""!==i?i:"";this.apiService.get(`conference/get/${s}/${n}${""!==S?"?"+S:""}`).subscribe({next:c=>{this.data$.next(c)},error:c=>{this.message$.next(c)}})}getBySearch(s,n){let r="";""!==n&&(r=""!=n.sortField?`?sort=${n.sortField}&order=${1===n.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`conference/search/${s}${r}`).subscribe({next:i=>{this.data$.next(i)},error:i=>{this.message$.next(i)}})}getBySearchQuery(s){this.apiService.get(`conference/searchquery?${s}`).subscribe({next:n=>{this.data$.next(n)},error:n=>{this.message$.next(n)}})}create(s){this.apiService.post("conference/create/",s).subscribe({next:n=>{this.message$.next({severity:"success",summary:"Sikeres konferencia r\xf6gz\xedt\xe9s",detail:`${s.name} r\xf6gz\xedtve`})},error:n=>{this.message$.next(n)}})}update(s){this.apiService.put(`conference/update/${s.id}`,s).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres konferencia m\xf3dos\xedt\xe1s",detail:`${s.name} m\xf3dos\xedtva`})},error:n=>{this.message$.next(n)}})}delete(s){this.apiService.delete(`conference/delete/${s.id}`).subscribe({next:n=>{this.message$.next({severity:"success",summary:"Sikeres konferencia t\xf6rl\xe9s",detail:`${s.name} t\xf6r\xf6lve`})},error:n=>{this.message$.next(n)}})}bulkdelete(s){let n={ids:s.map(r=>r.id)};this.apiService.post("conference/bulkdelete",n).subscribe({next:r=>{this.message$.next({severity:"success",summary:"Sikeres konferencia t\xf6rl\xe9s",detail:`${s.length} konferencia t\xf6r\xf6lve`})},error:r=>{this.message$.next(r)}})}getConferencesForSelector(){return this.get(0,999,{sortField:"id",sortOrder:1},""),this.data$.asObservable().pipe((0,u.U)(n=>{const r=n?n.rows:[];return this.cache=r,r}))}getById(s){return this.apiService.get(`conference/getbyid/${s}`)}isSlugValid(s){return this.get(0,20,"slug=","sort"),this.data$.pipe((0,u.U)(n=>(console.log("isSlugValid response",n),n&&n.data&&n.rows.length>0)),(0,x.K)(()=>(0,g.of)(!1)))}assignRooms(s,n){this.apiService.post(`conferencesroom/addroom/${s}`,{roomIds:n}).subscribe({next:r=>{this.message$.next({severity:"success",summary:"Sikeres szoba hozz\xe1rendel\xe9s",detail:"Szob\xe1k hozz\xe1rendelve"})},error:r=>{this.message$.next(r)}})}static#e=this.\u0275fac=function(n){return new(n||p)(C.LFG(E.s))};static#t=this.\u0275prov=C.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);