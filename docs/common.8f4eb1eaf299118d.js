"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8592],{7939:(x,C,c)=>{c.d(C,{H:()=>E});var e=c(2029),u=c(9515),f=c(6814),h=c(6223),p=c(5219),y=c(2352);function a(r,n){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngClass","meal-badge "+(null==t?null:t.style)),e.xp6(1),e.hij(" ",t.label," ")}}function s(r,n){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngClass","meal-badge "+(null==t?null:t.style)),e.xp6(1),e.hij(" ",null==t?null:t.label," ")}}function i(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(d){e.CHM(t);const o=e.oxw();return e.KtG(o.handleOnChange(d))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,a,2,2,"ng-template",3),e.YNc(4,s,2,2,"ng-template",4),e.qZA()}if(2&r){const t=n.ngIf,l=e.oxw();e.s9C("placeholder",e.lcZ(1,5,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,7,"Nincs tal\xe1lat...")),e.Q6J("formControl",t)("options",l.meals)("showClear",l.showClear)}}function _(r,n){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngClass","meal-badge "+(null==t?null:t.style)),e.xp6(1),e.hij(" ",t.label," ")}}function g(r,n){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.Q6J("ngClass","meal-badge "+(null==t?null:t.style)),e.xp6(1),e.hij(" ",null==t?null:t.label," ")}}function v(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p-dropdown",6),e.NdJ("ngModelChange",function(d){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedMeal=d)})("onChange",function(d){e.CHM(t);const o=e.oxw();return e.KtG(o.handleOnChange(d))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,_,2,2,"ng-template",3),e.YNc(4,g,2,2,"ng-template",4),e.qZA()}if(2&r){const t=e.oxw();e.s9C("placeholder",e.lcZ(1,5,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,7,"Nincs tal\xe1lat...")),e.Q6J("ngModel",t.selectedMeal)("options",t.meals)("showClear",t.showClear)}}let E=(()=>{class r{constructor(t){this.translate=t,this.change=new e.vpe,this.meals=[],this.selectedMeal=""}ngOnInit(){this.translate.onLangChange.subscribe(()=>{this.setMeals()})}ngOnChanges(t){this.setMeals()}getFormControl(){return this.parentForm&&this.controlName?this.parentForm.get(this.controlName):null}setMeals(){if(this.meals=[{label:this.translate.instant("MEALS.BREAKFAST"),value:"reggeli",style:"breakfast"},{label:this.translate.instant("MEALS.LUNCH"),value:"eb\xe9d",style:"lunch"},{label:this.translate.instant("MEALS.DINNER"),value:"vacsora",style:"dinner"}],this.earliestMeal){const t=this.meals.findIndex(l=>l.value===this.earliestMeal);t>-1&&(this.meals=this.meals.slice(t))}if(this.latestMeal){const t=this.meals.findIndex(l=>l.value===this.latestMeal);t>-1&&(this.meals=this.meals.slice(0,t+1))}this.showNothing&&this.meals.push({label:this.translate.instant("MEALS.NOTHING"),value:"nem k\xe9r \xe9tkez\xe9st",style:"nothing"})}setEarliestMeal(t){this.earliestMeal=t,this.setMeals()}setLatestMeal(t){this.latestMeal=t,this.setMeals()}handleOnChange(t){this.change.emit({value:t.value,field:this.controlName})}static#e=this.\u0275fac=function(l){return new(l||r)(e.Y36(u.sK))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-meal-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",showClear:"showClear",showNothing:"showNothing",earliestMeal:"earliestMeal",latestMeal:"latestMeal"},outputs:{change:"change"},features:[e.TTD],decls:3,vars:2,consts:[["optionLabel","label","optionValue","value","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","label","optionValue","value","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],["optionLabel","label","optionValue","value","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(l,d){if(1&l&&(e.YNc(0,i,5,9,"p-dropdown",0),e.YNc(1,v,5,9,"ng-template",null,1,e.W1O)),2&l){const o=e.MAs(2);e.Q6J("ngIf",d.getFormControl())("ngIfElse",o)}},dependencies:[f.mk,f.O5,h.JJ,h.On,h.oH,p.jx,y.Lt,u.X$],encapsulation:2})}return r})()},117:(x,C,c)=>{c.d(C,{T:()=>t});var e=c(2029),u=c(1206),f=c(6193),h=c(6814),p=c(6223),y=c(5219),a=c(2352),s=c(9515);function i(l,d){if(1&l&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&l){const o=d.$implicit,m=e.oxw(2);e.Q6J("ngClass",m.getRoleStyleClass(o.user_rolesid)),e.xp6(2),e.hij(" ",o.fullname," ")}}function _(l,d){if(1&l&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&l){const o=d.$implicit,m=e.oxw(2);e.Q6J("ngClass",m.getRoleStyleClass(o.user_rolesid)),e.xp6(2),e.hij(" ",o.fullname," ")}}const g=function(){return{minWidth:"13rem"}};function v(l,d){if(1&l){const o=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(S){e.CHM(o);const M=e.oxw();return e.KtG(M.handleOnChange(S))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,i,3,2,"ng-template",3),e.YNc(4,_,3,2,"ng-template",4),e.qZA()}if(2&l){const o=d.ngIf,m=e.oxw();e.Akn(e.DdM(11,g)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("formControl",o)("options",m.users)("showClear",m.showClear)}}function E(l,d){if(1&l&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&l){const o=d.$implicit,m=e.oxw(2);e.Q6J("ngClass",m.getRoleStyleClass(o.user_rolesid)),e.xp6(2),e.hij(" ",o.fullname," ")}}function r(l,d){if(1&l&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&l){const o=d.$implicit,m=e.oxw(2);e.Q6J("ngClass",m.getRoleStyleClass(o.user_rolesid)),e.xp6(2),e.hij(" ",null==o?null:o.fullname," ")}}function n(l,d){if(1&l){const o=e.EpF();e.TgZ(0,"p-dropdown",7),e.NdJ("ngModelChange",function(S){e.CHM(o);const M=e.oxw();return e.KtG(M.selecteduser=S)})("onChange",function(S){e.CHM(o);const M=e.oxw();return e.KtG(M.handleOnChange(S))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,E,3,2,"ng-template",3),e.YNc(4,r,3,2,"ng-template",4),e.qZA()}if(2&l){const o=e.oxw();e.Akn(e.DdM(11,g)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("ngModel",o.selecteduser)("options",o.users)("showClear",o.showClear)}}let t=(()=>{class l{constructor(o,m){this.userService=o,this.roleService=m,this.change=new e.vpe,this.users=[],this.selecteduser="",this.roles=[]}ngOnInit(){this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:o=>{o&&(this.users=this.user_rolesid?o.filter(m=>m.user_rolesid===this.user_rolesid):o,this.fetchRolesForUsers())}})}ngOnChanges(o){}fetchRolesForUsers(){this.roleService.fetchRoles().subscribe({next:o=>{this.roles=o}})}getFormControl(){return this.parentForm?this.parentForm.get(this.controlName):null}handleOnChange(o){this.change.emit({value:o.value,field:this.controlName})}getRoleStyleClass(o){const m=this.roles.find(M=>M.id==o);return`user-role-badge role-${m?m?.name?.trim().toLowerCase().replace(/\s+/g,""):""}`}static#e=this.\u0275fac=function(m){return new(m||l)(e.Y36(u.K),e.Y36(f.N))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-user-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",user_rolesid:"user_rolesid",showClear:"showClear"},outputs:{change:"change"},features:[e.TTD],decls:3,vars:2,consts:[["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","style","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],[1,"pi","pi-user","mr-1"],["optionLabel","fullname","optionValue","id","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(m,S){if(1&m&&(e.YNc(0,v,5,12,"p-dropdown",0),e.YNc(1,n,5,12,"ng-template",null,1,e.W1O)),2&m){const M=e.MAs(2);e.Q6J("ngIf",S.getFormControl())("ngIfElse",M)}},dependencies:[h.mk,h.O5,p.JJ,p.On,p.oH,y.jx,a.Lt,s.X$],encapsulation:2})}return l})()},3763:(x,C,c)=>{c.d(C,{$:()=>h});var e=c(5619),u=c(2029),f=c(8814);let h=(()=>{class p{constructor(a){this.apiService=a,this.apiURL=a.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get logObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(a,s,i,_){let g="";""!==i&&(g=""!=i.sortField?`sort=${i.sortField}&order=${1===i.sortOrder?"ASC":"DESC"}`:"");const v=""!==g&&""!==_?g+"&"+_:""!==g&&""===_?g:""===g&&""!==_?_:"";this.apiService.get(`logs/get/${a}/${s}${""!==v?"?"+v:""}`).subscribe({next:r=>{r&&r.rows?.length&&(r.rows=r.rows.filter(n=>"updatelasttagusage"!==n.action_type),r.rows=r.rows.filter(n=>"questions"!==n.table_name),r.rows=r.rows.filter(n=>"answers"!==n.table_name),r.rows=r.rows.filter(n=>{if("update"==n.action_type){let t=JSON.parse(n.original_data),l=JSON.parse(n.new_data);if(null==t.rfid&&null!==l.rfid)return!1}return!0}),r.rows.forEach(n=>{if(n.expandable=this.isRowExpandable(n),n.status||(n.response_data=n.original_data),"{}"==n.new_data?n.new_data=null:"{}"==n.original_data?n.original_data=null:"{}"==n.response_data&&(n.response_data=null),200==n.status){let l=JSON.parse(n.response_data).message;if(l){let d=JSON.parse(n.original_data);n.response_data="Success delete"==l?`${d.lastName} ${d.firstName} t\xf6r\xf6lve`:"Update success"==l?`${d.fullname} m\xf3dos\xedtva`:"Guest updated successfully"==l?`${d.lastName} ${d.firstName} m\xf3dos\xedtva`:l}}if(201==n.status){let t=JSON.parse(n.new_data),l="";if("conference"==n.table_name)l=`${t?.name} konferencia l\xe9trehozva`;else if("guest"==n.table_name)if(null==n.new_data){let o=JSON.parse(JSON.stringify(JSON.parse(n.response_data))).guest||{};n.original_data=JSON.stringify(o),l=`${o.lastName||"N\xe9v hi\xe1nyzik"} ${o.firstName||"N\xe9v hi\xe1nyzik"} vend\xe9g regisztr\xe1lva`}else l=`${t?.lastName} ${t?.firstName} vend\xe9g l\xe9trehozva`;else"users"==n.table_name&&(l=`${t?.fullname} felhaszn\xe1l\xf3 l\xe9trehozva`);n.response_data=l}if(400==n.status){let t=JSON.parse(n.response_data),l=t.error,d=t.message;d&&(n.response_data=d),l&&(n.original_data=JSON.stringify(l))}})),this.data$.next(r)},error:r=>{this.message$.next(r)}})}getBySearch(a,s){let i="";""!==s&&(i=""!=s.sortField?`?sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`logs/search/${a}${i}`).subscribe({next:_=>{this.data$.next(_)},error:_=>{this.message$.next(_)}})}getBySearchQuery(a){this.apiService.get(`logs/searchquery?${a}`).subscribe({next:s=>{this.data$.next(s)},error:s=>{this.message$.next(s)}})}create(a){a.userid=Number(localStorage.getItem("userid"))||1,a.user_fullname=localStorage.getItem("fullname")||"SYSTEM",a.user_email=localStorage.getItem("email")||"info@nfcreserve.com",this.apiService.post("logs/create/",a).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres log r\xf6gz\xedt\xe9s",detail:"Log r\xf6gz\xedtve"})},error:s=>{this.message$.next(s)}})}update(a){this.apiService.put(`logs/update/${a.id}`,a).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres log m\xf3dos\xedt\xe1s",detail:"Log m\xf3dos\xedtva"})},error:s=>{this.message$.next(s)}})}delete(a){this.apiService.delete(`logs/delete/${a.id}`).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres log t\xf6rl\xe9s",detail:"Log t\xf6r\xf6lve"})},error:s=>{this.message$.next(s)}})}bulkdelete(a){let s={ids:a.map(i=>i.id)};this.apiService.post("logs/bulkdelete",s).subscribe({next:i=>{this.message$.next({severity:"success",summary:"Sikeres log t\xf6rl\xe9s",detail:`${a.length} log t\xf6r\xf6lve`})},error:i=>{this.message$.next(i)}})}isRowExpandable(a){return!!a.action_type&&!["scanned code","assign tag","unassign","same code","tag duplicate","already received food","unknown device","import"].includes(a.action_type?.toLowerCase())}static#e=this.\u0275fac=function(s){return new(s||p)(u.LFG(f.s))};static#t=this.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},2835:(x,C,c)=>{c.d(C,{c:()=>h});var e=c(5619),u=c(2029),f=c(8814);let h=(()=>{class p{constructor(a){this.apiService=a,this.apiURL=a.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get tagObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(a,s,i,_){let g="";""!==i&&(g=""!=i.sortField?`sort=${i.sortField}&order=${1===i.sortOrder?"ASC":"DESC"}`:"");const v=""!==g&&""!==_?g+"&"+_:""!==g&&""===_?g:""===g&&""!==_?_:"";this.apiService.get(`rfid/get/${a}/${s}${""!==v?"?"+v:""}`).subscribe({next:r=>{let n=r.rows;n&&n.length>0&&n.forEach(t=>{t.identifier=t.rfid}),this.data$.next(r)},error:r=>{this.message$.next(r)}})}getBySearch(a,s){let i="";""!==s&&(i=""!=s.sortField?`?sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`rfid/search/${a}${i}`).subscribe({next:_=>{let g=_.rows;g&&g.length>0&&g.forEach(v=>{v.identifier=v.rfid}),this.data$.next(_)},error:_=>{this.message$.next(_)}})}getBySearchQuery(a){this.apiService.get(`rfid/searchquery?${a}`).subscribe({next:s=>{let i=s.rows;i&&i.length>0&&i.forEach(_=>{_.identifier=_.rfid}),this.data$.next(s)},error:s=>{this.message$.next(s)}})}create(a){this.apiService.post("rfid/create/",a).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke r\xf6gz\xedt\xe9s",detail:`${a.rfid} r\xf6gz\xedtve`})},error:s=>{this.message$.next(s)}})}update(a){this.apiService.put(`rfid/update/${a.id}`,a).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke m\xf3dos\xedt\xe1s",detail:`${a.rfid} m\xf3dos\xedtva`})},error:s=>{this.message$.next(s)}})}delete(a){this.apiService.delete(`rfid/delete/${a.id}`).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${a.rfid} t\xf6r\xf6lve`})},error:s=>{this.message$.next(s)}})}bulkdelete(a){let s={ids:a.map(i=>i.id)};this.apiService.post("rfid/bulkdelete",s).subscribe({next:i=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${a.length} c\xedmke t\xf6r\xf6lve`})},error:i=>{this.message$.next(i)}})}getByRFID(a){return this.apiService.get(`rfid/search/${a}`)}static#e=this.\u0275fac=function(s){return new(s||p)(u.LFG(f.s))};static#t=this.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},1836:(x,C,c)=>{function e(){return u=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(u.value)?null:{invalidEmail:{value:u.value}}}c.d(C,{u:()=>e})},8842:(x,C,c)=>{function e(){return u=>{const f=u.get("password"),h=u.get("password_again");return f&&h&&f.value!==h.value?{passwordsDoNotMatch:!0}:null}}c.d(C,{C:()=>e})},4227:(x,C,c)=>{c.d(C,{O:()=>f,m:()=>h});var e=c(6814),u=c(2029);let f=(()=>{class p{styleClass;style;shape="rectangle";animation="wave";borderRadius;size;width="100%";height="1rem";containerClass(){return{"p-skeleton p-component":!0,"p-skeleton-circle":"circle"===this.shape,"p-skeleton-none":"none"===this.animation}}containerStyle(){return this.size?{...this.style,width:this.size,height:this.size,borderRadius:this.borderRadius}:{...this.style,width:this.width,height:this.height,borderRadius:this.borderRadius}}static \u0275fac=function(s){return new(s||p)};static \u0275cmp=u.Xpm({type:p,selectors:[["p-skeleton"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",shape:"shape",animation:"animation",borderRadius:"borderRadius",size:"size",width:"width",height:"height"},decls:1,vars:4,consts:[[3,"ngClass","ngStyle"]],template:function(s,i){1&s&&u._UZ(0,"div",0),2&s&&(u.Tol(i.styleClass),u.Q6J("ngClass",i.containerClass())("ngStyle",i.containerStyle()))},dependencies:[e.mk,e.PC],styles:['.p-skeleton{position:relative;overflow:hidden}.p-skeleton:after{content:"";animation:p-skeleton-animation 1.2s infinite;height:100%;left:0;position:absolute;right:0;top:0;transform:translate(-100%);z-index:1}.p-skeleton.p-skeleton-circle{border-radius:50%}.p-skeleton-none:after{animation:none}@keyframes p-skeleton-animation{0%{transform:translate(-100%)}to{transform:translate(100%)}}\n'],encapsulation:2,changeDetection:0})}return p})(),h=(()=>{class p{static \u0275fac=function(s){return new(s||p)};static \u0275mod=u.oAB({type:p});static \u0275inj=u.cJS({imports:[e.ez]})}return p})()}}]);