"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[5864],{5864:(Me,x,a)=>{a.r(x),a.d(x,{ReservationModule:()=>Ae});var g=a(6814),c=a(6223),T=a(1640),Y=a(7582),P=a(8645),h=a(5619),V=a(3620),I=a(3997),Z=a(7398),H=a(4279),v=a(5219),K=a(217),b=a(6676),e=a(2029),Q=a(2096),G=a(8814),j=a(9862),f=a(9515);let y=(()=>{class o{constructor(t,n,s){this.apiService=t,this.http=n,this.translate=s,this.cache=[],this.apiURL=t.apiURL,this.data$=new h.X(null),this.message$=new h.X(null)}get reservationObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(t,n,s,r){let l="";""!==s&&(l=""!=s.sortField?`sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:"");const d=""!==l&&""!==r?l+"&"+r:""!==l&&""===r?l:""===l&&""!==r?r:"";this.apiService.get(`reservation/get/${t}/${n}${""!==d?"?"+d:""}`).subscribe({next:p=>{this.data$.next(p)},error:p=>{this.message$.next(p)}})}getBySearch(t,n){let s="";""!==n&&(s=""!=n.sortField?`?sort=${n.sortField}&order=${1===n.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`reservation/search/${t}${s}`).subscribe({next:r=>{this.data$.next(r)},error:r=>{this.message$.next(r)}})}getBySearchQuery(t){this.apiService.get(`reservation/searchquery?${t}`).subscribe({next:n=>{this.data$.next(n)},error:n=>{this.message$.next(n)}})}create(t){this.apiService.post("reservation/create/",t).subscribe({next:n=>{this.message$.next({severity:"success",summary:"Sikeres szoba r\xf6gz\xedt\xe9s",detail:`${t.id} sz\xe1m\xfa szoba r\xf6gz\xedtve`})},error:n=>{this.message$.next(n)}})}update(t){this.apiService.put(`reservation/update/${t.id}`,t).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres szoba m\xf3dos\xedt\xe1s",detail:`${t.id} sz\xe1m\xfa szoba m\xf3dos\xedtva`})},error:n=>{this.message$.next(n)}})}delete(t){this.apiService.delete(`reservation/delete/${t.id}`).subscribe({next:n=>{this.message$.next({severity:"success",summary:"Sikeres szoba t\xf6rl\xe9s",detail:`${t.id} sz\xe1m\xfa szoba t\xf6r\xf6lve`})},error:n=>{this.message$.next(n)}})}bulkdelete(t){let n={ids:t.map(s=>s.id)};this.apiService.post("reservation/bulkdelete",n).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres szoba t\xf6rl\xe9s",detail:`${t.length} szoba t\xf6r\xf6lve`})},error:s=>{this.message$.next(s)}})}getReservationsForSelector(){return this.cache.length>0?(0,Q.of)(this.cache):(this.get(0,999,{sortField:"reservationNum",sortOrder:1},""),this.data$.asObservable().pipe((0,Z.U)(t=>{const n=t?t.rows:[];return this.cache=n,n})))}getReservationTypeByCode(t,n){return[{code:"KB",beds:4,label:this.translate.instant("ROOMTYPES.CASTLE"),description:this.translate.instant("ROOMTYPES.4-BED-ROOM"),value:"Kast\xe9ly sz\xe1ll\xe1s 4 \xe1gyas szoba",color:"teal"},{code:"KB",beds:6,label:this.translate.instant("ROOMTYPES.CASTLE"),description:this.translate.instant("ROOMTYPES.6-BED-ROOM"),value:"Kast\xe9ly sz\xe1ll\xe1s 6 \xe1gyas szoba",color:"teal"},{code:"KB",beds:8,label:this.translate.instant("ROOMTYPES.CASTLE"),description:this.translate.instant("ROOMTYPES.8-BED-ROOM"),value:"Kast\xe9ly sz\xe1ll\xe1s 8 \xe1gyas szoba",color:"teal"},{code:"MD",beds:2,label:this.translate.instant("ROOMTYPES.MARANATHA-PENSION-HOUSE"),description:this.translate.instant("ROOMTYPES.2-BED-ROOM"),value:"Maranatha Panzi\xf3h\xe1z 2 \xe1gyas szoba (k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{code:"MQ",beds:2,label:this.translate.instant("ROOMTYPES.MARANATHA-PENSION-HOUSE"),description:this.translate.instant("ROOMTYPES.DOUBLE-BED-ROOM"),value:"Maranatha Panzi\xf3h\xe1z francia\xe1gyas szoba (k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{code:"MB",beds:4,label:this.translate.instant("ROOMTYPES.MARANATHA-PENSION-HOUSE"),description:this.translate.instant("ROOMTYPES.M-4-BED-ROOM"),value:"Maranatha Panzi\xf3h\xe1z 4 \xe1gyas szoba (emeletes \xe1gyas, k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{code:"A",label:this.translate.instant("ROOMTYPES.FAMILY-ROOM"),description:this.translate.instant("ROOMTYPES.WITH-KITCHEN"),value:"Csal\xe1di szoba (k\xf6z\xf6s konyh\xe1val, f\xfcrd\u0151vel \xe9s nappalival)",color:"orange"}].find(l=>l.code===t&&(void 0===l.beds||l.beds===n))}static#e=this.\u0275fac=function(n){return new(n||o)(e.LFG(G.s),e.LFG(j.eN),e.LFG(f.sK))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var q=a(1206),X=a(219),W=a(8022),u=a(9552),F=a(707),R=a(4480),O=a(4104),S=a(3714),A=a(3965),M=a(7213),E=a(7680),z=a(4204),N=a(9246),ee=a(9474),te=a(3069),ne=a(2991),k=a(3259),w=a(6651),$=a(8039),B=a(8676),J=a(3212),D=a(2169);const se=function(){return{minWidth:"35rem"}};function ie(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"h5",22),e._uU(2,"Foglal\xe1sok"),e.qZA(),e.TgZ(3,"span",23)(4,"app-conference-selector",24),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedConferences=s)})("ngModelChange",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.doQuery())}),e.qZA()(),e.TgZ(5,"span",25)(6,"div",26)(7,"div",27)(8,"div",28),e.O4$(),e.TgZ(9,"svg",29),e._UZ(10,"g",30)(11,"g",31),e.TgZ(12,"g",32)(13,"g",33)(14,"g",34),e._UZ(15,"path",35),e.qZA()()()(),e.kcU(),e.TgZ(16,"span",36),e._uU(17),e.qZA()()()()(),e.TgZ(18,"span",23)(19,"button",37),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.create())}),e.qZA(),e.TgZ(20,"button",38),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.bulkDeleteDialog=!0)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Akn(e.DdM(8,se)),e.Q6J("ngModel",t.selectedConferences)("showClear",!0),e.xp6(2),e.MGl("pTooltip","\xc1gyak sz\xe1ma: ",t.numberOfBeds,""),e.xp6(11),e.hij(" ",t.numberOfBeds," "),e.xp6(2),e.Q6J("disabled",!t.canCreate),e.xp6(1),e.Q6J("disabled",!t.selected||!t.selected.length||!t.canDelete)}}function oe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th",39),e._uU(3,"Szoba "),e._UZ(4,"p-sortIcon",40),e.qZA(),e.TgZ(5,"th",41),e._uU(6,"Vend\xe9gek "),e._UZ(7,"p-sortIcon",42),e.qZA(),e.TgZ(8,"th",43),e._uU(9,"\xc9rkez\xe9s "),e._UZ(10,"p-sortIcon",44),e.qZA(),e.TgZ(11,"th",45),e._uU(12,"T\xe1voz\xe1s "),e._UZ(13,"p-sortIcon",46),e.qZA(),e.TgZ(14,"th",47),e._uU(15,"St\xe1tusz "),e._UZ(16,"p-sortIcon",48),e.qZA(),e.TgZ(17,"th",49),e._uU(18,"Megjegyz\xe9s "),e._UZ(19,"p-sortIcon",50),e.qZA(),e._UZ(20,"th"),e.qZA(),e.TgZ(21,"tr")(22,"th",51),e._UZ(23,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(24,"th")(25,"input",52),e.NdJ("input",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"reservationNum"))}),e.qZA(),e.TgZ(26,"app-building-selector",53),e.NdJ("change",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"building"))}),e.qZA(),e.TgZ(27,"app-bedtype-selector",54),e.NdJ("change",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"bedType"))}),e.qZA()(),e.TgZ(28,"th")(29,"input",55),e.NdJ("input",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"guests"))}),e.qZA()(),e.TgZ(30,"th")(31,"p-calendar",56),e.NdJ("onSelect",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"dateOfArrival"))})("onClearClick",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"dateOfArrival"))}),e.qZA()(),e.TgZ(32,"th")(33,"p-calendar",56),e.NdJ("onSelect",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"dateOfDeparture"))})("onClearClick",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"dateOfDeparture"))}),e.qZA()(),e.TgZ(34,"th")(35,"p-dropdown",57),e.NdJ("onChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"status"))}),e.qZA()(),e.TgZ(36,"th")(37,"input",58),e.NdJ("input",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(s,"comment"))}),e.qZA()(),e._UZ(38,"th"),e.qZA()}if(2&o){const t=e.oxw();e.xp6(26),e.Q6J("showClear",!0),e.xp6(1),e.Q6J("showClear",!0),e.xp6(4),e.Q6J("showButtonBar",!0),e.xp6(2),e.Q6J("showButtonBar",!0),e.xp6(2),e.Q6J("options",t.statusOptions)("showClear",!0)}}function re(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Gre("sparebed-badge ",t.spareBeds,""),e.xp6(1),e.hij(" ",e.lcZ(2,4,"SPAREBEDS."+(null==t.spareBeds?null:t.spareBeds.toUpperCase()))," ")}}function ae(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"p-chip",68),e.NdJ("onRemove",function(){const r=e.CHM(t).$implicit,l=e.oxw(2).$implicit,d=e.oxw();return e.KtG(d.onConferenceRemove(r,l))}),e.qZA()()}if(2&o){const t=i.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("label",t.name)("removable",!n.isOrganizer)}}function le(o,i){if(1&o&&(e.TgZ(0,"td")(1,"span",60),e._uU(2,"Konferenci\xe1k"),e.qZA(),e.YNc(3,ae,2,2,"div",67),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngForOf",t.conferences)}}function ce(o,i){1&o&&e._UZ(0,"p-avatar",70),2&o&&e.s9C("pTooltip",i.$implicit.guestName)}function pe(o,i){if(1&o&&(e.TgZ(0,"td")(1,"span",60),e._uU(2,"Vend\xe9gek"),e.qZA(),e.TgZ(3,"p-avatarGroup"),e.YNc(4,ce,1,1,"p-avatar",69),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(4),e.Q6J("ngForOf",t.guests)}}const ue=function(){return{height:".5rem"}};function de(o,i){if(1&o&&(e.TgZ(0,"td")(1,"span",60),e._uU(2,"Tel\xedtetts\xe9g"),e.qZA(),e._UZ(3,"p-progressBar",71),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.Akn(e.DdM(6,ue)),e.hYB("pTooltip","\xc1gy/vend\xe9g: ",t.beds,"/",null==t.guests?null:t.guests.length,""),e.Q6J("value",(null==t.guests?null:t.guests.length)/t.beds*100)("showValue",!1)}}function me(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",59),e.qZA(),e.TgZ(3,"td")(4,"span",60),e._uU(5,"Szoba sz\xe1m"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"span",60),e._uU(9,"P\xf3t\xe1gy"),e.qZA(),e.YNc(10,re,3,6,"span",61),e.qZA(),e.TgZ(11,"td",62)(12,"span",60),e._uU(13,"Komment"),e.qZA(),e._uU(14),e.qZA(),e.YNc(15,le,4,1,"td",63),e.YNc(16,pe,5,1,"td",63),e.YNc(17,de,4,7,"td",63),e.TgZ(18,"td")(19,"div",64)(20,"button",65),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.edit(r))}),e.qZA(),e.TgZ(21,"button",66),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return l.tableItem=r,e.KtG(l.deleteDialog=!0)}),e.qZA()()()()}if(2&o){const t=i.$implicit,n=e.oxw();e.xp6(2),e.Q6J("value",t),e.xp6(4),e.hij(" ",t.room.roomNum," "),e.xp6(4),e.Q6J("ngIf",t.spareBeds),e.xp6(4),e.hij(" ",t.comment," "),e.xp6(1),e.Q6J("ngIf",!n.selectedConferences.length),e.xp6(1),e.Q6J("ngIf",n.selectedConferences.length),e.xp6(1),e.Q6J("ngIf",n.selectedConferences.length),e.xp6(3),e.Q6J("disabled",!n.canEdit),e.xp6(1),e.Q6J("disabled",!n.canDelete)}}function ge(o,i){1&o&&(e.TgZ(0,"tr")(1,"td",72),e._uU(2,"Nincs tal\xe1lat..."),e.qZA()()),2&o&&(e.xp6(1),e.uIk("colspan",6))}function he(o,i){if(1&o&&(e.TgZ(0,"span",73),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null!=t.id&&t.id.value?"Foglal\xe1s adatai":"\xdaj foglal\xe1s"," ")}}function ve(o,i){1&o&&(e.TgZ(0,"div",74),e._uU(1," K\xf6telez\u0151 kit\xf6lteni "),e.qZA())}function be(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",75)(1,"button",76),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.cancel())}),e.qZA(),e.TgZ(2,"button",77),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.reservationForm.dirty),e.xp6(1),e.Q6J("disabled",!t.reservationForm.valid||!t.reservationForm.dirty)}}function fe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",78),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteDialog=!1)}),e.qZA(),e.TgZ(1,"button",79),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.delete())}),e.qZA()}}function _e(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",78),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.bulkDeleteDialog=!1)}),e.qZA(),e.TgZ(1,"button",79),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteSelected())}),e.qZA()}}const Ce=function(){return["roomNum"]},xe=function(){return{"min-height":"calc(100vh - 320px)"}},U=function(){return{width:"450px"}};b.locale("hu");let _=class C{constructor(i,t,n,s,r,l){this.reservationService=i,this.userService=t,this.conferenceService=n,this.messageService=s,this.responsiveService=r,this.fb=l,this.loading=!0,this.tableItem={},this.tableData=[],this.rowsPerPageOptions=[20,50,100,200],this.rowsPerPage=20,this.totalRecords=0,this.page=0,this.sortField="reservationNum",this.sortOrder=1,this.globalFilter="",this.filterValues={},this.debounce={},this.sidebar=!1,this.deleteDialog=!1,this.bulkDeleteDialog=!1,this.selected=[],this.canCreate=!1,this.canEdit=!1,this.canDelete=!1,this.isMobile=!1,this.isOrganizer=!1,this.selectedConferences=[],this.numberOfBeds=0,this.statusOptions=[],this.initialFormValues={id:null,reservationNum:"",reservationCode:"",beds:"",spareBeds:"",bathreservation:"",building:"",floor:"",bedType:"",climate:0,familyReservation:0,comment:"",extraBeds:0},this.formChanges$=new P.x,this.reservationForm=this.fb.group({id:[this.initialFormValues.id],reservationNum:[this.initialFormValues.reservationNum,c.kI.required],reservationCode:[this.initialFormValues.reservationCode,c.kI.required],beds:[this.initialFormValues.beds,c.kI.required],spareBeds:[this.initialFormValues.spareBeds],bathreservation:[this.initialFormValues.bathreservation],building:[this.initialFormValues.building,c.kI.required],floor:[this.initialFormValues.floor],bedType:[this.initialFormValues.bedType],climate:[this.initialFormValues.climate],familyReservation:[this.initialFormValues.familyReservation],comment:[this.initialFormValues.comment],extraBeds:[this.initialFormValues.extraBeds]}),this.statusOptions=[{name:"Akt\xedv",value:"active"},{name:"Lemondott",value:"cancelled"},{name:"Teljes\xedtett",value:"completed"}],this.isFormValid$=new h.X(!1)}ngOnInit(){this.userService.hasRole(["Super Admin","Nagy Admin"]).subscribe(i=>this.canCreate=i),this.userService.hasRole(["Super Admin","Nagy Admin"]).subscribe(i=>this.canEdit=i),this.userService.hasRole(["Super Admin","Nagy Admin"]).subscribe(i=>this.canDelete=i),this.userService.hasRole(["Szervezo"]).subscribe(i=>this.isOrganizer=i),this.reservationObs$=this.reservationService.reservationObs,this.reservationObs$.subscribe(i=>{this.loading=!1,i&&(this.tableData=i.rows||[],this.totalRecords=i.totalItems||0,this.page=i.currentPage||0,this.numberOfBeds=i.numberOfBeds||0)}),this.responsiveService.isMobile$.subscribe(i=>{this.isMobile=i}),this.isFormValid$=this.formChanges$.pipe((0,V.b)(300),(0,I.x)(),(0,Z.U)(()=>this.reservationForm.valid)),this.serviceMessageObs$=this.reservationService.messageObs,this.conferenceMessageObs$=this.conferenceService.messageObs,this.serviceMessageObs$.subscribe(i=>this.handleMessage(i)),this.conferenceMessageObs$.subscribe(i=>this.handleMessage(i))}get id(){return this.reservationForm.get("id")}get reservationNum(){return this.reservationForm.get("reservationNum")}get reservationCode(){return this.reservationForm.get("reservationCode")}get beds(){return this.reservationForm.get("beds")}get spareBeds(){return this.reservationForm.get("spareBeds")}get bathreservation(){return this.reservationForm.get("bathreservation")}get building(){return this.reservationForm.get("building")}get floor(){return this.reservationForm.get("floor")}get bedType(){return this.reservationForm.get("bedType")}get climate(){return this.reservationForm.get("climate")}get familyReservation(){return this.reservationForm.get("familyReservation")}get comment(){return this.reservationForm.get("comment")}get extraBeds(){return this.reservationForm.get("extraBeds")}doQuery(){if(this.isOrganizer&&!this.selectedConferences.length)return;this.loading=!0,this.filterValues.conferences=this.selectedConferences.map(n=>n.id).join(",");const t=Object.keys(this.filterValues).map(n=>this.filterValues[n].length>0?`${n}=${this.filterValues[n]}`:"").filter(n=>n.length>0).join("&");return""!==this.globalFilter?this.reservationService.getBySearch(this.globalFilter,{sortField:this.sortField,sortOrder:this.sortOrder}):this.reservationService.get(this.page,this.rowsPerPage,{sortField:this.sortField,sortOrder:this.sortOrder},t)}onFilter(i,t){if(this.isOrganizer&&!this.selectedConferences)return;let s="";i instanceof Date?s=b(i).format("YYYY.MM.DD"):i&&(i.value||i.target?.value)?(s=i.value||i.target?.value,s=s.toString()):this.filterValues[t]="",this.filterValues[t]=s,["conferenceName","building","bedType","spareBeds"].includes(t)?this.filterValues[t]===s&&this.doQuery():(this.debounce[t]&&clearTimeout(this.debounce[t]),this.debounce[t]=setTimeout(()=>{this.filterValues[t]===s&&this.doQuery()},500))}onLazyLoad(i){this.page=i.first/i.rows,this.rowsPerPage=i.rows??this.rowsPerPage,this.sortField=i.sortField??"",this.sortOrder=i.sortOrder??1,this.globalFilter=i.globalFilter??"",this.doQuery()}onGlobalFilter(i,t){i.filterGlobal(t.target.value,"contains")}create(){this.reservationForm.reset(this.initialFormValues),this.sidebar=!0}edit(i){this.reservationForm.reset(this.initialFormValues),this.reservationForm.patchValue(i),this.originalFormValues=this.reservationForm.value,this.sidebar=!0}delete(){this.loading=!0,this.deleteDialog=!1,this.reservationService.delete(this.tableItem)}deleteSelected(){this.loading=!0,this.bulkDeleteDialog=!1,this.reservationService.bulkdelete(this.selected)}save(){if(this.reservationForm.valid){this.loading=!0;const i=this.reservationForm.value;i.id?this.reservationService.update(i):this.reservationService.create(i),this.sidebar=!1}}cancel(){this.reservationForm.reset(this.originalFormValues)}handleMessage(i){i&&(this.loading=!1,"ERROR"==i?this.messageService.add({severity:"error",summary:"Error",detail:"Hiba t\xf6rt\xe9nt!"}):(this.messageService.add(i),this.tableItem={},this.selected=[],this.doQuery()))}onConferenceRemove(i,t){}exportExcel(){a.e(1486).then(a.bind(a,1486)).then(i=>{const t=[{key:"reservationNum",label:"Szoba-sz\xe1m"},{key:"reservationCode",label:"Szoba k\xf3d"},{key:"beds",label:"\xc1gyak sz\xe1ma"},{key:"spareBeds",label:"Matrac / gyerek\xe1gy"},{key:"building",label:"\xc9p\xfclet / folyos\xf3"},{key:"bedType",label:"\xc1gy t\xedpus"},{key:"bathreservation",label:"F\xfcrd\u0151szoba"},{key:"comment",label:"Megjegyz\xe9s"}],s=(this.selected.length>0?this.selected:this.tableData).map(m=>{let p={};return t.forEach(L=>{p[L.label]=m[L.key]??""}),p}),l={Sheets:{data:i.utils.json_to_sheet(s,{header:t.map(m=>m.label)})},SheetNames:["data"]},d=i.write(l,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(d,"reservations")})}saveAsExcelFile(i,t){const r=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});K.saveAs(r,t+"_export_"+b().format("YYYYMMDD")+".xlsx")}ngOnDestroy(){}static#e=this.\u0275fac=function(t){return new(t||C)(e.Y36(y),e.Y36(q.K),e.Y36(X.Z),e.Y36(v.ez),e.Y36(W.k),e.Y36(c.qu))};static#t=this.\u0275cmp=e.Xpm({type:C,selectors:[["reservation-component"]],features:[e._Bn([v.ez])],decls:32,vars:31,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-0","py-0"],["dataKey","id","responsiveLayout","scroll","currentPageReportTemplate","{first} - {last} bejegyz\xe9s a(z) {totalRecords}-b\xf3l megjelen\xedt\xe9se","selectionMode","multiple",3,"value","rows","totalRecords","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","tableStyle","rowHover","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["id","sidebar","position","right","styleClass","p-sidebar-md",3,"visible","transitionOptions","fullScreen","blockScroll","visibleChange"],["novalidate","",1,"grid","formgrid","p-fluid",3,"formGroup","ngSubmit"],["formControlName","id","type","hidden"],[1,"field","mb-4","col-6"],["for","comment",1,"font-medium","text-900"],["id","comment","type","text","pInputText","","formControlName","comment"],["class","block p-error",4,"ngIf"],["pTemplate","footer"],["header","T\xf6rl\xe9s",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[3,"autoZIndex","blocked"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0"],["placeholder","V\xe1lasszon konferenci\xe1t...",3,"ngModel","showClear","ngModelChange"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],["tooltipPosition","top",1,"border-round-xl","w-min","p-0",2,"background-color","#E2E8F0",3,"pTooltip"],[1,"flex","align-items-center","justify-content-center","py-1","px-1"],[1,"flex","align-items-center","justify-content-center","gap-2","px-2"],["width","24px","height","24px","viewBox","0 0 24 24","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","fill","#000000"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","ic_fluent_bed_24_filled","fill","#334155","fill-rule","nonzero"],["d","M19.25,11 C20.7125318,11 21.9084043,12.1417046 21.9949812,13.5824777 L22,13.75 L22,20.25 C22,20.6642136 21.6642136,21 21.25,21 C20.8703042,21 20.556509,20.7178461 20.5068466,20.3517706 L20.5,20.25 L20.5,18 L3.5,18 L3.5,20.25 C3.5,20.6296958 3.21784612,20.943491 2.85177056,20.9931534 L2.75,21 C2.37030423,21 2.05650904,20.7178461 2.00684662,20.3517706 L2,20.25 L2,13.75 C2,12.2874682 3.1417046,11.0915957 4.58247767,11.0050188 L4.75,11 L19.25,11 Z M6.75,4 L17.25,4 C18.7125318,4 19.9084043,5.1417046 19.9949812,6.58247767 L20,6.75 L20,10 L17,10 L16.9932723,9.88337887 C16.9399506,9.42429701 16.575703,9.06004937 16.1166211,9.00672773 L16,9 L14,9 C13.4871642,9 13.0644928,9.38604019 13.0067277,9.88337887 L13,10 L11,10 L10.9932723,9.88337887 C10.9399506,9.42429701 10.575703,9.06004937 10.1166211,9.00672773 L10,9 L8,9 C7.48716416,9 7.06449284,9.38604019 7.00672773,9.88337887 L7,10 L4,10 L4,6.75 C4,5.28746816 5.1417046,4.09159572 6.58247767,4.00501879 L6.75,4 Z"],[1,"text-2xl","font-normal","white-space-nowrap","vertical-align-middle"],["pButton","","pRipple","","label","\xdaj","icon","pi pi-plus",1,"p-button-success","mr-2",3,"disabled","click"],["pButton","","pRipple","","label","T\xf6rl\xe9s","icon","pi pi-trash",1,"p-button-danger","mr-2",3,"disabled","click"],["pSortableColumn","roomNum"],["field","roomNum"],["pSortableColumn","guests"],["field","guests"],["pSortableColumn","dateOfArrival"],["field","dateOfArrival"],["pSortableColumn","dateOfDeparture"],["field","dateOfDeparture"],["pSortableColumn","status"],["field","status"],["pSortableColumn","comment"],["field","comment"],["styleClass","w-3rem"],["pInputText","","type","text","placeholder","Szobasz\xe1m...",1,"mr-2",2,"width","8rem",3,"input"],["placeholder","\xc9p\xfclet...",1,"mr-2",3,"showClear","change"],["placeholder","\xc1gytipus...",3,"showClear","change"],["pInputText","","type","text","placeholder","Vend\xe9g...",2,"width","7rem",3,"input"],["appendTo","body","dataType","string","placeholder","Keres\xe9s...",3,"showButtonBar","onSelect","onClearClick"],["optionLabel","name","optionValue","value","placeholder","V\xe1lasszon...",3,"options","showClear","onChange"],["pInputText","","type","text","placeholder","Keres\xe9s...",2,"width","7rem",3,"input"],[3,"value"],[1,"p-column-title"],[3,"class",4,"ngIf"],[2,"max-width","300px"],[4,"ngIf"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"disabled","click"],[4,"ngFor","ngForOf"],["styleClass","m-1","icon","pi pi-calendar",3,"label","removable","onRemove"],["icon","pi pi-user","size","large","shape","circle","tooltipPosition","top",3,"pTooltip",4,"ngFor","ngForOf"],["icon","pi pi-user","size","large","shape","circle","tooltipPosition","top",3,"pTooltip"],["tooltipPosition","top",3,"value","showValue","pTooltip"],[1,"text-center"],[1,"font-semibold","text-xl"],[1,"block","p-error"],[1,"flex","justify-content-end","ap-2"],["pButton","","pRipple","","label","M\xe9gsem","icon","pi pi-times",1,"p-button-outlined",3,"disabled","click"],["pButton","","pRipple","","label","Ment\xe9s","icon","pi pi-check",1,"p-button","ml-2",3,"disabled","click"],["pButton","","pRipple","","label","Nem","icon","pi pi-times",1,"p-button-outlined",3,"click"],["pButton","","pRipple","","label","Igen","icon","pi pi-check",1,"p-button","ml-2",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3,4),e.NdJ("selectionChange",function(r){return n.selected=r})("onLazyLoad",function(r){return n.onLazyLoad(r)}),e.YNc(5,ie,21,9,"ng-template",5),e.YNc(6,oe,39,6,"ng-template",6),e.YNc(7,me,22,9,"ng-template",7),e.YNc(8,ge,3,1,"ng-template",8),e.qZA()(),e.TgZ(9,"p-sidebar",9),e.NdJ("visibleChange",function(r){return n.sidebar=r}),e.YNc(10,he,2,1,"ng-template",6),e.TgZ(11,"form",10),e.NdJ("ngSubmit",function(){return n.save()}),e._UZ(12,"input",11),e.TgZ(13,"div",12)(14,"label",13),e._uU(15,"Megjegyz\xe9s"),e.qZA(),e._UZ(16,"input",14),e.YNc(17,ve,2,0,"div",15),e.qZA()(),e.YNc(18,be,3,2,"ng-template",16),e.qZA(),e.TgZ(19,"p-dialog",17),e.NdJ("visibleChange",function(r){return n.deleteDialog=r}),e.TgZ(20,"div",18),e._UZ(21,"i",19),e.qZA(),e.YNc(22,fe,2,0,"ng-template",16),e.qZA(),e.TgZ(23,"p-dialog",17),e.NdJ("visibleChange",function(r){return n.bulkDeleteDialog=r}),e.TgZ(24,"div",18),e._UZ(25,"i",19),e.TgZ(26,"span"),e._uU(27,"Biztosan t\xf6r\xf6lni akarja a kiv\xe1lasztott foglal\xe1sokat?"),e.qZA()(),e.YNc(28,_e,2,0,"ng-template",16),e.qZA()()(),e.TgZ(29,"p-blockUI",20),e._UZ(30,"p-progressSpinner"),e.qZA(),e._UZ(31,"p-toast")),2&t&&(e.xp6(3),e.Q6J("value",n.tableData)("rows",n.rowsPerPage)("totalRecords",n.totalRecords)("globalFilterFields",e.DdM(27,Ce))("paginator",!0)("rowsPerPageOptions",n.rowsPerPageOptions)("showCurrentPageReport",!0)("selection",n.selected)("tableStyle",e.DdM(28,xe))("rowHover",!0)("lazy",!0),e.xp6(6),e.Q6J("visible",n.sidebar)("transitionOptions",".3s cubic-bezier(0, 0, 0.2, 1)")("fullScreen",n.isMobile)("blockScroll",!0),e.xp6(2),e.Q6J("formGroup",n.reservationForm),e.xp6(6),e.Q6J("ngIf",(null==n.comment?null:n.comment.dirty)&&(null==n.comment||null==n.comment.errors?null:n.comment.errors.required)),e.xp6(2),e.Akn(e.DdM(29,U)),e.Q6J("visible",n.deleteDialog)("modal",!0),e.xp6(4),e.Akn(e.DdM(30,U)),e.Q6J("visible",n.bulkDeleteDialog)("modal",!0),e.xp6(6),e.Q6J("autoZIndex",!0)("blocked",n.loading))},dependencies:[g.sg,g.O5,u.iA,v.jx,u.lQ,u.fz,u.UA,u.Mo,c._Y,c.Fj,c.JJ,c.JL,c.On,c.sg,c.u,F.Hq,R.H,O.FN,S.o,A.Lt,M.V,E.G,z.b,N.Y,ee.w,te.n,ne.p,k.u,w.k,$.q,B.H,J.f,D.A,f.X$],encapsulation:2})};_=(0,Y.gn)([(0,H.k)()],_);let Te=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[T.Bz.forChild([{path:"",component:_}]),T.Bz]})}return o})();var Ze=a(6263),ye=a(9502),Fe=a(5609),Re=a(7902),Oe=a(1865),Se=a(2285);let Ae=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({providers:[y],imports:[g.ez,Te,u.U$,c.u5,c.UX,F.hJ,R.T,O.EV,S.j,A.kW,M.S,Ze.W,ye.$,E.L,z.u,N.l,Se.L,Fe.Iu,k.z,w.q,$.F,B.Q,Re.JH,Oe.cc,f.aw,J._8,D.o]})}return o})()}}]);