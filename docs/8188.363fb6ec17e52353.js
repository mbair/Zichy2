"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8188],{746:(x,C,l)=>{l.d(C,{Q:()=>o});var p=l(5619),d=l(9397),a=l(6306),f=l(7398),_=l(2096),m=l(2029),T=l(8814);let o=(()=>{class c{constructor(e){this.apiService=e,this.apiURL=e.apiURL,this.data$=new p.X(null),this.createdGuest$=new p.X(null),this.message$=new p.X(null)}get guestObs(){return this.data$.asObservable()}get createdGuestObs(){return this.createdGuest$.asObservable()}get messageObs(){return this.message$.asObservable()}get(e,t,s,n){let r="";""!==s&&(r=""!=s.sortField?`sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:"");const v=""!==r&&""!==n?r+"&"+n:""!==r&&""===n?r:""===r&&""!==n?n:"";this.apiService.get(`guest/get/${e}/${t}${""!==v?"?"+v:""}`).subscribe({next:h=>{this.data$.next(h)},error:h=>{this.message$.next(h)}})}getBySearch(e,t,s){let n={};t&&t.sortField&&(n.sort=t.sortField,n.order=1===t.sortOrder?"ASC":"DESC"),s&&s.length>0&&(n.conferenceIds=s.join(",")),this.apiService.get(`guest/search/${encodeURIComponent(e)}`,{params:n}).subscribe({next:r=>{this.data$.next(r)},error:r=>{this.message$.next(r)}})}getBySearchQuery(e){this.apiService.get(`guest/searchquery?${e}`).subscribe({next:t=>{this.data$.next(t)},error:t=>{this.message$.next(t)}})}getBySearchQuery$(e){return this.apiService.get(`guest/searchquery?${e}`)}getByConferenceName(e){return this.apiService.get(`guest/searchquery?conferenceName=${e}`)}getByRFID(e){return this.apiService.get(`guest/getbyrfid/${e}`)}updateLastTagUsage(e){this.apiService.get(`guest/updatelasttagusage/${e}`).subscribe({next:t=>{},error:t=>{this.message$.next(t)}})}create(e,t){const s=new FormData;if(s.append("guest",JSON.stringify(e)),t&&t.length>0)for(const n of t){if(!n)return;s.append("idcard",n,n.name)}this.apiService.post("guest/create/",s).subscribe({next:n=>{this.createdGuest$.next(n.guest);const r=this.registrationToast(n.guest),v=this.emailStatusToast(n.email);this.message$.next(r),this.message$.next(v)},error:n=>{this.message$.next({severity:"error",summary:"Vend\xe9g r\xf6gz\xedt\xe9s sikertelen",detail:n?.errorMessage||n?.message||"Ismeretlen hiba t\xf6rt\xe9nt."})}})}update(e,t=[]){const s={...e};if(delete s.idcard,t&&t.length>0){const n=new FormData;n.append("guest",JSON.stringify(s));for(const r of t)r&&n.append("idcard",r,r.name);this.apiService.put(`guest/update/${e.id}`,n).subscribe({next:()=>{this.message$.next("success")},error:r=>{this.message$.next(r)}})}else s.idCardUploaded=0,this.apiService.put(`guest/update/${e.id}`,s).subscribe({next:()=>{this.message$.next("success")},error:n=>{this.message$.next(n)}})}updateGuest2(e){return this.apiService.put(`guest/update/${e.id}`,e).pipe((0,d.b)(()=>console.log(`updated guest id=${e.id}`)),(0,a.K)(this.handleError("updateGuest2")))}delete(e){this.apiService.delete(`guest/delete/${e.id}`).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres vend\xe9g t\xf6rl\xe9s",detail:`${e.lastName} ${e.firstName} t\xf6r\xf6lve`})},error:t=>{this.message$.next(t)}})}bulkdelete(e){let t={ids:e.map(s=>s.id)};this.apiService.post("guest/bulkdelete",t).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres vend\xe9g t\xf6rl\xe9s",detail:`${e.length} vend\xe9g t\xf6r\xf6lve`})},error:s=>{this.message$.next(s)}})}searchGuestsForSelector$(e={}){const t=this.buildGuestQS(e);return this.apiService.get(`guest/searchquery?${t}`).pipe((0,f.U)(s=>s?s.rows??[]:[]))}buildGuestQS(e={}){const t=[];return null!=e.conferenceId&&t.push(`conferenceid=${encodeURIComponent(String(e.conferenceId))}`),"number"==typeof e.minBeds&&t.push(`minBeds=${e.minBeds}`),"boolean"==typeof e.climate&&t.push("climate="+(e.climate?1:0)),e.onlyNotReserved&&t.push("onlyNotReserved=true"),e.includeGuestIds?.length&&t.push(`includeGuestIds=${e.includeGuestIds.join(",")}`),e.enabled&&t.push("enabled=1"),t.join("&")}handleError(e="operation",t){return s=>(console.error(s),console.error(`${e} failed: ${s.message}`),(0,_.of)(t))}emailStatusToast(e){if(!e)return{severity:"warn",summary:"E-mail",detail:"E-mail st\xe1tusz ismeretlen."};switch(e.status){case"sent":return{severity:"success",summary:"E-mail",detail:"Visszaigazol\xf3 e-mail elk\xfcldve."};case"timeout":return{severity:"warn",summary:"E-mail",detail:"Az e-mail k\xfcld\xe9s id\u0151korl\xe1tot \xe9rt el."};case"failed":return{severity:"error",summary:"E-mail hiba",detail:e.message||"Az e-mail k\xfcld\xe9s nem siker\xfclt."};default:return{severity:"info",summary:"E-mail",detail:"E-mail st\xe1tusz: ismeretlen."}}}registrationToast(e){return{severity:"success",summary:"Vend\xe9g r\xf6gz\xedtve",detail:(e?.lastName&&e?.firstName?`${e.lastName} ${e.firstName}`:"Vend\xe9g")+" sikeresen r\xf6gz\xedtve."}}static#e=this.\u0275fac=function(t){return new(t||c)(m.LFG(T.s))};static#t=this.\u0275prov=m.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},4532:(x,C,l)=>{l.d(C,{d:()=>v});var p=l(6814),d=l(2029),a=l(5219);let v=(()=>{class i{static \u0275fac=function(y){return new(y||i)};static \u0275mod=d.oAB({type:i});static \u0275inj=d.cJS({imports:[p.ez,a.m8]})}return i})()},1913:(x,C,l)=>{l.d(C,{h:()=>f,l:()=>_});var p=l(6814),d=l(2029),a=l(2076);let f=(()=>{class m{el;renderer;zone;constructor(o,c,g){this.el=o,this.renderer=c,this.zone=g}selector;enterClass;enterActiveClass;enterToClass;leaveClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;eventListener;documentClickListener;documentKeydownListener;target;enterListener;leaveListener;animating;clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){a.p.hasClass(this.target,this.toggleClass)?a.p.removeClass(this.target,this.toggleClass):a.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",a.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",a.p.addClass(this.target,"hidden"),this.target.style.height=""),a.p.addClass(this.target,this.enterActiveClass),this.enterClass&&a.p.removeClass(this.target,this.enterClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{a.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&a.p.addClass(this.target,this.enterToClass),this.enterListener&&this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterClass&&a.p.removeClass(this.target,this.enterClass),this.enterToClass&&a.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,a.p.addClass(this.target,this.leaveActiveClass),this.leaveClass&&a.p.removeClass(this.target,this.leaveClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{a.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&a.p.addClass(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):(this.leaveClass&&a.p.removeClass(this.target,this.leaveClass),this.leaveToClass&&a.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",o=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(o)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",o=>{const{key:c,keyCode:g,which:e}=o;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===c&&27===g&&27===e&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(o){return!this.el.nativeElement.isSameNode(o.target)&&!this.el.nativeElement.contains(o.target)&&!this.target.contains(o.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}static \u0275fac=function(c){return new(c||m)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.R0b))};static \u0275dir=d.lG2({type:m,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(c,g){1&c&&d.NdJ("click",function(t){return g.clickListener(t)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}})}return m})(),_=(()=>{class m{static \u0275fac=function(c){return new(c||m)};static \u0275mod=d.oAB({type:m});static \u0275inj=d.cJS({imports:[p.ez]})}return m})()}}]);