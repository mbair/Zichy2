"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8592],{8913:(T,E,l)=>{l.d(E,{q:()=>x});var e=l(2029),d=l(6223),b=l(9515),u=l(6814),v=l(5219),h=l(3965);function n(r,g){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const t=g.$implicit;e.Q6J("ngClass","sparebed-badge "+(null==t?null:t.value)),e.xp6(1),e.hij(" ",t.label," ")}}function o(r,g){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const t=g.$implicit;e.Q6J("ngClass","sparebed-badge "+(null==t?null:t.value)),e.xp6(1),e.hij(" ",null==t?null:t.label," ")}}function c(r,g){if(1&r){const t=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(a){e.CHM(t);const _=e.oxw();return e.KtG(_.handleOnChange(a))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,n,2,2,"ng-template",3),e.YNc(4,o,2,2,"ng-template",4),e.qZA()}if(2&r){const t=g.ngIf,C=e.oxw();e.s9C("placeholder",e.lcZ(1,5,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,7,"Nincs tal\xe1lat...")),e.Q6J("formControl",t)("options",C.sparebeds)("showClear",C.showClear)}}function p(r,g){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const t=g.$implicit;e.Q6J("ngClass","sparebed-badge "+(null==t?null:t.value)),e.xp6(1),e.hij(" ",t.label," ")}}function m(r,g){if(1&r&&(e.TgZ(0,"span",5),e._uU(1),e.qZA()),2&r){const t=g.$implicit;e.Q6J("ngClass","sparebed-badge "+(null==t?null:t.value)),e.xp6(1),e.hij(" ",null==t?null:t.label," ")}}function M(r,g){if(1&r){const t=e.EpF();e.TgZ(0,"p-dropdown",6),e.NdJ("ngModelChange",function(a){e.CHM(t);const _=e.oxw();return e.KtG(_.selectedSparebed=a)})("onChange",function(a){e.CHM(t);const _=e.oxw();return e.KtG(_.handleOnChange(a))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,p,2,2,"ng-template",3),e.YNc(4,m,2,2,"ng-template",4),e.qZA()}if(2&r){const t=e.oxw();e.s9C("placeholder",e.lcZ(1,5,"P\xf3t\xe1gy...")),e.s9C("emptyMessage",e.lcZ(2,7,"Nincs tal\xe1lat...")),e.Q6J("ngModel",t.selectedSparebed)("options",t.sparebeds)("showClear",t.showClear)}}let x=(()=>{class r{constructor(t,C){this.translate=t,this.cdRef=C,this.change=new e.vpe,this.sparebeds=[],this.selectedSparebed="",this.disabled=!1,this.onChange=a=>{},this.onTouched=()=>{},this.placeholder||(this.placeholder="V\xe1lasszon...")}ngOnInit(){this.translate.onLangChange.subscribe(()=>{this.setSparebeds()}),this.setSparebeds()}ngOnChanges(t){this.setSparebeds()}getFormControl(){return this.parentForm&&this.controlName?this.parentForm.get(this.controlName):null}setSparebeds(){this.sparebeds=[{label:this.translate.instant("SPAREBEDS.M"),value:"M"},{label:this.translate.instant("SPAREBEDS.MM"),value:"MM"},{label:this.translate.instant("SPAREBEDS.MGY"),value:"MGY"},{label:this.translate.instant("SPAREBEDS.GY"),value:"GY"}]}handleOnChange(t){this.selectedSparebed=t.value,this.onChange(t.value),this.onTouched(),this.change.emit({value:t.value,field:this.controlName})}setDisabledState(t){this.disabled=t,this.cdRef.detectChanges()}writeValue(t){this.selectedSparebed=t,this.cdRef.detectChanges()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(C){return new(C||r)(e.Y36(b.sK),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-sparebed-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",placeholder:"placeholder",showClear:"showClear"},outputs:{change:"change"},features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>r),multi:!0}]),e.TTD],decls:3,vars:2,consts:[["optionLabel","label","optionValue","value","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","label","optionValue","value","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],["optionLabel","label","optionValue","value","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(C,a){if(1&C&&(e.YNc(0,c,5,9,"p-dropdown",0),e.YNc(1,M,5,9,"ng-template",null,1,e.W1O)),2&C){const _=e.MAs(2);e.Q6J("ngIf",a.getFormControl())("ngIfElse",_)}},dependencies:[u.mk,u.O5,d.JJ,d.On,d.oH,v.jx,h.Lt,b.X$],encapsulation:2})}return r})()},117:(T,E,l)=>{l.d(E,{T:()=>C});var e=l(2029),d=l(6223),b=l(7394),u=l(1206),v=l(6193),h=l(6814),n=l(5219),o=l(3965),c=l(9515);function p(a,_){if(1&a&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&a){const s=_.$implicit,i=e.oxw(2);e.Q6J("ngClass",i.getRoleStyleClass(s.user_rolesid)),e.xp6(2),e.hij(" ",s.fullname," ")}}function m(a,_){if(1&a&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&a){const s=_.$implicit,i=e.oxw(2);e.Q6J("ngClass",i.getRoleStyleClass(s.user_rolesid)),e.xp6(2),e.hij(" ",s.fullname," ")}}const M=function(){return{minWidth:"13rem"}};function x(a,_){if(1&a){const s=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(f){e.CHM(s);const S=e.oxw();return e.KtG(S.handleOnChange(f))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,p,3,2,"ng-template",3),e.YNc(4,m,3,2,"ng-template",4),e.qZA()}if(2&a){const s=_.ngIf,i=e.oxw();e.Akn(e.DdM(11,M)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("formControl",s)("options",i.users)("showClear",i.showClear)}}function r(a,_){if(1&a&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&a){const s=_.$implicit,i=e.oxw(2);e.Q6J("ngClass",i.getRoleStyleClass(s.user_rolesid)),e.xp6(2),e.hij(" ",s.fullname," ")}}function g(a,_){if(1&a&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&a){const s=_.$implicit,i=e.oxw(2);e.Q6J("ngClass",i.getRoleStyleClass(s.user_rolesid)),e.xp6(2),e.hij(" ",null==s?null:s.fullname," ")}}function t(a,_){if(1&a){const s=e.EpF();e.TgZ(0,"p-dropdown",7),e.NdJ("ngModelChange",function(f){e.CHM(s);const S=e.oxw();return e.KtG(S.selectedUser=f)})("onChange",function(f){e.CHM(s);const S=e.oxw();return e.KtG(S.handleOnChange(f))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,r,3,2,"ng-template",3),e.YNc(4,g,3,2,"ng-template",4),e.qZA()}if(2&a){const s=e.oxw();e.Akn(e.DdM(11,M)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("ngModel",s.selectedUser)("options",s.users)("showClear",s.showClear)}}let C=(()=>{class a{constructor(s,i,f){this.userService=s,this.roleService=i,this.cdRef=f,this.change=new e.vpe,this.disabled=!1,this.users=[],this.selectedUser="",this.roles=[],this.subs=new b.w0,this.onChange=S=>{},this.onTouched=()=>{}}ngOnInit(){this.subs.add(this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:s=>{s&&(this.users=this.user_rolesid?s.filter(i=>i.user_rolesid===this.user_rolesid):s,this.fetchRolesForUsers(),this.selectedUser&&!this.users.some(i=>i.id===this.selectedUser)&&(this.selectedUser="",this.onChange("")),this.cdRef.detectChanges())}}))}ngOnDestroy(){this.subs.unsubscribe()}ngOnChanges(s){s.user_rolesid&&!s.user_rolesid.firstChange&&this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:i=>{this.users=this.user_rolesid?i.filter(f=>f.user_rolesid===this.user_rolesid):i,this.selectedUser&&!this.users.some(f=>f.id===this.selectedUser)&&(this.selectedUser="",this.onChange("")),this.cdRef.detectChanges()}})}fetchRolesForUsers(){this.subs.add(this.roleService.fetchRoles().subscribe({next:s=>{this.roles=s,this.cdRef.detectChanges()}}))}getFormControl(){return this.parentForm?this.parentForm.get(this.controlName):null}handleOnChange(s){this.selectedUser=s.value,this.onChange(s.value),this.onTouched(),this.change.emit({value:s.value,field:this.controlName})}getRoleStyleClass(s){const i=this.roles.find(S=>S.id==s);return`user-role-badge role-${i?i?.name?.trim().toLowerCase().replace(/\s+/g,""):""}`}setDisabledState(s){this.disabled=s,this.cdRef.detectChanges()}writeValue(s){this.selectedUser=s,this.cdRef.detectChanges()}registerOnChange(s){this.onChange=s}registerOnTouched(s){this.onTouched=s}static#e=this.\u0275fac=function(i){return new(i||a)(e.Y36(u.K),e.Y36(v.N),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",user_rolesid:"user_rolesid",showClear:"showClear"},outputs:{change:"change"},features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>a),multi:!0}]),e.TTD],decls:3,vars:2,consts:[["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","style","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],[1,"pi","pi-user","mr-1"],["optionLabel","fullname","optionValue","id","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(i,f){if(1&i&&(e.YNc(0,x,5,12,"p-dropdown",0),e.YNc(1,t,5,12,"ng-template",null,1,e.W1O)),2&i){const S=e.MAs(2);e.Q6J("ngIf",f.getFormControl())("ngIfElse",S)}},dependencies:[h.mk,h.O5,d.JJ,d.On,d.oH,n.jx,o.Lt,c.X$],encapsulation:2})}return a})()},3139:(T,E,l)=>{l.d(E,{Q:()=>b});var e=l(8645),d=l(2029);let b=(()=>{class u{constructor(){this.mealChanged=new e.x,this.meals={breakfast:{begin:7,end:10},lunch:{begin:11,end:15},dinner:{begin:17,end:20}},this.checkMealStart(),setInterval(()=>{this.checkMealStart()},2e4)}checkMealStart(){const n=(new Date).getHours();for(const o of Object.keys(this.meals)){const c=this.meals[o];if(n>=c.begin&&n<c.end)return void this.mealChanged.next(o)}}getMealNameByTime(h){const n=h.getHours();for(const o in this.meals){const c=this.meals[o];if(n>=c.begin&&n<=c.end)return this.translateMealName(o)}return"Jelenleg nincs \xe9tkeztet\xe9s"}getMealsForSelector(){let h=[];for(const n in this.meals)h.push(this.translateMealName(n));return h}translateMealName(h){return{breakfast:"reggeli",lunch:"eb\xe9d",dinner:"vacsora"}[h]||h}isOpen(){const h=(new Date).getHours();for(const n in this.meals){const o=this.meals[n];if(h>=o.begin&&h<o.end)return!0}return!1}static#e=this.\u0275fac=function(n){return new(n||u)};static#t=this.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},2835:(T,E,l)=>{l.d(E,{c:()=>u});var e=l(5619),d=l(2029),b=l(8814);let u=(()=>{class v{constructor(n){this.apiService=n,this.apiURL=n.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get tagObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(n,o,c,p){let m="";""!==c&&(m=""!=c.sortField?`sort=${c.sortField}&order=${1===c.sortOrder?"ASC":"DESC"}`:"");const M=""!==m&&""!==p?m+"&"+p:""!==m&&""===p?m:""===m&&""!==p?p:"";this.apiService.get(`rfid/get/${n}/${o}${""!==M?"?"+M:""}`).subscribe({next:r=>{let g=r.rows;g&&g.length>0&&g.forEach(t=>{t.identifier=t.rfid}),this.data$.next(r)},error:r=>{this.message$.next(r)}})}getBySearch(n,o){let c="";""!==o&&(c=""!=o.sortField?`?sort=${o.sortField}&order=${1===o.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`rfid/search/${n}${c}`).subscribe({next:p=>{let m=p.rows;m&&m.length>0&&m.forEach(M=>{M.identifier=M.rfid}),this.data$.next(p)},error:p=>{this.message$.next(p)}})}getBySearchQuery(n){this.apiService.get(`rfid/searchquery?${n}`).subscribe({next:o=>{let c=o.rows;c&&c.length>0&&c.forEach(p=>{p.identifier=p.rfid}),this.data$.next(o)},error:o=>{this.message$.next(o)}})}create(n){this.apiService.post("rfid/create/",n).subscribe({next:o=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke r\xf6gz\xedt\xe9s",detail:`${n.rfid} r\xf6gz\xedtve`})},error:o=>{this.message$.next(o)}})}update(n){this.apiService.put(`rfid/update/${n.id}`,n).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke m\xf3dos\xedt\xe1s",detail:`${n.rfid} m\xf3dos\xedtva`})},error:o=>{this.message$.next(o)}})}delete(n){this.apiService.delete(`rfid/delete/${n.id}`).subscribe({next:o=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${n.rfid} t\xf6r\xf6lve`})},error:o=>{this.message$.next(o)}})}bulkdelete(n){let o={ids:n.map(c=>c.id)};this.apiService.post("rfid/bulkdelete",o).subscribe({next:c=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${n.length} c\xedmke t\xf6r\xf6lve`})},error:c=>{this.message$.next(c)}})}getByRFID(n){return this.apiService.get(`rfid/search/${n}`)}static#e=this.\u0275fac=function(o){return new(o||v)(d.LFG(b.s))};static#t=this.\u0275prov=d.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},1836:(T,E,l)=>{function e(){return d=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(d.value)?null:{invalidEmail:{value:d.value}}}l.d(E,{u:()=>e})},8842:(T,E,l)=>{function e(){return d=>{const b=d.get("password"),u=d.get("password_again");return b&&u&&b.value!==u.value?{passwordsDoNotMatch:!0}:null}}l.d(E,{C:()=>e})}}]);