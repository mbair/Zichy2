"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8592],{117:(x,O,n)=>{n.d(O,{T:()=>u});var e=n(2029),d=n(6223),h=n(7394),g=n(1206),y=n(6193),m=n(6814),a=n(5219),s=n(3965),l=n(9515);function _(o,p){if(1&o&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&o){const t=p.$implicit,c=e.oxw(2);e.Q6J("ngClass",c.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}function i(o,p){if(1&o&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&o){const t=p.$implicit,c=e.oxw(2);e.Q6J("ngClass",c.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}const r=function(){return{minWidth:"13rem"}};function f(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(E){e.CHM(t);const T=e.oxw();return e.KtG(T.handleOnChange(E))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,_,3,2,"ng-template",3),e.YNc(4,i,3,2,"ng-template",4),e.qZA()}if(2&o){const t=p.ngIf,c=e.oxw();e.Akn(e.DdM(11,r)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("formControl",t)("options",c.users)("showClear",c.showClear)}}function C(o,p){if(1&o&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&o){const t=p.$implicit,c=e.oxw(2);e.Q6J("ngClass",c.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}function v(o,p){if(1&o&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&o){const t=p.$implicit,c=e.oxw(2);e.Q6J("ngClass",c.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",null==t?null:t.fullname," ")}}function b(o,p){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",7),e.NdJ("ngModelChange",function(E){e.CHM(t);const T=e.oxw();return e.KtG(T.selectedUser=E)})("onChange",function(E){e.CHM(t);const T=e.oxw();return e.KtG(T.handleOnChange(E))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,C,3,2,"ng-template",3),e.YNc(4,v,3,2,"ng-template",4),e.qZA()}if(2&o){const t=e.oxw();e.Akn(e.DdM(11,r)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("ngModel",t.selectedUser)("options",t.users)("showClear",t.showClear)}}let u=(()=>{class o{constructor(t,c,E){this.userService=t,this.roleService=c,this.cdRef=E,this.change=new e.vpe,this.disabled=!1,this.users=[],this.selectedUser="",this.roles=[],this.subs=new h.w0,this.onChange=T=>{},this.onTouched=()=>{}}ngOnInit(){this.subs.add(this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:t=>{t&&(this.users=this.user_rolesid?t.filter(c=>c.user_rolesid===this.user_rolesid):t,this.fetchRolesForUsers(),this.selectedUser&&!this.users.some(c=>c.id===this.selectedUser)&&(this.selectedUser="",this.onChange("")),this.cdRef.detectChanges())}}))}ngOnDestroy(){this.subs.unsubscribe()}ngOnChanges(t){t.user_rolesid&&!t.user_rolesid.firstChange&&this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:c=>{this.users=this.user_rolesid?c.filter(E=>E.user_rolesid===this.user_rolesid):c,this.selectedUser&&!this.users.some(E=>E.id===this.selectedUser)&&(this.selectedUser="",this.onChange("")),this.cdRef.detectChanges()}})}fetchRolesForUsers(){this.subs.add(this.roleService.fetchRoles().subscribe({next:t=>{this.roles=t,this.cdRef.detectChanges()}}))}getFormControl(){return this.parentForm?this.parentForm.get(this.controlName):null}handleOnChange(t){this.selectedUser=t.value,this.onChange(t.value),this.onTouched(),this.change.emit({value:t.value,field:this.controlName})}getRoleStyleClass(t){const c=this.roles.find(T=>T.id==t);return`user-role-badge role-${c?c?.name?.trim().toLowerCase().replace(/\s+/g,""):""}`}setDisabledState(t){this.disabled=t,this.cdRef.detectChanges()}writeValue(t){this.selectedUser=t,this.cdRef.detectChanges()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(c){return new(c||o)(e.Y36(g.K),e.Y36(y.N),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",user_rolesid:"user_rolesid",showClear:"showClear"},outputs:{change:"change"},features:[e._Bn([{provide:d.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:3,vars:2,consts:[["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","style","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],[1,"pi","pi-user","mr-1"],["optionLabel","fullname","optionValue","id","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(c,E){if(1&c&&(e.YNc(0,f,5,12,"p-dropdown",0),e.YNc(1,b,5,12,"ng-template",null,1,e.W1O)),2&c){const T=e.MAs(2);e.Q6J("ngIf",E.getFormControl())("ngIfElse",T)}},dependencies:[m.mk,m.O5,d.JJ,d.On,d.oH,a.jx,s.Lt,l.X$],encapsulation:2})}return o})()},3139:(x,O,n)=>{n.d(O,{Q:()=>h});var e=n(8645),d=n(2029);let h=(()=>{class g{constructor(){this.mealChanged=new e.x,this.meals={breakfast:{begin:7,end:10},lunch:{begin:11,end:15},dinner:{begin:17,end:20}},this.checkMealStart(),setInterval(()=>{this.checkMealStart()},2e4)}checkMealStart(){const a=(new Date).getHours();for(const s of Object.keys(this.meals)){const l=this.meals[s];if(a>=l.begin&&a<l.end)return void this.mealChanged.next(s)}}getMealNameByTime(m){const a=m.getHours();for(const s in this.meals){const l=this.meals[s];if(a>=l.begin&&a<=l.end)return this.translateMealName(s)}return"Jelenleg nincs \xe9tkeztet\xe9s"}getMealsForSelector(){let m=[];for(const a in this.meals)m.push(this.translateMealName(a));return m}translateMealName(m){return{breakfast:"reggeli",lunch:"eb\xe9d",dinner:"vacsora"}[m]||m}isOpen(){const m=(new Date).getHours();for(const a in this.meals){const s=this.meals[a];if(m>=s.begin&&m<s.end)return!0}return!1}static#e=this.\u0275fac=function(a){return new(a||g)};static#t=this.\u0275prov=d.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},4520:(x,O,n)=>{n.d(O,{X:()=>s});var e=n(5619),d=n(2096),h=n(7398),g=n(2029),y=n(8814),m=n(9862),a=n(9515);let s=(()=>{class l{constructor(i,r,f){this.apiService=i,this.http=r,this.translate=f,this.cache=[],this.apiURL=i.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get roomObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(i,r,f,C){let v="";""!==f&&(v=""!=f.sortField?`sort=${f.sortField}&order=${1===f.sortOrder?"ASC":"DESC"}`:"");const b=""!==v&&""!==C?v+"&"+C:""!==v&&""===C?v:""===v&&""!==C?C:"";this.apiService.get(`room/get/${i}/${r}${""!==b?"?"+b:""}`).subscribe({next:o=>{this.data$.next(o)},error:o=>{this.message$.next(o)}})}getBySearch(i,r){let f="";""!==r&&(f=""!=r.sortField?`?sort=${r.sortField}&order=${1===r.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`room/search/${i}${f}`).subscribe({next:C=>{this.data$.next(C)},error:C=>{this.message$.next(C)}})}getBySearchQuery(i){this.apiService.get(`room/searchquery?${i}`).subscribe({next:r=>{this.data$.next(r)},error:r=>{this.message$.next(r)}})}create(i){this.apiService.post("room/create/",i).subscribe({next:r=>{this.message$.next({severity:"success",summary:"Sikeres szoba r\xf6gz\xedt\xe9s",detail:`${i.roomNum} sz\xe1m\xfa szoba r\xf6gz\xedtve`})},error:r=>{this.message$.next(r)}})}update(i){this.apiService.put(`room/update/${i.id}`,i).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres szoba m\xf3dos\xedt\xe1s",detail:`${i.roomNum} sz\xe1m\xfa szoba m\xf3dos\xedtva`})},error:r=>{this.message$.next(r)}})}delete(i){this.apiService.delete(`room/delete/${i.id}`).subscribe({next:r=>{this.message$.next({severity:"success",summary:"Sikeres szoba t\xf6rl\xe9s",detail:`${i.roomNum} sz\xe1m\xfa szoba t\xf6r\xf6lve`})},error:r=>{this.message$.next(r)}})}bulkdelete(i){let r={ids:i.map(f=>f.id)};this.apiService.post("room/bulkdelete",r).subscribe({next:f=>{this.message$.next({severity:"success",summary:"Sikeres szoba t\xf6rl\xe9s",detail:`${i.length} szoba t\xf6r\xf6lve`})},error:f=>{this.message$.next(f)}})}getRoomsForSelector(){return this.cache.length>0?(0,d.of)(this.cache):(this.get(0,999,{sortField:"roomNum",sortOrder:1},""),this.data$.asObservable().pipe((0,h.U)(i=>{const r=i?i.rows:[];return this.cache=r,r})))}getRoomTypeByCode(i,r){return[{code:"KB",beds:4,label:this.translate.instant("ROOMTYPES.CASTLE"),description:this.translate.instant("ROOMTYPES.4-BED-ROOM"),value:"Kast\xe9ly sz\xe1ll\xe1s 4 \xe1gyas szoba",color:"teal"},{code:"KB",beds:6,label:this.translate.instant("ROOMTYPES.CASTLE"),description:this.translate.instant("ROOMTYPES.6-BED-ROOM"),value:"Kast\xe9ly sz\xe1ll\xe1s 6 \xe1gyas szoba",color:"teal"},{code:"KB",beds:8,label:this.translate.instant("ROOMTYPES.CASTLE"),description:this.translate.instant("ROOMTYPES.8-BED-ROOM"),value:"Kast\xe9ly sz\xe1ll\xe1s 8 \xe1gyas szoba",color:"teal"},{code:"MD",beds:2,label:this.translate.instant("ROOMTYPES.MARANATHA-PENSION-HOUSE"),description:this.translate.instant("ROOMTYPES.2-BED-ROOM"),value:"Maranatha Panzi\xf3h\xe1z 2 \xe1gyas szoba (k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{code:"MQ",beds:2,label:this.translate.instant("ROOMTYPES.MARANATHA-PENSION-HOUSE"),description:this.translate.instant("ROOMTYPES.DOUBLE-BED-ROOM"),value:"Maranatha Panzi\xf3h\xe1z francia\xe1gyas szoba (k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{code:"MB",beds:4,label:this.translate.instant("ROOMTYPES.MARANATHA-PENSION-HOUSE"),description:this.translate.instant("ROOMTYPES.M-4-BED-ROOM"),value:"Maranatha Panzi\xf3h\xe1z 4 \xe1gyas szoba (emeletes \xe1gyas, k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{code:"A",label:this.translate.instant("ROOMTYPES.FAMILY-ROOM"),description:this.translate.instant("ROOMTYPES.WITH-KITCHEN"),value:"Csal\xe1di szoba (k\xf6z\xf6s konyh\xe1val, f\xfcrd\u0151vel \xe9s nappalival)",color:"orange"}].find(v=>v.code===i&&(void 0===v.beds||v.beds===r))}static#e=this.\u0275fac=function(r){return new(r||l)(g.LFG(y.s),g.LFG(m.eN),g.LFG(a.sK))};static#t=this.\u0275prov=g.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},2835:(x,O,n)=>{n.d(O,{c:()=>g});var e=n(5619),d=n(2029),h=n(8814);let g=(()=>{class y{constructor(a){this.apiService=a,this.apiURL=a.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get tagObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(a,s,l,_){let i="";""!==l&&(i=""!=l.sortField?`sort=${l.sortField}&order=${1===l.sortOrder?"ASC":"DESC"}`:"");const r=""!==i&&""!==_?i+"&"+_:""!==i&&""===_?i:""===i&&""!==_?_:"";this.apiService.get(`rfid/get/${a}/${s}${""!==r?"?"+r:""}`).subscribe({next:C=>{let v=C.rows;v&&v.length>0&&v.forEach(b=>{b.identifier=b.rfid}),this.data$.next(C)},error:C=>{this.message$.next(C)}})}getBySearch(a,s){let l="";""!==s&&(l=""!=s.sortField?`?sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`rfid/search/${a}${l}`).subscribe({next:_=>{let i=_.rows;i&&i.length>0&&i.forEach(r=>{r.identifier=r.rfid}),this.data$.next(_)},error:_=>{this.message$.next(_)}})}getBySearchQuery(a){this.apiService.get(`rfid/searchquery?${a}`).subscribe({next:s=>{let l=s.rows;l&&l.length>0&&l.forEach(_=>{_.identifier=_.rfid}),this.data$.next(s)},error:s=>{this.message$.next(s)}})}create(a){this.apiService.post("rfid/create/",a).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke r\xf6gz\xedt\xe9s",detail:`${a.rfid} r\xf6gz\xedtve`})},error:s=>{this.message$.next(s)}})}update(a){this.apiService.put(`rfid/update/${a.id}`,a).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke m\xf3dos\xedt\xe1s",detail:`${a.rfid} m\xf3dos\xedtva`})},error:s=>{this.message$.next(s)}})}delete(a){this.apiService.delete(`rfid/delete/${a.id}`).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${a.rfid} t\xf6r\xf6lve`})},error:s=>{this.message$.next(s)}})}bulkdelete(a){let s={ids:a.map(l=>l.id)};this.apiService.post("rfid/bulkdelete",s).subscribe({next:l=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${a.length} c\xedmke t\xf6r\xf6lve`})},error:l=>{this.message$.next(l)}})}getByRFID(a){return this.apiService.get(`rfid/search/${a}`)}static#e=this.\u0275fac=function(s){return new(s||y)(d.LFG(h.s))};static#t=this.\u0275prov=d.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},1836:(x,O,n)=>{function e(){return d=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(d.value)?null:{invalidEmail:{value:d.value}}}n.d(O,{u:()=>e})},8842:(x,O,n)=>{function e(){return d=>{const h=d.get("password"),g=d.get("password_again");return h&&g&&h.value!==g.value?{passwordsDoNotMatch:!0}:null}}n.d(O,{C:()=>e})},4532:(x,O,n)=>{n.d(O,{d:()=>b});var e=n(6814),d=n(2029),h=n(5219);let b=(()=>{class u{static \u0275fac=function(t){return new(t||u)};static \u0275mod=d.oAB({type:u});static \u0275inj=d.cJS({imports:[e.ez,h.m8]})}return u})()},1913:(x,O,n)=>{n.d(O,{h:()=>g,l:()=>y});var e=n(6814),d=n(2029),h=n(2076);let g=(()=>{class m{el;renderer;zone;constructor(s,l,_){this.el=s,this.renderer=l,this.zone=_}selector;enterClass;enterActiveClass;enterToClass;leaveClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;eventListener;documentClickListener;documentKeydownListener;target;enterListener;leaveListener;animating;clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){h.p.hasClass(this.target,this.toggleClass)?h.p.removeClass(this.target,this.toggleClass):h.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",h.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",h.p.addClass(this.target,"hidden"),this.target.style.height=""),h.p.addClass(this.target,this.enterActiveClass),this.enterClass&&h.p.removeClass(this.target,this.enterClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{h.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&h.p.addClass(this.target,this.enterToClass),this.enterListener&&this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterClass&&h.p.removeClass(this.target,this.enterClass),this.enterToClass&&h.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,h.p.addClass(this.target,this.leaveActiveClass),this.leaveClass&&h.p.removeClass(this.target,this.leaveClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{h.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&h.p.addClass(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):(this.leaveClass&&h.p.removeClass(this.target,this.leaveClass),this.leaveToClass&&h.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",s=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(s)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",s=>{const{key:l,keyCode:_,which:i}=s;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===l&&27===_&&27===i&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(s){return!this.el.nativeElement.isSameNode(s.target)&&!this.el.nativeElement.contains(s.target)&&!this.target.contains(s.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}static \u0275fac=function(l){return new(l||m)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.R0b))};static \u0275dir=d.lG2({type:m,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(l,_){1&l&&d.NdJ("click",function(r){return _.clickListener(r)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}})}return m})(),y=(()=>{class m{static \u0275fac=function(l){return new(l||m)};static \u0275mod=d.oAB({type:m});static \u0275inj=d.cJS({imports:[e.ez]})}return m})()}}]);