"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8188],{746:(x,m,l)=>{l.d(m,{Q:()=>T});var g=l(5619),c=l(9397),n=l(6306),v=l(2096),C=l(2029),d=l(8814);let T=(()=>{class a{constructor(e){this.apiService=e,this.apiURL=e.apiURL,this.guestData$=new g.X(null),this.serviceMessage$=new g.X(null)}get guestObs(){return this.guestData$.asObservable()}get serviceMessageObs(){return this.serviceMessage$.asObservable()}getGuests(e,t,i,r){let u="";""!==i&&(u=""!=i.sortField?`sort=${i.sortField}&order=${1===i.sortOrder?"ASC":"DESC"}`:"");const f=""!==u&&""!==r?u+"&"+r:""!==u&&""===r?u:""===u&&""!==r?r:"";this.apiService.get(`guest/get/${e}/${t}${""!==f?"?"+f:""}`).subscribe({next:s=>{this.guestData$.next(s)},error:s=>{this.serviceMessage$.next(s)}})}getGuestsBySearch(e,t){let i="";""!==t&&(i=""!=t.sortField?`?sort=${t.sortField}&order=${1===t.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`guest/search/${e}${i}`).subscribe({next:r=>{this.guestData$.next(r)},error:r=>{this.serviceMessage$.next(r)}})}getGuestsBySearchQuery(e){this.apiService.get(`guest/searchquery?${e}`).subscribe({next:t=>{this.guestData$.next(t)},error:t=>{this.serviceMessage$.next(t)}})}getByRFID(e){return this.apiService.get(`guest/getbyrfid/${e}`)}updateLastTagUsage(e){this.apiService.get(`guest/updatelasttagusage/${e}`).subscribe({next:t=>{},error:t=>{this.serviceMessage$.next(t)}})}createGuest(e,t){const i=new FormData;Object.keys(e).forEach(r=>{i.append(r,e[r])}),t&&i.append("file",t,t.name),this.apiService.post("guest/create/",i).subscribe({next:r=>{this.serviceMessage$.next("success")},error:r=>{this.serviceMessage$.next(r)}})}updateGuest(e){this.apiService.put(`guest/update/${e.id}`,e).subscribe({next:()=>{this.serviceMessage$.next("success")},error:t=>{this.serviceMessage$.next(t)}})}updateGuest2(e){return this.apiService.put(`guest/update/${e.id}`,e).pipe((0,c.b)(()=>console.log(`updated guest id=${e.id}`)),(0,n.K)(this.handleError("updateGuest2")))}deleteGuest(e){this.apiService.delete(`guest/delete/${e.id}`).subscribe({next:t=>{this.serviceMessage$.next(t)},error:t=>{this.serviceMessage$.next(t)}})}deleteGuests(e){let t={ids:e.map(i=>i.id)};this.apiService.post("guest/bulkdelete",t).subscribe({next:i=>{this.serviceMessage$.next(i)},error:i=>{this.serviceMessage$.next(i)}})}handleError(e="operation",t){return i=>(console.error(i),console.error(`${e} failed: ${i.message}`),(0,v.of)(t))}static#e=this.\u0275fac=function(t){return new(t||a)(C.LFG(d.s))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},4532:(x,m,l)=>{l.d(m,{d:()=>y});var g=l(6814),c=l(2029),n=l(5219);let y=(()=>{class s{static \u0275fac=function(_){return new(_||s)};static \u0275mod=c.oAB({type:s});static \u0275inj=c.cJS({imports:[g.ez,n.m8]})}return s})()},1913:(x,m,l)=>{l.d(m,{h:()=>v,l:()=>C});var g=l(6814),c=l(2029),n=l(2076);let v=(()=>{class d{el;renderer;zone;constructor(a,h,e){this.el=a,this.renderer=h,this.zone=e}selector;enterClass;enterActiveClass;enterToClass;leaveClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;eventListener;documentClickListener;documentKeydownListener;target;enterListener;leaveListener;animating;clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){n.p.hasClass(this.target,this.toggleClass)?n.p.removeClass(this.target,this.toggleClass):n.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",n.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",n.p.addClass(this.target,"hidden"),this.target.style.height=""),n.p.addClass(this.target,this.enterActiveClass),this.enterClass&&n.p.removeClass(this.target,this.enterClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{n.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&n.p.addClass(this.target,this.enterToClass),this.enterListener&&this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterClass&&n.p.removeClass(this.target,this.enterClass),this.enterToClass&&n.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,n.p.addClass(this.target,this.leaveActiveClass),this.leaveClass&&n.p.removeClass(this.target,this.leaveClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{n.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&n.p.addClass(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):(this.leaveClass&&n.p.removeClass(this.target,this.leaveClass),this.leaveToClass&&n.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",a=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(a)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",a=>{const{key:h,keyCode:e,which:t}=a;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===h&&27===e&&27===t&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(a){return!this.el.nativeElement.isSameNode(a.target)&&!this.el.nativeElement.contains(a.target)&&!this.target.contains(a.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}static \u0275fac=function(h){return new(h||d)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.R0b))};static \u0275dir=c.lG2({type:d,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(h,e){1&h&&c.NdJ("click",function(i){return e.clickListener(i)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}})}return d})(),C=(()=>{class d{static \u0275fac=function(h){return new(h||d)};static \u0275mod=c.oAB({type:d});static \u0275inj=c.cJS({imports:[g.ez]})}return d})()}}]);