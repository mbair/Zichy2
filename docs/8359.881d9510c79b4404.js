"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8359],{8359:(ee,$,c)=>{c.r($),c.d($,{ReservationModule:()=>$s});var _=c(6814),v=c(6223),O=c(1640),U=c(7582),z=c(8645),F=c(5619),J=c(2181),T=c(7398),R=c(3997),G=c(2832),d=c(9360),h=c(4829),y=c(8251),I=c(4825);var te=c(4664),j=c(3620),se=c(2096),Fe=c(6306),re=c(8180),Ze=c(4279),E=c(5219),we=c(1116);const ae=()=>function Ne(o){const i=t=>(t??[]).map(s=>{const n=o(s);return null==n?"\u2400":"number"==typeof n?`#${n}`:`@${n}`}).sort().join("|");return(0,R.x)((t,s)=>i(t)===i(s))}(o=>o.id);var le=c(9474),ke=c(217),Z=c(6676),e=c(2029),De=c(9397),Me=c(8814),Y=c(9515);let ce=(()=>{class o{get messageObs(){return this.message$.asObservable()}constructor(t,s){this.apiService=t,this.translate=s,this.cache=[],this.message$=new F.X(null),this.apiURL=t.apiURL}get$(t,s,n,r){let a="";""!==n&&(a=n.sortField?`sort=${n.sortField}&order=${1===n.sortOrder?"ASC":"DESC"}`:"");const l=a&&r?`${a}&${r}`:a||r||"";return this.apiService.get(`reservation/get/${t}/${s}${l?`?${l}`:""}`)}getBySearch$(t,s){let n="";return""!==s&&(n=""!==s.sortField?`?sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`reservation/search/${t}${n}`)}getBySearchQuery$(t){return this.apiService.get(`reservation/searchquery?${t}`)}getReservationsForSelector(){return this.cache.length?(0,se.of)(this.cache):this.apiService.get("reservation/get/0/999?sort=reservationNum&order=ASC").pipe((0,T.U)(t=>t?.rows??[]),(0,De.b)(t=>{this.cache=t}))}create(t){this.apiService.post("reservation/create/",t).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres foglal\xe1s r\xf6gz\xedt\xe9s",detail:"Foglal\xe1s r\xf6gz\xedtve"})},error:s=>{this.message$.next({severity:"error",summary:"Foglal\xe1s nem menthet\u0151",detail:this.localizeError(s)})}})}update(t){this.apiService.put(`reservation/update/${t.id}`,t).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres foglal\xe1s m\xf3dos\xedt\xe1s",detail:"Foglal\xe1s m\xf3dos\xedtva"})},error:s=>{this.message$.next({severity:"error",summary:"Foglal\xe1s nem m\xf3dos\xedthat\xf3",detail:this.localizeError(s)})}})}delete(t){this.apiService.delete(`reservation/delete/${t.id}`).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres foglal\xe1s t\xf6rl\xe9s",detail:"Foglal\xe1s t\xf6r\xf6lve"})},error:s=>{this.message$.next({severity:"error",summary:"Foglal\xe1s nem t\xf6r\xf6lhet\u0151",detail:this.localizeError(s)})}})}bulkdelete(t){const s={ids:t.map(n=>n.id)};this.apiService.post("reservation/bulkdelete",s).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres foglal\xe1s t\xf6rl\xe9s",detail:`${t.length} foglal\xe1s t\xf6r\xf6lve`})},error:n=>{this.message$.next({severity:"error",summary:"Foglal\xe1s nem t\xf6r\xf6lhet\u0151",detail:this.localizeError(n)})}})}getRawBackendMessage(t){const s=t?.error;if(s&&"object"==typeof s&&"message"in s&&s.message)return String(s.message);if("string"==typeof s)try{const n=JSON.parse(s);if(n?.message)return String(n.message)}catch{return s}return t?.message??"Unknown error"}localize(t){return this.translate.instant(t)}localizeError(t){return this.localize(this.getRawBackendMessage(t))}static#e=this.\u0275fac=function(s){return new(s||o)(e.LFG(Me.s),e.LFG(Y.sK))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var ue=c(4520),Oe=c(1206),ze=c(219),Le=c(8022),V=c(9552),P=c(707),H=c(4480),de=c(4104),pe=c(3714),me=c(7213),he=c(7680),ge=c(4204),fe=c(9246),Ge=c(3069),Be=c(2991),_e=c(3965);function $e(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Gre("reservation-status-badge ",t.value,""),e.xp6(1),e.hij(" ",e.lcZ(2,4,"RESERVATION_STATUSES."+(null==t.label?null:t.label.toUpperCase()))," ")}}function Ue(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Gre("reservation-status-badge ",null==t?null:t.value,""),e.xp6(1),e.hij(" ",e.lcZ(2,4,"RESERVATION_STATUSES."+(null==t||null==t.label?null:t.label.toUpperCase()))," ")}}function je(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.handleOnChange(n))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,$e,3,6,"ng-template",3),e.YNc(4,Ue,3,6,"ng-template",4),e.qZA()}if(2&o){const t=i.ngIf,s=e.oxw();e.s9C("placeholder",e.lcZ(1,5,s.placeholder)),e.s9C("emptyMessage",e.lcZ(2,7,"Nincs tal\xe1lat...")),e.Q6J("formControl",t)("options",s.statuses)("showClear",s.showClear)}}function Ye(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Gre("reservation-status-badge ",t.value,""),e.xp6(1),e.hij(" ",e.lcZ(2,4,"RESERVATION_STATUSES."+(null==t.label?null:t.label.toUpperCase()))," ")}}function Je(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Gre("reservation-status-badge ",null==t?null:t.value,""),e.xp6(1),e.hij(" ",e.lcZ(2,4,"RESERVATION_STATUSES."+(null==t||null==t.label?null:t.label.toUpperCase()))," ")}}function Qe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",5),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedStatus=n)})("onChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.handleOnChange(n))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,Ye,3,6,"ng-template",3),e.YNc(4,Je,3,6,"ng-template",4),e.qZA()}if(2&o){const t=e.oxw();e.s9C("placeholder",e.lcZ(1,5,t.placeholder)),e.s9C("emptyMessage",e.lcZ(2,7,"Nincs tal\xe1lat...")),e.Q6J("ngModel",t.selectedStatus)("options",t.statuses)("showClear",t.showClear)}}let Ve=(()=>{class o{constructor(t,s){this.translate=t,this.cdRef=s,this.change=new e.vpe,this.statuses=[],this.selectedStatus="",this.disabled=!1,this.onChange=n=>{},this.onTouched=()=>{},this.placeholder||(this.placeholder="V\xe1lasszon...")}ngOnInit(){this.translate.onLangChange.subscribe(()=>{this.setReservationStatuses()}),this.setReservationStatuses()}ngOnChanges(t){this.setReservationStatuses()}getFormControl(){return this.parentForm&&this.controlName?this.parentForm.get(this.controlName):null}setReservationStatuses(){this.statuses=[{label:"tentative",value:"tentative"},{label:"confirmed",value:"confirmed"},{label:"in_house",value:"in_house"},{label:"checked_out",value:"checked_out"},{label:"cancelled",value:"cancelled"}]}handleOnChange(t){this.selectedStatus=t.value,this.onChange(t.value),this.onTouched(),this.change.emit({value:t.value,field:this.controlName})}setDisabledState(t){this.disabled=t,this.cdRef.detectChanges()}writeValue(t){this.selectedStatus=t,this.cdRef.detectChanges()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(Y.sK),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-reservation-status-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",placeholder:"placeholder",showClear:"showClear"},outputs:{change:"change"},features:[e._Bn([{provide:v.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:3,vars:2,consts:[["optionLabel","label","optionValue","value","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","label","optionValue","value","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],["optionLabel","label","optionValue","value","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(s,n){if(1&s&&(e.YNc(0,je,5,9,"p-dropdown",0),e.YNc(1,Qe,5,9,"ng-template",null,1,e.W1O)),2&s){const r=e.MAs(2);e.Q6J("ngIf",n.getFormControl())("ngIfElse",r)}},dependencies:[_.O5,v.JJ,v.On,v.oH,E.jx,_e.Lt,Y.X$],encapsulation:2})}return o})();var ve=c(7394),be=c(4055),W=c(3259);const Pe=["roomSelector"];function qe(o,i){if(1&o&&(e.TgZ(0,"span",15),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("(",t.floor,")")}}function Ke(o,i){1&o&&(e.TgZ(0,"span",16),e._uU(1,"\u2744\ufe0f"),e.qZA())}function He(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(", ",t.bathroom,"")}}function We(o,i){if(1&o&&(e.TgZ(0,"div")(1,"div",4)(2,"div",5),e._UZ(3,"i",6),e.TgZ(4,"span",7),e._uU(5),e.qZA()(),e.TgZ(6,"div",8)(7,"div",9)(8,"span",10),e._uU(9),e.ALo(10,"translate"),e.YNc(11,qe,2,1,"span",11),e.YNc(12,Ke,2,0,"span",12),e.qZA(),e.TgZ(13,"span",13),e._uU(14),e.YNc(15,He,2,1,"span",14),e._uU(16,") "),e.qZA()()()()()),2&o){const t=i.$implicit;e.Gre("building-badge ",t.building," border-round-xl w-min p-0"),e.xp6(4),e.MGl("pTooltip","Szoba sz\xe1m: ",t.roomNum,""),e.xp6(1),e.hij(" ",t.roomNum," "),e.xp6(1),e.MGl("pTooltip","Szoba k\xf3d: ",t.roomCode,""),e.xp6(3),e.hij(" ",e.lcZ(10,12,"BUILDINGS."+t.building.toUpperCase())," "),e.xp6(2),e.Q6J("ngIf",t.floor),e.xp6(1),e.Q6J("ngIf",t.climate),e.xp6(2),e.AsE(" ",t.beds," SZEM\xc9LYES (",t.bedType,""),e.xp6(1),e.Q6J("ngIf",t.bathroom)}}function Xe(o,i){if(1&o&&(e.TgZ(0,"span",15),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("(",t.floor,")")}}function et(o,i){1&o&&(e.TgZ(0,"span",16),e._uU(1,"\u2744\ufe0f"),e.qZA())}function tt(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(", ",t.bathroom,"")}}function st(o,i){if(1&o&&(e.TgZ(0,"div")(1,"div",4)(2,"div",5),e._UZ(3,"i",6),e.TgZ(4,"span",7),e._uU(5),e.qZA()(),e.TgZ(6,"div",8)(7,"div",9)(8,"span",10),e._uU(9),e.ALo(10,"translate"),e.YNc(11,Xe,2,1,"span",11),e.YNc(12,et,2,0,"span",12),e.qZA(),e.TgZ(13,"span",13),e._uU(14),e.YNc(15,tt,2,1,"span",14),e._uU(16,") "),e.qZA()()()()()),2&o){const t=i.$implicit;e.Gre("building-badge ",t.building," border-round-xl w-min p-0"),e.xp6(4),e.MGl("pTooltip","Szoba sz\xe1m: ",t.roomNum,""),e.xp6(1),e.hij(" ",t.roomNum," "),e.xp6(1),e.MGl("pTooltip","Szoba k\xf3d: ",t.roomCode,""),e.xp6(3),e.hij(" ",e.lcZ(10,12,"BUILDINGS."+t.building.toUpperCase())," "),e.xp6(2),e.Q6J("ngIf",t.floor),e.xp6(1),e.Q6J("ngIf",t.climate),e.xp6(2),e.AsE(" ",t.beds," SZEM\xc9LYES (",t.bedType,""),e.xp6(1),e.Q6J("ngIf",t.bathroom)}}let it=(()=>{class o{set preselectIds(t){const n=(Array.isArray(t)?t:null!=t?[t]:[]).map(r=>"string"==typeof r?Number(r):r).filter(r=>Number.isFinite(r));this._pendingSelectIds=n.length?n:void 0,this.preselectByIds()}runSilently(t){this.suppress++;try{return t()}finally{this.suppress--}}constructor(t,s,n){this.roomService=t,this.messageService=s,this.cdr=n,this.filter=null,this.selectFirstOption=!1,this.showClear=!0,this.style={},this.disabledOptions=[],this.showOnlyNotReserved=!1,this.emitOnSelectFirstOption=!1,this.emitOnPreselectId=!1,this.emitOnWriteValue=!1,this.change=new e.vpe,this.loading=!0,this.disabled=!1,this.rooms=[],this.originalRooms=[],this.selectedRooms=[],this.subscriptions=new ve.w0,this.suppress=0,this.onChange=r=>{},this.onTouched=()=>{}}ngOnInit(){this.reload()}ngOnChanges(t){t.filter&&this.reload()}ngOnDestroy(){this.subscriptions.unsubscribe()}reload(){this.loading=!0;const t={...this.filter??{},onlyNotReserved:this.showOnlyNotReserved||(this.filter?.onlyNotReserved??!1)};if(t.onlyNotReserved&&!t.conferenceId)return this.rooms=[],this.loading=!1,void this.cdr.markForCheck();const s=(this.selectedRooms??[]).map(u=>this.toNumId(u?.id)).filter(u=>null!=u),r=Array.from(new Set([...s,...this._pendingSelectIds??[]])),a={...t,...r.length?{includeRoomIds:r}:{},...t.onlyNotReserved?{allowPartial:!0}:{}},l=this.roomService.searchRoomsForSelector$(a).subscribe({next:u=>{this.rooms=u??[],this.originalRooms=this.rooms.slice(),this.loading=!1,this.syncSelectedRooms(),this.preselectByIds(),this.handleSelectFirstOption(),this.cdr.markForCheck()},error:u=>{this.rooms=[],this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load rooms."})}});this.subscriptions.add(l)}setSelection(t,s){const n=s?.source??"programmatic";this.runSilently(()=>{this.selectedRooms=t?.slice(0,this.selectionLimit??t.length)??[]}),s?.emit&&this.emit(this.selectedRooms,n,!0)}handleSelectFirstOption(){this.selectFirstOption&&0===this.selectedRooms.length&&this.rooms.length&&(this.runSilently(()=>{this.selectedRooms=this.rooms.slice(0,this.selectionLimit??1)}),this.emitOnSelectFirstOption&&this.emit(this.selectedRooms,"auto-select-first",!0))}preselectByIds(){if(!this.rooms?.length||!this._pendingSelectIds?.length)return;const t=new Set(this._pendingSelectIds),s=this.rooms.filter(l=>{const u=this.toNumId(l?.id);return null!=u&&t.has(u)}),r=Number.isFinite(this.selectionLimit)&&this.selectionLimit>0?this.selectionLimit:s.length,a=s.slice(0,r);this.runSilently(()=>{this.selectedRooms=a,this.roomSelectorRef?.writeValue(this.selectedRooms)}),this.onChange(this.selectedRooms),this.onTouched(),this.emitOnPreselectId&&this.emit(this.selectedRooms,"preselect-id",!0),this._pendingSelectIds=void 0}setDisabledState(t){this.disabled=t,this.roomSelectorRef&&(this.roomSelectorRef.disabled=t)}syncSelectedRooms(){this.selectedRooms=this.rooms.filter(t=>{const s=this.toNumId(t?.id);return null!=s&&this.selectedRooms.some(n=>this.toNumId(n?.id)===s)}),this.onChange(this.selectedRooms)}onSelectionChange(t){this.selectedRooms=t.value||[],this.emit(this.selectedRooms,"user"),1==this.selectionLimit&&this.selectedRooms?.length>=1&&setTimeout(()=>this.roomSelectorRef?.hide())}onSelectionClear(){this.runSilently(()=>{this.selectedRooms=[],this.roomSelectorRef&&this.roomSelectorRef.writeValue([])}),this.emit(this.selectedRooms,"user",!0)}emit(t,s,n=!1){this.suppress&&!n||(this.onChange(t),this.onTouched(),this.change.emit({value:t,source:s}))}toNumId(t){return"number"==typeof t&&Number.isFinite(t)?t:"string"==typeof t&&""!==t.trim()&&Number.isFinite(+t)?+t:null}writeValue(t){const s=Array.isArray(t)?t:t?[t]:[],r=Number.isFinite(this.selectionLimit)&&this.selectionLimit>0?this.selectionLimit:s.length;this.runSilently(()=>{this.selectedRooms=s.slice(0,r),this.roomSelectorRef&&this.roomSelectorRef.writeValue(this.selectedRooms)}),this.emitOnWriteValue&&this.emit(this.selectedRooms,"programmatic",!0)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(ue.X),e.Y36(E.ez),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-room-selector"]],viewQuery:function(s,n){if(1&s&&e.Gf(Pe,5),2&s){let r;e.iGM(r=e.CRH())&&(n.roomSelectorRef=r.first)}},inputs:{filter:"filter",selectionLimit:"selectionLimit",selectFirstOption:"selectFirstOption",placeholder:"placeholder",showClear:"showClear",style:"style",disabledOptions:"disabledOptions",showOnlyNotReserved:"showOnlyNotReserved",emitOnSelectFirstOption:"emitOnSelectFirstOption",emitOnPreselectId:"emitOnPreselectId",emitOnWriteValue:"emitOnWriteValue",preselectIds:"preselectIds"},outputs:{change:"change"},features:[e._Bn([{provide:v.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:5,vars:13,consts:[["dataKey","id","optionLabel","roomNum","optionDisabled","disabled","filterBy","roomNum","styleClass","height:53px","scrollHeight","400px","appendTo","body","display","chip",1,"multiselect-custom-virtual-scroll",3,"options","ngModel","disabled","selectionLimit","placeholder","emptyMessage","virtualScroll","virtualScrollItemSize","showClear","ngModelChange","onChange","onClear"],["roomSelector",""],["pTemplate","item"],["pTemplate","selectedItem"],[1,"flex","align-items-center","justify-content-center","py-1","px-1"],[1,"flex","align-items-center","justify-content-center","gap-2","px-2"],[1,"pi","pi-key","vertical-align-middle"],["tooltipPosition","top",1,"text-2xl","font-semibold","white-space-nowrap","vertical-align-middle",3,"pTooltip"],["tooltipPosition","top",1,"block","min-w-max","border-left-1","px-2",3,"pTooltip"],[1,"flex","flex-column","align-items-left","justify-content-center"],[1,"text-base","font-semibold","uppercase"],["class","font-normal text-sm uppercase",4,"ngIf"],["class","pl-1",4,"ngIf"],[1,"font-light","text-xs","uppercase"],[4,"ngIf"],[1,"font-normal","text-sm","uppercase"],[1,"pl-1"]],template:function(s,n){1&s&&(e.TgZ(0,"p-multiSelect",0,1),e.NdJ("ngModelChange",function(a){return n.selectedRooms=a})("onChange",function(a){return n.onSelectionChange(a)})("onClear",function(){return n.onSelectionClear()}),e.ALo(2,"translate"),e.YNc(3,We,17,14,"ng-template",2),e.YNc(4,st,17,14,"ng-template",3),e.qZA()),2&s&&(e.Akn(n.style),e.s9C("emptyMessage",e.lcZ(2,11,"Nincs tal\xe1lat...")),e.Q6J("options",n.rooms)("ngModel",n.selectedRooms)("disabled",n.disabled)("selectionLimit",n.selectionLimit)("placeholder",n.placeholder)("virtualScroll",!0)("virtualScrollItemSize",50)("showClear",n.showClear))},dependencies:[_.O5,v.JJ,v.On,E.jx,be.NU,W.u,Y.X$],encapsulation:2,changeDetection:0})}return o})();var nt=c(746),ye=c(2169);const ot=["guestSelector"];function rt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"p-chip",8),e.NdJ("onRemove",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.removeGuest(r))}),e.qZA()}if(2&o){const t=i.$implicit,s=e.oxw(2);e.s9C("pTooltip",t.roomMate),e.Q6J("label",t.lastName+" "+t.firstName)("removable",!0)("styleClass","cursor-pointer color-badge "+s.getColorByRoomType((null==t?null:t.roomType)||""))}}function at(o,i){if(1&o&&(e.TgZ(0,"div",6),e.YNc(1,rt,1,4,"p-chip",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedGuests)("ngForTrackBy",t.trackByGuestId)}}const lt=function(o,i,t){return{"pi-check-square":o,"pi-minus-square":i,"pi-square":t}};function ct(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(n){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.toggleGroupSelection(a,n))}),e._UZ(1,"i",10),e.TgZ(2,"span",11),e._uU(3),e.qZA(),e.TgZ(4,"span",12),e._uU(5),e.qZA()()}if(2&o){const t=i.$implicit,s=e.oxw();e.Q6J("pTooltip",t.explanation),e.xp6(1),e.Q6J("ngClass",e.kEZ(4,lt,s.isGroupFullySelected(t),s.isGroupPartiallySelected(t),!s.isGroupFullySelected(t)&&!s.isGroupPartiallySelected(t))),e.xp6(2),e.Oqu(t.label),e.xp6(2),e.hij("(",t.items.length," f\u0151)")}}function ut(o,i){1&o&&(e.TgZ(0,"span",21),e._uU(1,"\u2744\ufe0f"),e.qZA())}function dt(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(", ",t.bathroom,"")}}function pt(o,i){if(1&o&&(e.TgZ(0,"div")(1,"div",13)(2,"div",14)(3,"div",15)(4,"span",16),e._uU(5),e.TgZ(6,"span",17),e._uU(7),e.qZA(),e.YNc(8,ut,2,0,"span",18),e.qZA(),e.TgZ(9,"span",19),e._uU(10),e.YNc(11,dt,2,1,"span",20),e._uU(12,") "),e.qZA()()()()()),2&o){const t=i.$implicit,s=e.oxw();e.Gre("building-badge ",s.getColorByRoomType(t.roomType)," border-round-xl w-min p-0"),e.xp6(2),e.MGl("pTooltip","Szoba k\xf3d: ",t.roomCode,""),e.xp6(3),e.AsE(" ",t.lastName," ",t.firstName," "),e.xp6(2),e.hij("(",s.getAge(t.birthDate),")"),e.xp6(1),e.Q6J("ngIf",t.climate),e.xp6(2),e.AsE(" ",t.beds," SZEM\xc9LYES (",t.bedType,""),e.xp6(1),e.Q6J("ngIf",t.bathroom)}}function mt(o,i){if(1&o&&(e.TgZ(0,"div")(1,"div",13)(2,"div",22)(3,"div",15)(4,"span",16),e._uU(5),e.TgZ(6,"span",17),e._uU(7),e.qZA()(),e.TgZ(8,"span",19),e._uU(9),e.qZA(),e.TgZ(10,"div",23),e._uU(11),e.qZA()()()()()),2&o){const t=i.$implicit,s=e.oxw();e.Gre("color-badge ",s.getColorByRoomType(t.roomType)," border-round-xl w-min p-0"),e.xp6(2),e.s9C("pTooltip",t.roomMate),e.xp6(3),e.AsE(" ",t.lastName," ",t.firstName," "),e.xp6(2),e.hij("(",s.getAge(t.birthDate),")"),e.xp6(2),e.hij(" ",t.roomType," "),e.xp6(2),e.hij(" ",t.roomMate," ")}}Z.locale("hu");let ht=(()=>{class o{set preselectIds(t){const n=(Array.isArray(t)?t:null!=t?[t]:[]).map(r=>"string"==typeof r?Number(r):r).filter(r=>Number.isFinite(r));this._pendingSelectIds=n.length?n:void 0,this.preselectByIds()}runSilently(t){this.suppress++;try{return t()}finally{this.suppress--}}constructor(t,s,n){this.guestService=t,this.messageService=s,this.cdr=n,this.filter=null,this.selectFirstOption=!1,this.showClear=!0,this.style={},this.disabledOptions=[],this.showOnlyNotReserved=!1,this.groupByRoomMate=!1,this.emitOnSelectFirstOption=!1,this.emitOnPreselectId=!1,this.emitOnWriteValue=!1,this.change=new e.vpe,this.loading=!0,this.disabled=!1,this.guests=[],this.originalGuests=[],this.selectedGuests=[],this.groupedGuests=[],this.roomTypes=[{value:"Nem k\xe9rek sz\xe1ll\xe1st",color:"gray"},{value:"Kast\xe9ly sz\xe1ll\xe1s 4 \xe1gyas szoba",color:"teal"},{value:"Kast\xe9ly sz\xe1ll\xe1s 6 \xe1gyas szoba",color:"teal"},{value:"Kast\xe9ly sz\xe1ll\xe1s 8 \xe1gyas szoba",color:"teal"},{value:"Maranatha Panzi\xf3h\xe1z 2 \xe1gyas szoba (k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{value:"Maranatha Panzi\xf3h\xe1z francia\xe1gyas szoba (k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{value:"Maranatha Panzi\xf3h\xe1z 4 \xe1gyas szoba (emeletes \xe1gyas, k\xfcl\xf6n f\xfcrd\u0151s)",color:"yellow"},{value:"Csal\xe1di szoba (k\xf6z\xf6s konyh\xe1val, f\xfcrd\u0151vel \xe9s nappalival)",color:"orange"}],this.subscriptions=new ve.w0,this.suppress=0,this.roomTypeColorMap=new Map(this.roomTypes.map(r=>[r.value.toLowerCase(),r.color])),this.onChange=r=>{},this.onTouched=()=>{}}ngOnInit(){this.reload()}ngOnChanges(t){t.filter&&this.reload(),t.preselectIds&&this.preselectByIds()}ngOnDestroy(){this.subscriptions.unsubscribe()}reload(){this.loading=!0;const t={...this.filter??{},onlyNotReserved:this.showOnlyNotReserved||(this.filter?.onlyNotReserved??!1)};if(t.onlyNotReserved&&!t.conferenceId)return this.guests=[],this.loading=!1,void this.cdr.markForCheck();const s=(this.selectedGuests??[]).map(l=>this.toNumId(l?.id)).filter(l=>null!=l),r=Array.from(new Set([...s,...this._pendingSelectIds??[]])),a={...t,...r.length?{includeGuestIds:r}:{}};this.reloadSub?.unsubscribe(),this.reloadSub=this.guestService.searchGuestsForSelector$(a).subscribe({next:l=>{let u=(l??[]).map(p=>({...p,fullName:`${p.lastName??""} ${p.firstName??""}`.trim()}));this.guests=u,this.groupedGuests=this.groupByRoomMate?this.buildRoomMateGroups(u):[],this.loading=!1,this.syncSelectedGuests(),this.preselectByIds(),this.handleSelectFirstOption(),this.cdr.markForCheck()},error:l=>{this.guests=[],this.loading=!1,this.cdr.markForCheck(),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load guests."})}}),this.subscriptions.add(this.reloadSub)}preselectByIds(){if(!this.guests?.length||!this._pendingSelectIds?.length)return;const t=new Set(this._pendingSelectIds),s=this.guests.filter(l=>{const u=this.toNumId(l?.id);return null!=u&&t.has(u)}),r=Number.isFinite(this.selectionLimit)&&this.selectionLimit>0?this.selectionLimit:s.length,a=s.slice(0,r);this.runSilently(()=>{this.selectedGuests=a,this.guestSelectorRef?.writeValue(this.selectedGuests)}),this.onChange(this.selectedGuests),this.onTouched(),this.emitOnPreselectId&&this.emit(this.selectedGuests,"preselect-id",!0),this._pendingSelectIds=void 0}buildRoomMateGroups(t){const s=m=>(m??"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g," ").trim(),n=m=>`${m.lastName??""} ${m.firstName??""}`.trim()||(m.fullName??""),r=[];for(const m of t){const b=this.toNumId(m?.id);null!=b&&r.push({id:b,name:s(`${m.lastName??""} ${m.firstName??""}`),mates:s(m.roomMate),guest:m})}const a=new Map,l=new Map;r.forEach(m=>l.set(m.id,m));const u=m=>{let b=a.get(m);return b||(b=new Set,a.set(m,b)),b};for(let m=0;m<r.length;m++){const b=r[m];for(let f=m+1;f<r.length;f++){const S=r[f];b.name&&S.name&&(b.mates&&b.mates.includes(S.name)||S.mates&&S.mates.includes(b.name))&&(u(b.id).add(S.id),u(S.id).add(b.id))}}const p=new Set,g=new Set,x=[],w=m=>{const b=[m],f=[];for(p.add(m);b.length;){const S=b.pop();f.push(S);const A=a.get(S);if(A)for(const L of A)p.has(L)||(p.add(L),b.push(L))}return f.forEach(S=>g.add(S)),f};for(const m of a.keys()){if(p.has(m))continue;const b=w(m);if(b.length>=2){const f=b.map(N=>l.get(N)).filter(N=>!!N);let S,A=-1;for(const N of f){let M=0;for(const K of f)K.id!==N.id&&K.mates&&K.mates.includes(N.name)&&M++;(M>A||M===A&&S&&N.id<S.id)&&(A=M,S=N)}const L=n(S?S.guest:f[0].guest),ne=f.map(N=>N.guest).sort((N,M)=>s(n(N)).localeCompare(s(n(M)))),q=[];for(const N of f){const M=N.guest.roomMate;if(M&&"string"==typeof M&&M.trim().length>0){const K=n(N.guest);q.push(`${K}: "${M.trim()}"`)}}const Us=q.length>0?q.join("\n"):"K\xf6zvetett kapcsolat r\xe9v\xe9n";x.push({groupId:x.length,label:L?`${L} csoport`:"Szobat\xe1rs csoport",items:ne,explanation:Us})}}const k=[];return r.forEach(m=>{g.has(m.id)||k.push(m.guest)}),k.length&&(k.sort((m,b)=>s(n(m)).localeCompare(s(n(b)))),x.push({groupId:x.length,label:"Nincs megadott szobat\xe1rs / egyed\xfcl lakna",items:k})),x.sort((m,b)=>{const f=b.items.length-m.items.length;return 0!==f?f:m.label.localeCompare(b.label)}),x}getGroupIds(t){return(t.items??[]).map(s=>this.toNumId(s?.id)).filter(s=>null!=s)}isGroupFullySelected(t){const s=this.getGroupIds(t);if(!s.length||!this.selectedGuests?.length)return!1;const n=new Set((this.selectedGuests??[]).map(r=>this.toNumId(r?.id)).filter(r=>null!=r));return s.every(r=>n.has(r))}isGroupPartiallySelected(t){const s=this.getGroupIds(t);if(!s.length||!this.selectedGuests?.length)return!1;const n=new Set((this.selectedGuests??[]).map(a=>this.toNumId(a?.id)).filter(a=>null!=a)),r=s.filter(a=>n.has(a)).length;return r>0&&r<s.length}toggleGroupSelection(t,s){s&&(s.stopPropagation(),s.preventDefault());const n=t.items??[],r=this.selectedGuests??[],a=new Set(r.map(g=>this.toNumId(g?.id)).filter(g=>null!=g)),l=this.getGroupIds(t),u=l.length>0&&l.every(g=>a.has(g));let p=r.slice();if(u)p=p.filter(g=>{const x=this.toNumId(g?.id);return null==x||!l.includes(x)});else{for(const w of n){const k=this.toNumId(w?.id);null!=k&&!a.has(k)&&p.push(w)}const x=Number.isFinite(this.selectionLimit)&&this.selectionLimit>0?this.selectionLimit:p.length;p.length>x&&(p=p.slice(0,x))}this.runSilently(()=>{this.selectedGuests=p,this.guestSelectorRef?.writeValue(this.selectedGuests)}),this.emit(this.selectedGuests,"user",!0),this.cdr.markForCheck()}setSelection(t,s){const n=s?.source??"programmatic";this.runSilently(()=>{this.selectedGuests=t?.slice(0,this.selectionLimit??t.length)??[]}),s?.emit&&this.emit(this.selectedGuests,n,!0)}handleSelectFirstOption(){this.selectFirstOption&&0===this.selectedGuests.length&&this.guests.length&&(this.runSilently(()=>{this.selectedGuests=this.guests.slice(0,this.selectionLimit??1)}),this.emitOnSelectFirstOption&&this.emit(this.selectedGuests,"auto-select-first",!0))}setDisabledState(t){this.disabled=t,this.guestSelectorRef&&(this.guestSelectorRef.disabled=t)}syncSelectedGuests(){this.selectedGuests=this.guests.filter(t=>{const s=this.toNumId(t?.id);return null!=s&&this.selectedGuests.some(n=>this.toNumId(n?.id)===s)}),this.onChange(this.selectedGuests)}onSelectionChange(t){this.selectedGuests=t.value,this.emit(this.selectedGuests,"user"),1==this.selectionLimit&&this.selectedGuests?.length>=1&&setTimeout(()=>this.guestSelectorRef?.hide())}onSelectionClear(){this.runSilently(()=>{this.selectedGuests=[],this.guestSelectorRef?.writeValue([])}),this.emit(this.selectedGuests,"user",!0)}emit(t,s,n=!1){this.suppress&&!n||(this.onChange(t),this.onTouched(),this.change.emit({value:t,source:s}))}toNumId(t){return"number"==typeof t&&Number.isFinite(t)?t:"string"==typeof t&&""!==t.trim()&&Number.isFinite(+t)?+t:null}getAge(t){if(!t)return"";const s=Z(t);return Z().diff(s,"years").toString()}getColorByRoomType(t){return t?this.roomTypeColorMap.get(t.trim().toLowerCase())??"":""}removeGuest(t){const s=(this.selectedGuests??[]).filter(n=>n.id!==t.id);this.selectedGuests=s,"function"==typeof this.onChange&&this.onChange(this.selectedGuests)}clearAllGuests(){this.selectedGuests=[],"function"==typeof this.onChange&&this.onChange(this.selectedGuests)}trackByGuestId(t,s){return s.id}writeValue(t){const s=Array.isArray(t)?t:t?[t]:[],r=Number.isFinite(this.selectionLimit)&&this.selectionLimit>0?this.selectionLimit:s.length;this.runSilently(()=>{this.selectedGuests=s.slice(0,r),this.guestSelectorRef?.writeValue(this.selectedGuests)}),this.emitOnWriteValue&&this.emit(this.selectedGuests,"programmatic",!0)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(s){return new(s||o)(e.Y36(nt.Q),e.Y36(E.ez),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-guest-selector"]],viewQuery:function(s,n){if(1&s&&e.Gf(ot,5),2&s){let r;e.iGM(r=e.CRH())&&(n.guestSelectorRef=r.first)}},inputs:{filter:"filter",selectionLimit:"selectionLimit",selectFirstOption:"selectFirstOption",placeholder:"placeholder",showClear:"showClear",style:"style",disabledOptions:"disabledOptions",showOnlyNotReserved:"showOnlyNotReserved",groupByRoomMate:"groupByRoomMate",emitOnSelectFirstOption:"emitOnSelectFirstOption",emitOnPreselectId:"emitOnPreselectId",emitOnWriteValue:"emitOnWriteValue",preselectIds:"preselectIds"},outputs:{change:"change"},features:[e._Bn([{provide:v.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:7,vars:15,consts:[["class","flex flex-wrap gap-2 mb-2",4,"ngIf"],["panelStyleClass","guest-multiselect-panel","dataKey","id","optionLabel","fullName","optionDisabled","disabled","optionGroupChildren","items","filterBy","lastName,firstName,roomMate","styleClass","height:53px","scrollHeight","400px","appendTo","body","display","chip",1,"multiselect-custom-virtual-scroll",3,"options","group","ngModel","disabled","selectionLimit","placeholder","emptyMessage","virtualScroll","virtualScrollItemSize","showClear","ngModelChange","onChange","onClear"],["guestSelector",""],["pTemplate","group"],["pTemplate","item"],["pTemplate","selectedItem"],[1,"flex","flex-wrap","gap-2","mb-2"],["icon","pi pi-user","tooltipPosition","top",3,"label","removable","styleClass","pTooltip","onRemove",4,"ngFor","ngForOf","ngForTrackBy"],["icon","pi pi-user","tooltipPosition","top",3,"label","removable","styleClass","pTooltip","onRemove"],["tooltipPosition","top",1,"flex","align-items-center","px-1","cursor-pointer","bg-surface-100",3,"pTooltip","click"],[1,"pi","mr-2",2,"font-size","1.3rem",3,"ngClass"],[1,"font-semibold"],[1,"ml-2","text-xs","text-500"],[1,"flex","align-items-center","justify-content-center","py-1","px-1"],["tooltipPosition","top",1,"block","min-w-max","border-left-1","px-2",3,"pTooltip"],[1,"flex","flex-column","align-items-left","justify-content-center"],[1,"text-base","font-semibold","uppercase"],[1,"font-normal","text-sm","uppercase"],["class","pl-1",4,"ngIf"],[1,"font-light","text-xs","uppercase"],[4,"ngIf"],[1,"pl-1"],["tooltipPosition","top",1,"block","min-w-max",3,"pTooltip"],[1,"font-light","text-xs","white-space-nowrap","overflow-hidden","text-overflow-ellipsis","max-w-30rem"]],template:function(s,n){1&s&&(e.YNc(0,at,2,2,"div",0),e.TgZ(1,"p-multiSelect",1,2),e.NdJ("ngModelChange",function(a){return n.selectedGuests=a})("onChange",function(a){return n.onSelectionChange(a)})("onClear",function(){return n.onSelectionClear()}),e.ALo(3,"translate"),e.YNc(4,ct,6,8,"ng-template",3),e.YNc(5,pt,13,11,"ng-template",4),e.YNc(6,mt,12,9,"ng-template",5),e.qZA()),2&s&&(e.Q6J("ngIf",null==n.selectedGuests?null:n.selectedGuests.length),e.xp6(1),e.Akn(n.style),e.s9C("emptyMessage",e.lcZ(3,13,"Nincs tal\xe1lat...")),e.Q6J("options",n.groupByRoomMate?n.groupedGuests:n.guests)("group",n.groupByRoomMate)("ngModel",n.selectedGuests)("disabled",n.disabled)("selectionLimit",n.selectionLimit)("placeholder",n.placeholder)("virtualScroll",!n.groupByRoomMate)("virtualScrollItemSize",n.groupByRoomMate?0:65)("showClear",n.showClear))},dependencies:[_.mk,_.sg,_.O5,v.JJ,v.On,ye.A,E.jx,be.NU,W.u,Y.X$],styles:['@charset "UTF-8";[_nghost-%COMP%]     .guest-multiselect-panel .p-multiselect-items .p-multiselect-item{padding:.15rem .5rem!important}[_nghost-%COMP%]     .guest-multiselect-panel .p-multiselect-item-group{padding:.2rem .5rem!important}'],changeDetection:0})}return o})();var Ce=c(8039),xe=c(8676),Se=c(3212),Te=c(6218),D=c(6825),B=c(2076),Ie=c(2591),Ee=c(7778),X=c(2332);const gt=["content"];function ft(o,i){1&o&&e.GkF(0)}function _t(o,i){if(1&o&&(e.TgZ(0,"div",10),e.YNc(1,ft,1,0,"ng-container",11),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t.headerTemplate)}}function vt(o,i){if(1&o&&(e.TgZ(0,"span",15),e._uU(1),e.qZA()),2&o){const t=e.oxw(4);e.xp6(1),e.Oqu(t.option("header"))}}const bt=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function yt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(n){e.CHM(t);const r=e.oxw(4);return e.KtG(r.close(n))})("keydown.enter",function(n){e.CHM(t);const r=e.oxw(4);return e.KtG(r.close(n))}),e._UZ(1,"TimesIcon"),e.qZA()}2&o&&e.Q6J("ngClass",e.DdM(1,bt))}function Ct(o,i){if(1&o&&(e.TgZ(0,"div",10),e.YNc(1,vt,2,1,"span",12),e.TgZ(2,"div",13),e.YNc(3,yt,2,2,"button",14),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.option("header")),e.xp6(2),e.Q6J("ngIf",t.closable)}}function xt(o,i){if(1&o&&e._UZ(0,"i",1),2&o){const t=e.oxw(3);e.Tol(t.option("icon")),e.Q6J("ngClass","p-confirm-dialog-icon")}}function St(o,i){1&o&&e.GkF(0)}function Tt(o,i){if(1&o&&(e.TgZ(0,"div",17),e.Hsn(1),e.YNc(2,St,1,0,"ng-container",11),e.qZA()),2&o){const t=e.oxw(3);e.xp6(2),e.Q6J("ngTemplateOutlet",t.footerTemplate)}}function It(o,i){if(1&o&&e._UZ(0,"i"),2&o){const t=e.oxw(6);e.Tol(t.option("rejectIcon"))}}function Et(o,i){1&o&&e._UZ(0,"TimesIcon",24),2&o&&e.Q6J("styleClass","p-button-icon-left")}function At(o,i){if(1&o&&(e.ynx(0),e.YNc(1,It,1,2,"i",22),e.YNc(2,Et,1,1,"TimesIcon",23),e.BQk()),2&o){const t=e.oxw(5);e.xp6(1),e.Q6J("ngIf",t.option("rejectIcon")),e.xp6(1),e.Q6J("ngIf",!t.option("rejectIcon"))}}function Rt(o,i){}function Ft(o,i){1&o&&e.YNc(0,Rt,0,0,"ng-template")}function Zt(o,i){if(1&o&&(e.TgZ(0,"span",25),e.YNc(1,Ft,1,0,null,11),e.qZA()),2&o){const t=e.oxw(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t.rejectIconTemplate)}}function wt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(4);return e.KtG(n.reject())}),e.YNc(1,At,3,2,"ng-container",20),e.YNc(2,Zt,2,1,"span",21),e.qZA()}if(2&o){const t=e.oxw(4);e.Tol(t.option("rejectButtonStyleClass")),e.Q6J("label",t.rejectButtonLabel)("ngClass","p-confirm-dialog-reject"),e.uIk("aria-label",t.rejectAriaLabel),e.xp6(1),e.Q6J("ngIf",!t.rejectIconTemplate),e.xp6(1),e.Q6J("ngIf",t.rejectIconTemplate)}}function Nt(o,i){if(1&o&&e._UZ(0,"i"),2&o){const t=e.oxw(6);e.Tol(t.option("acceptIcon"))}}function kt(o,i){1&o&&e._UZ(0,"CheckIcon",24),2&o&&e.Q6J("styleClass","p-button-icon-left")}function Dt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Nt,1,2,"i",22),e.YNc(2,kt,1,1,"CheckIcon",23),e.BQk()),2&o){const t=e.oxw(5);e.xp6(1),e.Q6J("ngIf",t.option("acceptIcon")),e.xp6(1),e.Q6J("ngIf",!t.option("acceptIcon"))}}function Mt(o,i){}function Ot(o,i){1&o&&e.YNc(0,Mt,0,0,"ng-template")}function zt(o,i){if(1&o&&(e.TgZ(0,"span",25),e.YNc(1,Ot,1,0,null,11),e.qZA()),2&o){const t=e.oxw(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t.acceptIconTemplate)}}function Lt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(4);return e.KtG(n.accept())}),e.YNc(1,Dt,3,2,"ng-container",20),e.YNc(2,zt,2,1,"span",21),e.qZA()}if(2&o){const t=e.oxw(4);e.Tol(t.option("acceptButtonStyleClass")),e.Q6J("label",t.acceptButtonLabel)("ngClass","p-confirm-dialog-accept"),e.uIk("aria-label",t.acceptAriaLabel),e.xp6(1),e.Q6J("ngIf",!t.acceptIconTemplate),e.xp6(1),e.Q6J("ngIf",t.acceptIconTemplate)}}function Gt(o,i){if(1&o&&(e.TgZ(0,"div",17),e.YNc(1,wt,3,7,"button",18),e.YNc(2,Lt,3,7,"button",18),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.option("rejectVisible")),e.xp6(1),e.Q6J("ngIf",t.option("acceptVisible"))}}const Bt=function(o){return{"p-dialog p-confirm-dialog p-component":!0,"p-dialog-rtl":o}},$t=function(o,i){return{transform:o,transition:i}},Ut=function(o){return{value:"visible",params:o}};function jt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("@animation.start",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onAnimationStart(n))})("@animation.done",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onAnimationEnd(n))}),e.YNc(1,_t,2,1,"div",4),e.YNc(2,Ct,4,2,"div",4),e.TgZ(3,"div",5,6),e.YNc(5,xt,1,3,"i",7),e._UZ(6,"span",8),e.qZA(),e.YNc(7,Tt,3,1,"div",9),e.YNc(8,Gt,3,2,"div",9),e.qZA()}if(2&o){const t=e.oxw(2);e.Tol(t.styleClass),e.Q6J("ngClass",e.VKq(11,Bt,t.rtl))("ngStyle",t.style)("@animation",e.VKq(16,Ut,e.WLB(13,$t,t.transformOptions,t.transitionOptions))),e.xp6(1),e.Q6J("ngIf",t.headerTemplate),e.xp6(1),e.Q6J("ngIf",!t.headerTemplate),e.xp6(3),e.Q6J("ngIf",t.option("icon")),e.xp6(1),e.Q6J("innerHTML",t.option("message"),e.oJD),e.xp6(1),e.Q6J("ngIf",t.footer||t.footerTemplate),e.xp6(1),e.Q6J("ngIf",!t.footer&&!t.footerTemplate)}}function Yt(o,i){if(1&o&&(e.TgZ(0,"div",1),e.YNc(1,jt,9,18,"div",2),e.qZA()),2&o){const t=e.oxw();e.Tol(t.maskStyleClass),e.Q6J("ngClass",t.getMaskClass()),e.xp6(1),e.Q6J("ngIf",t.visible)}}const Jt=[[["p-footer"]]],Qt=["p-footer"],Vt=(0,D.oQ)([(0,D.oB)({transform:"{{transform}}",opacity:0}),(0,D.jt)("{{transition}}",(0,D.oB)({transform:"none",opacity:1}))]),Pt=(0,D.oQ)([(0,D.jt)("{{transition}}",(0,D.oB)({transform:"{{transform}}",opacity:0}))]);let qt=(()=>{class o{el;renderer;confirmationService;zone;cd;config;document;header;icon;message;get style(){return this._style}set style(t){this._style=t,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo;key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(t){this._visible=t,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(t){switch(this._position=t,t){case"top-left":case"bottom-left":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"top-right":case"bottom-right":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}onHide=new e.vpe;footer;contentViewChild;templates;ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"header":this.headerTemplate=t.template;break;case"footer":this.footerTemplate=t.template;break;case"rejecticon":this.rejectIconTemplate=t.template;break;case"accepticon":this.acceptIconTemplate=t.template}})}headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;confirmation;_visible;_style;maskVisible;documentEscapeListener;container;wrapper;contentContainer;subscription;maskClickListener;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=(0,X.Th)();confirmationOptions;translationSubscription;constructor(t,s,n,r,a,l,u){this.el=t,this.renderer=s,this.confirmationService=n,this.zone=r,this.cd=a,this.config=l,this.document=u,this.subscription=this.confirmationService.requireConfirmation$.subscribe(p=>{p?p.key===this.key&&(this.confirmation=p,this.confirmationOptions={message:this.confirmation.message||this.message,icon:this.confirmation.icon||this.icon,header:this.confirmation.header||this.header,rejectVisible:null==this.confirmation.rejectVisible?this.rejectVisible:this.confirmation.rejectVisible,acceptVisible:null==this.confirmation.acceptVisible?this.acceptVisible:this.confirmation.acceptVisible,acceptLabel:this.confirmation.acceptLabel||this.acceptLabel,rejectLabel:this.confirmation.rejectLabel||this.rejectLabel,acceptIcon:this.confirmation.acceptIcon||this.acceptIcon,rejectIcon:this.confirmation.rejectIcon||this.rejectIcon,acceptButtonStyleClass:this.confirmation.acceptButtonStyleClass||this.acceptButtonStyleClass,rejectButtonStyleClass:this.confirmation.rejectButtonStyleClass||this.rejectButtonStyleClass,defaultFocus:this.confirmation.defaultFocus||this.defaultFocus,blockScroll:!1===this.confirmation.blockScroll||!0===this.confirmation.blockScroll?this.confirmation.blockScroll:this.blockScroll,closeOnEscape:!1===this.confirmation.closeOnEscape||!0===this.confirmation.closeOnEscape?this.confirmation.closeOnEscape:this.closeOnEscape,dismissableMask:!1===this.confirmation.dismissableMask||!0===this.confirmation.dismissableMask?this.confirmation.dismissableMask:this.dismissableMask},this.confirmation.accept&&(this.confirmation.acceptEvent=new e.vpe,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new e.vpe,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}ngOnInit(){this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}option(t){const s=this.confirmationOptions||this;if(s.hasOwnProperty(t))return s[t]}onAnimationStart(t){if("visible"===t.toState){this.container=t.element,this.wrapper=this.container?.parentElement,this.contentContainer=B.p.findSingle(this.container,".p-dialog-content"),this.container?.setAttribute(this.id,""),this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.enableModality();const s=this.getElementToFocus();s&&s.focus()}}onAnimationEnd(t){"void"===t.toState&&this.onOverlayHide()}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":default:return B.p.findSingle(this.container,".p-confirm-dialog-accept");case"reject":return B.p.findSingle(this.container,".p-confirm-dialog-reject");case"close":return B.p.findSingle(this.container,".p-dialog-header-close");case"none":return null}}appendContainer(){this.appendTo&&("body"===this.appendTo?this.document.body.appendChild(this.wrapper):B.p.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.wrapper&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}enableModality(){this.option("blockScroll")&&B.p.addClass(this.document.body,"p-overflow-hidden"),this.option("dismissableMask")&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",t=>{this.wrapper&&this.wrapper.isSameNode(t.target)&&this.close(t)}))}disableModality(){this.maskVisible=!1,this.option("blockScroll")&&B.p.removeClass(this.document.body,"p-overflow-hidden"),this.dismissableMask&&this.unbindMaskClickListener(),this.container&&!this.cd.destroyed&&this.cd.detectChanges()}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",this.document.head.appendChild(this.styleElement);let t="";for(let s in this.breakpoints)t+=`\n                    @media screen and (max-width: ${s}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[s]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=t}}close(t){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(E.wB.CANCEL),this.hide(E.wB.CANCEL),t.preventDefault()}hide(t){this.onHide.emit(t),this.visible=!1,this.confirmation=null,this.confirmationOptions=null}moveOnTop(){this.autoZIndex&&(X.P9.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}getMaskClass(){let t={"p-dialog-mask p-component-overlay":!0,"p-dialog-mask-scrollblocker":this.blockScroll};return t[this.getPositionClass().toString()]=!0,t}getPositionClass(){const s=["left","right","top","top-left","top-right","bottom","bottom-left","bottom-right"].find(n=>n===this.position);return s?`p-dialog-${s}`:""}bindGlobalListeners(){(this.option("closeOnEscape")&&this.closable||this.focusTrap&&!this.documentEscapeListener)&&(this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",s=>{if(27==s.which&&this.option("closeOnEscape")&&this.closable&&parseInt(this.container.style.zIndex)===X.P9.get(this.container)&&this.visible&&this.close(s),9===s.which&&this.focusTrap){s.preventDefault();let n=B.p.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);s.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}))}unbindGlobalListeners(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}onOverlayHide(){this.container&&this.autoZIndex&&X.P9.clear(this.container),this.disableModality(),this.unbindGlobalListeners(),this.container=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.restoreAppend(),this.onOverlayHide(),this.subscription.unsubscribe(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle()}accept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(E.wB.ACCEPT)}reject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(E.wB.REJECT),this.hide(E.wB.REJECT)}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(E.ws.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(E.ws.REJECT)}static \u0275fac=function(s){return new(s||o)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(E.YP),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(E.b4),e.Y36(_.K0))};static \u0275cmp=e.Xpm({type:o,selectors:[["p-confirmDialog"]],contentQueries:function(s,n,r){if(1&s&&(e.Suo(r,E.$_,5),e.Suo(r,E.jx,4)),2&s){let a;e.iGM(a=e.CRH())&&(n.footer=a.first),e.iGM(a=e.CRH())&&(n.templates=a)}},viewQuery:function(s,n){if(1&s&&e.Gf(gt,5),2&s){let r;e.iGM(r=e.CRH())&&(n.contentViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:"acceptVisible",rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:"rejectVisible",acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",blockScroll:"blockScroll",rtl:"rtl",closable:"closable",appendTo:"appendTo",key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",transitionOptions:"transitionOptions",focusTrap:"focusTrap",defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position"},outputs:{onHide:"onHide"},ngContentSelectors:Qt,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle"],["class","p-dialog-header",4,"ngIf"],[1,"p-dialog-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-dialog-message",3,"innerHTML"],["class","p-dialog-footer",4,"ngIf"],[1,"p-dialog-header"],[4,"ngTemplateOutlet"],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button",3,"ngClass","click","keydown.enter"],[1,"p-dialog-footer"],["type","button","pRipple","","pButton","",3,"label","ngClass","class","click",4,"ngIf"],["type","button","pRipple","","pButton","",3,"label","ngClass","click"],[4,"ngIf"],["class","p-button-icon-left",4,"ngIf"],[3,"class",4,"ngIf"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],[1,"p-button-icon-left"]],template:function(s,n){1&s&&(e.F$t(Jt),e.YNc(0,Yt,2,4,"div",0)),2&s&&e.Q6J("ngIf",n.maskVisible)},dependencies:function(){return[_.mk,_.O5,_.tP,_.PC,P.Hq,H.H,Ee.q,Ie.n]},styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[(0,D.X$)("animation",[(0,D.eR)("void => visible",[(0,D._7)(Vt)]),(0,D.eR)("visible => void",[(0,D._7)(Pt)])])]},changeDetection:0})}return o})(),Kt=(()=>{class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=e.oAB({type:o});static \u0275inj=e.cJS({imports:[_.ez,P.hJ,H.T,Ee.q,Ie.n,P.hJ,E.m8]})}return o})();const Ht=function(){return{minWidth:"35rem"}};function Wt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"h5",18),e._uU(2,"Foglal\xe1sok"),e.qZA(),e.TgZ(3,"span",19)(4,"app-conference-selector",20),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedConferences=n)})("ngModelChange",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.doQuery())}),e.qZA()(),e.TgZ(5,"span",21)(6,"div",22)(7,"div",23)(8,"div",24),e.O4$(),e.TgZ(9,"svg",25),e._UZ(10,"g",26)(11,"g",27),e.TgZ(12,"g",28)(13,"g",29)(14,"g",30),e._UZ(15,"path",31),e.qZA()()()(),e.kcU(),e.TgZ(16,"span",32),e._uU(17),e.qZA()()()()(),e.TgZ(18,"span",21)(19,"div",22)(20,"div",23)(21,"div",24),e._UZ(22,"i",33),e.TgZ(23,"span",32),e._uU(24),e.qZA()()()()(),e.TgZ(25,"span",21)(26,"div",34)(27,"div",23)(28,"div",24),e._UZ(29,"i",33),e.TgZ(30,"span",32),e._uU(31),e.qZA()()()()(),e.TgZ(32,"span",21)(33,"div",35)(34,"div",23)(35,"div",24),e._UZ(36,"i",33),e.TgZ(37,"span",32),e._uU(38),e.qZA()()()()(),e.TgZ(39,"span",19)(40,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.create())}),e.qZA(),e.TgZ(41,"button",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.bulkDeleteDialog=!0)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Akn(e.DdM(17,Ht)),e.Q6J("ngModel",t.selectedConferences)("emitOnSelectFirstOption",!0)("showNoneOption",!1)("selectionLimit",1)("showClear",!0),e.xp6(2),e.MGl("pTooltip","\xc1gyak sz\xe1ma: ",t.totalBeds,""),e.xp6(11),e.hij(" ",t.totalBeds," "),e.xp6(2),e.MGl("pTooltip","Regisztr\xe1lt vend\xe9gek: ",t.registeredGuests,""),e.xp6(5),e.hij(" ",t.registeredGuests," "),e.xp6(2),e.MGl("pTooltip","Vend\xe9gek foglal\xe1ssal: ",t.reservedGuests,""),e.xp6(5),e.hij(" ",t.reservedGuests," "),e.xp6(2),e.MGl("pTooltip","Szob\xe1ra v\xe1r\xf3k: ",t.waitingForRoom,""),e.xp6(5),e.hij(" ",t.waitingForRoom," "),e.xp6(2),e.Q6J("disabled",!t.canCreate),e.xp6(1),e.Q6J("disabled",!t.selected||!t.selected.length||!t.canDelete)}}function Xt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th",38),e._uU(3,"Szoba "),e._UZ(4,"p-sortIcon",39),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Vend\xe9gek"),e.qZA(),e.TgZ(7,"th",40),e._uU(8,"\xc9rkez\xe9s "),e._UZ(9,"p-sortIcon",41),e.qZA(),e.TgZ(10,"th",42),e._uU(11,"T\xe1voz\xe1s "),e._UZ(12,"p-sortIcon",43),e.qZA(),e.TgZ(13,"th",44),e._uU(14,"St\xe1tusz "),e._UZ(15,"p-sortIcon",45),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Megjegyz\xe9s"),e.qZA(),e._UZ(18,"th"),e.qZA(),e.TgZ(19,"tr")(20,"th",46),e._UZ(21,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(22,"th")(23,"input",47),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"room.roomNum"))}),e.qZA(),e.TgZ(24,"app-building-selector",48),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"room.building"))}),e.qZA(),e.TgZ(25,"app-bedtype-selector",49),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"room.bedType"))}),e.qZA()(),e.TgZ(26,"th")(27,"input",50),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"guests"))}),e.qZA()(),e.TgZ(28,"th")(29,"p-calendar",51),e.NdJ("onSelect",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"startDate"))})("onClearClick",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"startDate"))}),e.qZA()(),e.TgZ(30,"th")(31,"p-calendar",51),e.NdJ("onSelect",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"endDate"))})("onClearClick",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"endDate"))}),e.qZA()(),e.TgZ(32,"th")(33,"app-reservation-status-selector",52),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"status"))}),e.qZA()(),e.TgZ(34,"th")(35,"input",53),e.NdJ("input",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onFilter(n,"notes"))}),e.qZA()(),e._UZ(36,"th"),e.qZA()}2&o&&(e.xp6(24),e.Q6J("showClear",!0),e.xp6(1),e.Q6J("showClear",!0),e.xp6(4),e.Q6J("showButtonBar",!0),e.xp6(2),e.Q6J("showButtonBar",!0),e.xp6(2),e.Q6J("showClear",!0))}function es(o,i){if(1&o&&(e.TgZ(0,"span",74),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij("(",t.room.floor,")")}}function ts(o,i){1&o&&(e.TgZ(0,"span",75),e._uU(1,"\u2744\ufe0f"),e.qZA())}function ss(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(", ",t.room.bathroom,"")}}function is(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"img",81),e.BQk()),2&o){const t=e.oxw(2).ngIf,s=e.oxw(2);e.xp6(1),e.cQ8("pTooltip","Baba\xe1gyra ker\xfcl: ",t[0].lastName," ",t[0].firstName," (",s.getAge(t[0].birthDate),")")}}function ns(o,i){if(1&o&&(e._UZ(0,"img",81),e.TgZ(1,"span",82),e._uU(2),e.qZA()),2&o){const t=e.oxw(2).ngIf,s=e.oxw(2);e.MGl("pTooltip","Baba\xe1gyra ker\xfclnek: ",s.getBabyBedTooltip(t),""),e.xp6(2),e.hij(" ",t.length," ")}}function os(o,i){if(1&o&&(e.TgZ(0,"div",77)(1,"div",23)(2,"div",78),e.YNc(3,is,2,3,"ng-container",79),e.YNc(4,ns,3,2,"ng-template",null,80,e.W1O),e.qZA()()()),2&o){const t=e.MAs(5),s=e.oxw().ngIf;e.xp6(3),e.Q6J("ngIf",1===s.length)("ngIfElse",t)}}function rs(o,i){if(1&o&&(e.ynx(0),e.YNc(1,os,6,2,"div",76),e.BQk()),2&o){const t=i.ngIf;e.xp6(1),e.Q6J("ngIf",t.length>0)}}function as(o,i){if(1&o&&(e.TgZ(0,"div",84)(1,"div",23)(2,"div",78),e._UZ(3,"img",85),e.TgZ(4,"span",82),e._uU(5),e.qZA()()()()),2&o){const t=e.oxw().ngIf;e.xp6(3),e.MGl("pTooltip","Matrac ",t," f\u0151 r\xe9sz\xe9re"),e.xp6(2),e.hij(" ",t," ")}}function ls(o,i){if(1&o&&(e.ynx(0),e.YNc(1,as,6,2,"div",83),e.BQk()),2&o){const t=i.ngIf;e.xp6(1),e.Q6J("ngIf",t>0)}}function cs(o,i){1&o&&(e.ynx(0),e._UZ(1,"i",86),e.BQk())}function us(o,i){if(1&o&&e._UZ(0,"p-avatar",87),2&o){const t=i.$implicit,s=e.oxw(2);e.hYB("pTooltip","",t.lastName+" "+t.firstName," (",s.getAge(t.birthDate),")")}}function ds(o,i){if(1&o&&e._UZ(0,"p-avatar",88),2&o){const t=i.ngIf,s=e.oxw(2);e.Akn(s.capacityStyle(t)),e.s9C("pTooltip",s.capacityTooltip(t)),e.Q6J("label",s.formatCapacityLabel(t))}}function ps(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw().$implicit;e.Gre("reservation-status-badge ",t.status,""),e.xp6(1),e.hij(" ",e.lcZ(2,4,"RESERVATION_STATUSES."+(null==t.status?null:t.status.toUpperCase()))," ")}}function ms(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",54),e.qZA(),e.TgZ(3,"td")(4,"span",55),e._uU(5,"Szoba"),e.qZA(),e.TgZ(6,"div",56)(7,"div")(8,"div",23)(9,"div",24),e._UZ(10,"i",57),e.TgZ(11,"span",58),e._uU(12),e.qZA()(),e.TgZ(13,"div",59)(14,"div",60)(15,"span",61),e._uU(16),e.ALo(17,"translate"),e.YNc(18,es,2,1,"span",62),e.YNc(19,ts,2,0,"span",63),e.qZA(),e.TgZ(20,"span",64),e._uU(21),e.YNc(22,ss,2,1,"span",10),e._uU(23,") "),e.qZA()()()()(),e.YNc(24,rs,2,1,"ng-container",10),e.YNc(25,ls,2,1,"ng-container",10),e.YNc(26,cs,2,0,"ng-container",10),e.qZA()(),e.TgZ(27,"td")(28,"span",55),e._uU(29,"Vend\xe9gek"),e.qZA(),e.TgZ(30,"p-avatarGroup"),e.YNc(31,us,1,2,"p-avatar",65),e.YNc(32,ds,1,4,"p-avatar",66),e.qZA()(),e.TgZ(33,"td",67)(34,"span",55),e._uU(35,"\xc9rkez\xe9s"),e.qZA(),e.TgZ(36,"span",68),e._UZ(37,"i",69),e._uU(38),e.ALo(39,"date"),e.qZA()(),e.TgZ(40,"td",67)(41,"span",55),e._uU(42,"T\xe1voz\xe1s"),e.qZA(),e.TgZ(43,"span",68),e._UZ(44,"i",69),e._uU(45),e.ALo(46,"date"),e.qZA()(),e.TgZ(47,"td",67)(48,"span",55),e._uU(49,"St\xe1tusz"),e.qZA(),e.YNc(50,ps,3,6,"span",70),e.qZA(),e.TgZ(51,"td")(52,"span",55),e._uU(53,"Megjegyz\xe9s"),e.qZA(),e._uU(54),e.qZA(),e.TgZ(55,"td")(56,"div",71)(57,"button",72),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.edit(r))}),e.qZA(),e.TgZ(58,"button",73),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return a.tableItem=r,e.KtG(a.deleteDialog=!0)}),e.qZA()()()()}if(2&o){const t=i.$implicit,s=e.oxw();e.xp6(2),e.Q6J("value",t),e.xp6(5),e.Gre("building-badge ",t.room.building," border-round-xl w-min p-0"),e.xp6(4),e.MGl("pTooltip","Szoba sz\xe1m: ",t.room.roomNum,""),e.xp6(1),e.hij(" ",t.room.roomNum," "),e.xp6(1),e.MGl("pTooltip","Szoba k\xf3d: ",t.room.roomCode,""),e.xp6(3),e.hij(" ",e.lcZ(17,24,"BUILDINGS."+t.room.building.toUpperCase())," "),e.xp6(2),e.Q6J("ngIf",t.room.floor),e.xp6(1),e.Q6J("ngIf",t.room.climate),e.xp6(2),e.AsE(" ",t.room.beds," SZEM\xc9LYES (",t.room.bedType,""),e.xp6(1),e.Q6J("ngIf",t.room.bathroom),e.xp6(2),e.Q6J("ngIf",s.getBabyBedGuests(t)),e.xp6(1),e.Q6J("ngIf",s.getMattressCount(t)),e.xp6(1),e.Q6J("ngIf",s.requiresRebedding(t)),e.xp6(5),e.Q6J("ngForOf",t.guests),e.xp6(1),e.Q6J("ngIf",s.getFreeCapacity(t)),e.xp6(6),e.hij(" ",e.xi3(39,26,t.startDate,"yyyy.MM.dd")," "),e.xp6(7),e.hij(" ",e.xi3(46,29,t.endDate,"yyyy.MM.dd")," "),e.xp6(5),e.Q6J("ngIf",t.status),e.xp6(4),e.hij(" ",t.notes," "),e.xp6(3),e.Q6J("disabled",!s.canEdit),e.xp6(1),e.Q6J("disabled",!s.canDelete)}}function hs(o,i){1&o&&(e.TgZ(0,"tr")(1,"td",89),e._uU(2,"Nincs tal\xe1lat..."),e.qZA()()),2&o&&(e.xp6(1),e.uIk("colspan",8))}function gs(o,i){if(1&o&&(e.TgZ(0,"span",90),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null!=t.id&&t.id.value?"Foglal\xe1s adatai":"\xdaj foglal\xe1s"," ")}}function fs(o,i){1&o&&(e.TgZ(0,"div",114),e._uU(1," K\xf6telez\u0151 kit\xf6lteni "),e.qZA())}function _s(o,i){1&o&&(e.TgZ(0,"div",114),e._uU(1," K\xf6telez\u0151 kit\xf6lteni "),e.qZA())}function vs(o,i){1&o&&(e.TgZ(0,"div",114),e._uU(1," K\xf6telez\u0151 kit\xf6lteni "),e.qZA())}function bs(o,i){1&o&&(e.TgZ(0,"div",115),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"K\xe9rj\xfck, adja meg az \xe9rkez\xe9s d\xe1tum\xe1t"),"! "))}function ys(o,i){1&o&&(e.TgZ(0,"div",115),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Az \xe9rkez\xe9s d\xe1tum\xe1nak kor\xe1bbinak kell lennie, mint a t\xe1voz\xe1si d\xe1tum"),"! "))}function Cs(o,i){1&o&&(e.TgZ(0,"div",115),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"K\xe9rj\xfck, adja meg az \xe9rkez\xe9s d\xe1tum\xe1t"),"! "))}function xs(o,i){1&o&&(e.TgZ(0,"div",115),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Az \xe9rkez\xe9s d\xe1tum\xe1nak kor\xe1bbinak kell lennie, mint a t\xe1voz\xe1si d\xe1tum"),"! "))}function Ss(o,i){1&o&&(e.TgZ(0,"div",114),e._uU(1," K\xf6telez\u0151 kit\xf6lteni "),e.qZA())}function Ts(o,i){1&o&&(e.TgZ(0,"div",114),e._uU(1," K\xf6telez\u0151 kit\xf6lteni "),e.qZA())}const Ae=function(o){return{"ng-invalid":o}};function Is(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",91),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.save())}),e._UZ(2,"input",92)(3,"input",93)(4,"input",94)(5,"input",95),e.TgZ(6,"div",96)(7,"label",97),e._uU(8,"Konferencia"),e.qZA(),e._UZ(9,"app-conference-selector",98),e.YNc(10,fs,2,0,"div",99),e.qZA(),e.TgZ(11,"div",96)(12,"label",100),e._uU(13,"Vend\xe9g"),e.qZA(),e._UZ(14,"app-guest-selector",101),e.YNc(15,_s,2,0,"div",99),e.qZA(),e.TgZ(16,"div",96)(17,"label",102),e._uU(18,"Szoba"),e.qZA(),e._UZ(19,"app-room-selector",103),e.YNc(20,vs,2,0,"div",99),e.qZA(),e.TgZ(21,"div",104)(22,"label",105),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"p-calendar",106),e.YNc(26,bs,3,3,"div",107),e.YNc(27,ys,3,3,"div",107),e.qZA(),e.TgZ(28,"div",104)(29,"label",108),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"p-calendar",109),e.YNc(33,Cs,3,3,"div",107),e.YNc(34,xs,3,3,"div",107),e.qZA(),e.TgZ(35,"div",96)(36,"label",110),e._uU(37,"St\xe1tusz"),e.qZA(),e._UZ(38,"app-reservation-status-selector",111),e.YNc(39,Ss,2,0,"div",99),e.qZA(),e.TgZ(40,"div",96)(41,"label",112),e._uU(42,"Megjegyz\xe9s"),e.qZA(),e._UZ(43,"textarea",113),e.YNc(44,Ts,2,0,"div",99),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.reservationForm),e.xp6(8),e.Q6J("preselectIds",t.preselectConferenceId)("showNoneOption",!1)("selectionLimit",1)("showClear",!0),e.xp6(1),e.Q6J("ngIf",(null==t.conference?null:t.conference.dirty)&&(null==t.conference||null==t.conference.errors?null:t.conference.errors.required)),e.xp6(4),e.Q6J("filter",t.guestFilter)("preselectIds",t.preselectGuestIds)("emitOnPreselectId",!0)("showOnlyNotReserved",!0)("groupByRoomMate",!0)("showClear",!0),e.xp6(1),e.Q6J("ngIf",(null==t.guests?null:t.guests.dirty)&&(null==t.guests||null==t.guests.errors?null:t.guests.errors.required)),e.xp6(4),e.Q6J("filter",t.roomFilter)("selectionLimit",1)("preselectIds",t.preselectRoomIds)("emitOnPreselectId",!0)("showOnlyNotReserved",!0)("showClear",!0),e.xp6(1),e.Q6J("ngIf",(null==t.room?null:t.room.dirty)&&(null==t.room||null==t.room.errors?null:t.room.errors.required)),e.xp6(3),e.hij(" ",e.lcZ(24,31,"\xc9rkez\xe9s d\xe1tuma")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(35,Ae,null==t.reservationForm.errors?null:t.reservationForm.errors.dateRangeInvalid)),e.xp6(1),e.Q6J("ngIf",(null==t.startDate?null:t.startDate.dirty)&&(null==t.startDate||null==t.startDate.errors?null:t.startDate.errors.required)),e.xp6(1),e.Q6J("ngIf",null==t.reservationForm.errors?null:t.reservationForm.errors.dateRangeInvalid),e.xp6(3),e.hij(" ",e.lcZ(31,33,"T\xe1voz\xe1s d\xe1tuma")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(37,Ae,null==t.reservationForm.errors?null:t.reservationForm.errors.dateRangeInvalid)),e.xp6(1),e.Q6J("ngIf",(null==t.endDate?null:t.endDate.dirty)&&(null==t.endDate||null==t.endDate.errors?null:t.endDate.errors.required)),e.xp6(1),e.Q6J("ngIf",null==t.reservationForm.errors?null:t.reservationForm.errors.dateRangeInvalid),e.xp6(4),e.Q6J("showClear",!0),e.xp6(1),e.Q6J("ngIf",(null==t.status?null:t.status.dirty)&&(null==t.status||null==t.status.errors?null:t.status.errors.required)),e.xp6(5),e.Q6J("ngIf",(null==t.notes?null:t.notes.dirty)&&(null==t.notes||null==t.notes.errors?null:t.notes.errors.required))}}function Es(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",116)(1,"button",117),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancel())}),e.qZA(),e.TgZ(2,"button",118),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.save())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.reservationForm.dirty),e.xp6(1),e.Q6J("disabled",!t.reservationForm.valid||!t.reservationForm.dirty)}}function As(o,i){if(1&o&&(e.TgZ(0,"span"),e._uU(1,"Biztosan t\xf6r\xf6lni akarja a(z) "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4," szoba foglal\xe1s\xe1t?"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(null==t.tableItem.room?null:t.tableItem.room.roomNum)}}function Rs(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",119),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteDialog=!1)}),e.qZA(),e.TgZ(1,"button",120),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.delete())}),e.qZA()}}function Fs(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",119),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.bulkDeleteDialog=!1)}),e.qZA(),e.TgZ(1,"button",120),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteSelected())}),e.qZA()}}const Zs=function(){return["roomNum"]},ws=function(){return{"min-height":"calc(100vh - 320px)"}},Re=function(){return{width:"450px"}},Ns=function(){return{width:"28rem"}};Z.locale("hu");let ie=class oe{constructor(i,t,s,n,r,a,l,u,p){this.reservationService=i,this.roomService=t,this.userService=s,this.conferenceService=n,this.confirmationService=r,this.messageService=a,this.responsiveService=l,this.route=u,this.fb=p,this.loading=!0,this.tableItem={},this.tableData=[],this.rowsPerPageOptions=[20,50,100,200],this.rowsPerPage=20,this.totalRecords=0,this.page=0,this.sortField="id",this.sortOrder=1,this.globalFilter="",this.filterValues={},this.debounce={},this.sidebar=!1,this.deleteDialog=!1,this.bulkDeleteDialog=!1,this.selected=[],this.canCreate=!1,this.canEdit=!1,this.canDelete=!1,this.isMobile=!1,this.isOrganizer=!1,this.selectedConferences=[],this.totalBeds=0,this.registeredGuests=0,this.reservedGuests=0,this.waitingForRoom=0,this.datesTouchedByUser=!1,this.conferenceStart=null,this.conferenceEnd=null,this.preselectGuestIds=[],this.roomFilter={enabled:!0},this.guestFilter={enabled:!0},this.suppressEmits=!1,this.initialFormValues={id:null,room:null,room_id:null,conference:[],conference_id:null,startDate:"",endDate:"",status:"confirmed",notes:"",guests:[],guestIds:[]},this.INITIAL_FORM_STATE_CLOSED={id:{value:null,disabled:!1},room:{value:null,disabled:!0},room_id:{value:null,disabled:!1},conference:{value:[],disabled:!1},conference_id:{value:null,disabled:!1},startDate:{value:null,disabled:!0},endDate:{value:null,disabled:!0},status:{value:"confirmed",disabled:!1},notes:{value:"",disabled:!1},guests:{value:[],disabled:!0},guestIds:{value:[],disabled:!1}},this.BABY_ONLY_ROOM_NUMS=new Set(["207","212","20A","G11B","K12B","L11A","L11D*","L11E*","S11A","S12A","S12C","V11A*"]),this.BABY_PLUS_MATTRESS_ROOM_NUMS=new Set(["S11B*","S11C*","S11D*","S21A*","S21B*"]),this.lastSelectionByRoom=new Map,this.bedFullWarnedByGuest=new Set,this.query$=new z.x,this.formChanges$=new z.x,this.reservationForm=this.fb.group({id:this.INITIAL_FORM_STATE_CLOSED.id,room:[this.INITIAL_FORM_STATE_CLOSED.room,v.kI.required],room_id:[this.INITIAL_FORM_STATE_CLOSED.room_id,v.kI.required],conference:[this.INITIAL_FORM_STATE_CLOSED.conference,v.kI.required],conference_id:[this.INITIAL_FORM_STATE_CLOSED.conference_id,v.kI.required],startDate:[this.INITIAL_FORM_STATE_CLOSED.startDate,v.kI.required],endDate:[this.INITIAL_FORM_STATE_CLOSED.endDate,v.kI.required],status:this.INITIAL_FORM_STATE_CLOSED.status,notes:this.INITIAL_FORM_STATE_CLOSED.notes,guests:[this.INITIAL_FORM_STATE_CLOSED.guests,v.kI.required],guestIds:[this.INITIAL_FORM_STATE_CLOSED.guestIds,v.kI.required]},{validators:(0,we.W)("startDate","endDate")}),this.isFormValid$=new F.X(!1)}ngOnInit(){this.userService.hasRole(["Super Admin","Nagy Admin","Kis Admin","Szervezo"]).subscribe(i=>this.canCreate=i),this.userService.hasRole(["Super Admin","Nagy Admin","Kis Admin","Szervezo"]).subscribe(i=>this.canEdit=i),this.userService.hasRole(["Super Admin","Nagy Admin","Kis Admin","Szervezo"]).subscribe(i=>this.canDelete=i),this.userService.hasRole(["Szervezo"]).subscribe(i=>this.isOrganizer=i),this.room?.disable({emitEvent:!1}),this.querySub=this.query$.pipe((0,J.h)(()=>(this.selectedConferences?.length??0)>0),(0,T.U)(i=>({key:this.buildQueryKey(),force:!!i?.force})),(0,R.x)((i,t)=>!t.force&&i.key===t.key),function Q(o,i=G.z){return function C(o){return(0,d.e)((i,t)=>{let s=!1,n=null,r=null,a=!1;const l=()=>{if(r?.unsubscribe(),r=null,s){s=!1;const p=n;n=null,t.next(p)}a&&t.complete()},u=()=>{r=null,a&&t.complete()};i.subscribe((0,y.x)(t,p=>{s=!0,n=p,r||(0,h.Xf)(o(p)).subscribe(r=(0,y.x)(t,l,u))},()=>{a=!0,(!s||!r||r.closed)&&t.complete()}))})}(()=>(0,I.H)(o,i))}(50),(0,te.w)(()=>{this.loading=!0,this.filterValues.conference_id=(this.selectedConferences??[]).map(s=>s.id).join(",");const i=Object.keys(this.filterValues).map(s=>this.filterValues[s]?.length?`${s}=${this.filterValues[s]}`:"").filter(Boolean).join("&"),t=this.sortField?{sortField:this.sortField,sortOrder:this.sortOrder}:"";return""!==this.globalFilter?this.reservationService.getBySearch$(this.globalFilter,t):this.reservationService.get$(this.page,this.rowsPerPage,t,i)})).subscribe({next:i=>{this.loading=!1,this.tableData=i?.rows??[],this.totalRecords=i?.totalItems??0,this.page=i?.currentPage??0,this.totalBeds=i?.summary?.totalBeds??0,this.registeredGuests=i?.summary?.registeredGuests??0,this.reservedGuests=i?.summary?.reservedGuests??0,this.waitingForRoom=i?.summary?.waitingForRoom??0},error:()=>{this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Hiba t\xf6rt\xe9nt!"})}}),this.conference?.valueChanges.pipe(ae(),(0,J.h)(()=>!this.suppressEmits&&this.sidebar)).subscribe(i=>{const t=i?.[0];this.applyConferenceSideEffects(t)}),this.room?.valueChanges.pipe(ae()).subscribe(i=>{const t=i?.[0];if(this.reservationForm.patchValue({room_id:t?.id??null},{emitEvent:!1}),null!=t?.id)this.validateCapacityForCurrentSelection(t),this.roomFilter={...this.roomFilter,includeRoomIds:[t.id]};else{const s={...this.roomFilter};delete s.includeRoomIds,this.roomFilter=s}}),this.guests?.valueChanges.pipe((0,T.U)(i=>Array.isArray(i)?i:i?[i]:[]),(0,T.U)(i=>({guestsArr:i,ids:Array.from(new Set(i.map(t=>t?.id).filter(t=>null!=t)))})),(0,R.x)((i,t)=>i.ids.length===t.ids.length&&i.ids.every((s,n)=>s===t.ids[n]))).subscribe(({guestsArr:i,ids:t})=>{const s=this.getSelectedRoom(),n=this.guestIds?.value,r=Array.isArray(n)?n.map(m=>Number(m)).filter(m=>Number.isFinite(m)):[];if(s&&!this.onGuestsSelectionChange(s,i))return;const a=this.sidebar&&!this.suppressEmits&&!this.datesTouchedByUser;if(this.reservationForm.patchValue({guestIds:t},{emitEvent:!1}),!a)return;const l=this.computeGuestDateRange(i);let p=null,g=null;if(l.minArrival&&l.maxDeparture)p=l.minArrival.format("YYYY-MM-DD"),g=l.maxDeparture.format("YYYY-MM-DD");else{const m=Array.isArray(this.conference?.value)?this.conference.value:[],b=m.length?m[0]:null;p=b?.beginDate?Z(b.beginDate).format("YYYY-MM-DD"):null,g=b?.endDate?Z(b.endDate).format("YYYY-MM-DD"):null}const x=this.startDate?.value??null,w=this.endDate?.value??null,k=x!==p||w!==g;if(null!=s?.id&&k&&p&&g&&(x&&p<x||w&&g>w)){const f=Number(s.id);this.verifyRoomAvailableForRange$(f,p,g).pipe((0,re.q)(1)).subscribe(S=>{if(S)return this.reservationForm.patchValue({startDate:p,endDate:g},{emitEvent:!1}),void this.updateRoomFilterForDateRange(p,g);this.confirmationService.confirm({header:"Szoba m\xe1r nem el\xe9rhet\u0151",message:`A kiv\xe1lasztott vend\xe9gek miatt az id\u0151tartam megv\xe1ltozna (${x??"-"}\u2013${w??"-"} \u2192 ${p}\u2013${g}). Ebben az esetben a(z) ${s?.roomNum??s?.number??s?.name??"a kiv\xe1lasztott"} szoba m\xe1r nem lenne el\xe9rhet\u0151. Megtartod a vend\xe9gv\xe1laszt\xe1st \xe9s v\xe1lasztasz m\xe1sik szob\xe1t?`,icon:"pi pi-exclamation-triangle",acceptLabel:"Igen, \xfaj szob\xe1t v\xe1lasztok",rejectLabel:"Nem, maradjon a szoba",accept:()=>{this.reservationForm.patchValue({startDate:p,endDate:g},{emitEvent:!1}),this.clearSelectedRoom(),this.updateRoomFilterForDateRange(p,g)},reject:()=>{this.revertGuestsToPrevious(f,i,r),this.updateRoomFilterForDateRange(x,w)}})})}else k&&this.reservationForm.patchValue({startDate:p,endDate:g},{emitEvent:!1}),this.updateRoomFilterForDateRange(p,g)}),this.startDate?.valueChanges.pipe((0,J.h)(()=>!this.suppressEmits&&this.sidebar)).subscribe(()=>{this.datesTouchedByUser=!0,this.updateRoomFilterForDateRange()}),this.endDate?.valueChanges.pipe((0,J.h)(()=>!this.suppressEmits&&this.sidebar)).subscribe(()=>{this.datesTouchedByUser=!0,this.updateRoomFilterForDateRange()}),this.responsiveService.isMobile$.subscribe(i=>{this.isMobile=i}),this.isFormValid$=this.formChanges$.pipe((0,j.b)(300),(0,R.x)(),(0,T.U)(()=>this.reservationForm.valid)),this.serviceMessageObs$=this.reservationService.messageObs,this.conferenceMessageObs$=this.conferenceService.messageObs,this.serviceMessageObs$.subscribe(i=>this.handleMessage(i)),this.conferenceMessageObs$.subscribe(i=>this.handleMessage(i)),this.initDeepLinkFromReservationId()}initDeepLinkFromReservationId(){this.route.queryParamMap.pipe((0,T.U)(i=>{const t=i.get("conference_id"),s=i.get("reservation_id"),n=i.get("open"),r=null!=t?Number(t):null,a=null!=s?Number(s):null,l="1"===n||"true"===n||"yes"===n;return{conferenceId:Number.isFinite(r)?r:null,reservationId:Number.isFinite(a)?a:null,autoOpen:l}}),(0,R.x)((i,t)=>i.conferenceId===t.conferenceId&&i.reservationId===t.reservationId&&i.autoOpen===t.autoOpen)).subscribe(({conferenceId:i,reservationId:t,autoOpen:s})=>{if(!t)return this.filterValues.id&&(delete this.filterValues.id,this.doQuery(!0)),void(this.sidebar&&this.closeSidebar());i&&(this.selectedConferences=[{id:i}]),this.reservationService.get$(0,1,{sortField:"id",sortOrder:1},`id=${t}`).pipe((0,T.U)(r=>r?.rows?.[0]||null),(0,re.q)(1)).subscribe({next:r=>{if(!r)return void this.messageService.add({severity:"warn",summary:"Figyelem",detail:"A megadott foglal\xe1s nem tal\xe1lhat\xf3."});const a=r.conference_id??r.conference?.id??null;!i&&a&&(this.selectedConferences=[{id:a}]),this.filterValues={...this.filterValues,id:String(r.id)},this.page=0,this.doQuery(!0),s&&this.edit(r)},error:()=>{this.messageService.add({severity:"warn",summary:"Figyelem",detail:"A megadott foglal\xe1s nem tal\xe1lhat\xf3."})}})})}get id(){return this.reservationForm.get("id")}get room(){return this.reservationForm.get("room")}get room_id(){return this.reservationForm.get("room_id")}get conference(){return this.reservationForm.get("conference")}get conference_id(){return this.reservationForm.get("conference_id")}get startDate(){return this.reservationForm.get("startDate")}get endDate(){return this.reservationForm.get("endDate")}get status(){return this.reservationForm.get("status")}get notes(){return this.reservationForm.get("notes")}get guests(){return this.reservationForm.get("guests")}get guestIds(){return this.reservationForm.get("guestIds")}doQuery(i=!1){if(!this.selectedConferences?.length)return this.tableData=[],this.totalRecords=0,void(this.loading=!1);this.query$.next({force:i})}onFilter(i,t){if(this.isOrganizer&&0===this.selectedConferences.length)return;let n="";i instanceof Date?n=Z(i).format("YYYY.MM.DD"):i&&(i.value||i.target?.value)?(n=i.value||i.target?.value,n=n.toString()):this.filterValues[t]="",this.filterValues[t]=n,["conferenceName","room.building","room.bedType","status"].includes(t)?this.filterValues[t]===n&&this.doQuery():(this.debounce[t]&&clearTimeout(this.debounce[t]),this.debounce[t]=setTimeout(()=>{this.filterValues[t]===n&&this.doQuery()},500))}onLazyLoad(i){this.page=i.first/i.rows,this.rowsPerPage=i.rows??this.rowsPerPage,this.sortField=i.sortField??"",this.sortOrder=-1===i.sortOrder?-1:1,this.globalFilter=i.globalFilter??"",this.doQuery()}onGlobalFilter(i,t){i.filterGlobal(t.target.value,"contains")}onSidebarShow(){this.sidebar=!0;const i=!this.id?.value,t=this.selectedConferences?.[0];i&&t?(this.preselectConferenceId=t.id,this.reservationForm.patchValue({conference:[t]},{emitEvent:!0}),queueMicrotask(()=>this.applyConferenceSideEffects(t))):(this.preselectConferenceId=void 0,queueMicrotask(()=>this.applyConferenceSideEffects()))}onSidebarHide(){this.suppressEmits=!0,this.sidebar=!1,this.datesTouchedByUser=!1,this.reservationForm.reset(this.INITIAL_FORM_STATE_CLOSED,{emitEvent:!0}),this.preselectConferenceId=void 0,this.preselectRoomIds=void 0,this.preselectGuestIds=[],this.originalFormValues=void 0,this.preselectConferenceId=void 0,this.reservationForm.markAsPristine(),this.reservationForm.markAsUntouched(),queueMicrotask(()=>this.suppressEmits=!1)}closeSidebar(){this.sidebar=!1}onGuestsSelectionChange(i,t){const s=Number(i?.id),n=Number(i?.beds??0),r=Number(i?.extraBeds??0),a=n+r,l=this.lastSelectionByRoom.get(s)??[],u=t.map(f=>f.id).filter(f=>null!=f),p=u.length,g=this.evaluateExtraGuests(i,t);if("default"!==g.policy.kind&&g.totalCapacity>0&&p>g.totalCapacity)return this.revertGuestsToPrevious(s,t,l),this.messageService.add({severity:"warn",summary:"Szoba megtelt",detail:`A(z) ${g.roomNum} szoba maxim\xe1lis kapacit\xe1sa ${g.totalCapacity} f\u0151. T\xf6bb vend\xe9g nem helyezhet\u0151 el ebben a szob\xe1ban.`,life:8e3}),!1;if("babyOnly"===g.policy.kind){if(g.adultExtraCount>0)return this.revertGuestsToPrevious(s,t,l),this.messageService.add({severity:"warn",summary:"Csak baba\xe1gy f\xe9r",detail:`A(z) ${g.roomNum} szob\xe1ban p\xf3t\xe1gy csak baba\xe1gy (0\u20133 \xe9v). 3 \xe9v feletti (vagy ismeretlen kor\xfa) vend\xe9g nem tehet\u0151 p\xf3t\xe1gyra.`,life:1e4}),!1}else if("babyPlusMattress"===g.policy.kind&&g.adultExtraCount>g.policy.allowedAdultExtra)return this.revertGuestsToPrevious(s,t,l),this.messageService.add({severity:"warn",summary:"P\xf3t\xe1gy korl\xe1toz\xe1s",detail:`A(z) ${g.roomNum} szob\xe1ban legfeljebb 1 matrac haszn\xe1lhat\xf3; a tov\xe1bbi p\xf3t\xe1gy(ak) csak baba\xe1gy (0\u20133 \xe9v).`,life:1e4}),!1;if(this.isOrganizer&&a>0&&p>a){const f=new Map(t.filter(A=>A&&null!=A.id).map(A=>[A.id,A])),S=l.map(A=>f.get(A)).filter(A=>!!A);return this.suppressEmits=!0,this.reservationForm.patchValue({guests:S,guestIds:l},{emitEvent:!1}),this.suppressEmits=!1,this.lastSelectionByRoom.set(s,l),this.messageService.add({severity:"warn",summary:"Szoba megtelt",detail:`A szoba maxim\xe1lis kapacit\xe1sa ${a} f\u0151. T\xf6bb vend\xe9g nem helyezhet\u0151 el ebben a szob\xe1ban.`,life:8e3}),!1}const x=new Set(l),w=u.filter(f=>!x.has(f)),k=w.length?w[w.length-1]:null,m=Math.max(0,p-n);if(w.map((f,S)=>({id:f,pos:l.length+S+1})).filter(f=>f.pos>n).map(f=>f.id).filter(f=>!this.bedFullWarnedByGuest.has(`${s}:${f}`)).forEach(f=>this.bedFullWarnedByGuest.add(`${s}:${f}`)),m>0){const f=this.getExtraBedPolicyByRoom(i),A="babyOnly"===f.kind?"Csak baba\xe1gy haszn\xe1lhat\xf3 (0\u20133 \xe9v).":"babyPlusMattress"===f.kind?m>=2?"A 2. p\xf3t\xe1gy csak baba\xe1gy (0\u20133 \xe9v).":"Matracra vagy baba\xe1gyra ker\xfclhet (max 1 matrac).":"Matracra vagy gyerek\xe1gyra ker\xfclhet.";if(1===m&&null!=k){const L=t.find(q=>q.id===k),ne=L&&`${L.lastName??""} ${L.firstName??""}`.trim()||"A vend\xe9g";this.confirmationService.confirm({header:"Figyelmeztet\xe9s",message:`${ne} m\xe1r nem f\xe9r \xe1gyra! ${A}`,icon:"pi pi-exclamation-triangle",acceptLabel:"OK",rejectVisible:!1})}else this.confirmationService.confirm({header:"Figyelmeztet\xe9s",message:`${m} f\u0151 m\xe1r nem f\xe9r \xe1gyra! ${A}`,icon:"pi pi-exclamation-triangle",acceptLabel:"OK",rejectVisible:!1})}return this.lastSelectionByRoom.set(s,u),p<=n&&[...this.bedFullWarnedByGuest].filter(f=>f.startsWith(`${s}:`)).forEach(f=>this.bedFullWarnedByGuest.delete(f)),!0}create(){this.suppressEmits=!0,this.datesTouchedByUser=!1,this.preselectConferenceId=void 0,this.preselectRoomIds=void 0,this.preselectGuestIds=[],this.bedFullWarnedByGuest.clear(),this.lastSelectionByRoom.clear(),this.roomFilter={enabled:!0},this.guestFilter={enabled:!0},this.reservationForm.reset(this.INITIAL_FORM_STATE_CLOSED,{emitEvent:!1}),this.reservationForm.markAsPristine(),this.reservationForm.markAsUntouched(),this.originalFormValues=this.reservationForm.getRawValue(),this.suppressEmits=!1,this.sidebar=!0}edit(i){this.datesTouchedByUser=!1,this.reservationForm.reset(this.initialFormValues,{emitEvent:!1});const t=i.conference??(i.conference_id?{id:i.conference_id}:null);this.reservationForm.patchValue({conference:t?[t]:[],conference_id:t?.id??null},{emitEvent:!0});const s=i.room??(i.room_id?{id:i.room_id}:null),n=Array.isArray(i.guests)?i.guests:[],r=Array.from(new Set(n.map(a=>"string"==typeof a?.id?Number(a.id):a?.id).filter(a=>Number.isFinite(a))));this.suppressEmits=!0,this.reservationForm.patchValue({conference:t?[t]:[],conference_id:t?.id??null,guests:n,guestIds:r,startDate:i.startDate??null,endDate:i.endDate??null},{emitEvent:!1}),this.preselectGuestIds=r,this.roomFilter={...this.roomFilter,conferenceId:t?.id??null,includeRoomIds:s?.id?[s.id]:[],startDate:i.startDate??null,endDate:i.endDate??null,excludeReservationId:i.id??null},this.guestFilter={...this.guestFilter,conferenceId:t?.id??null,includeGuestIds:this.preselectGuestIds},this.room?.enable({emitEvent:!1}),this.guests?.enable({emitEvent:!1}),this.startDate?.enable({emitEvent:!1}),this.endDate?.enable({emitEvent:!1}),this.reservationForm.patchValue({id:i.id??null,room:s?[s]:[],room_id:s?.id??null,guests:n,guestIds:Array.from(new Set(r)),status:i.status??"confirmed",notes:i.notes??null},{emitEvent:!1}),this.preselectRoomIds=s?.id??null,this.preselectGuestIds=Array.from(new Set(r)),this.suppressEmits=!1,this.originalFormValues=this.reservationForm.getRawValue(),this.sidebar=!0,s?.id&&this.lastSelectionByRoom.set(s.id,this.preselectGuestIds??[])}delete(){this.loading=!0,this.deleteDialog=!1,this.reservationService.delete(this.tableItem)}deleteSelected(){this.loading=!0,this.bulkDeleteDialog=!1,this.reservationService.bulkdelete(this.selected)}save(){if(!this.reservationForm.valid)return;const i=this.getSelectedRoom(),t=Array.isArray(this.guests?.value)?this.guests.value:[];if(i){const l=this.evaluateExtraGuests(i,t);if("default"!==l.policy.kind){if(l.totalCapacity>0&&t.length>l.totalCapacity)return void this.messageService.add({severity:"warn",summary:"Szoba megtelt",detail:`A(z) ${l.roomNum} szoba maxim\xe1lis kapacit\xe1sa ${l.totalCapacity} f\u0151. T\xf6bb vend\xe9g nem menthet\u0151 ebbe a szob\xe1ba.`,life:1e4});if("babyOnly"===l.policy.kind&&l.adultExtraCount>0||"babyPlusMattress"===l.policy.kind&&l.adultExtraCount>l.policy.allowedAdultExtra){const p=t.length===l.totalCapacity&&l.requiredBabyExtra>0?this.buildRoomPolicySaveMessage(l.totalCapacity,l.requiredBabyExtra):"babyOnly"===l.policy.kind?`A(z) ${l.roomNum} szob\xe1ban p\xf3t\xe1gy csak baba\xe1gy (0\u20133 \xe9v). 3+ vend\xe9g nem menthet\u0151 p\xf3t\xe1gyra.`:`A(z) ${l.roomNum} szob\xe1ban legfeljebb 1 matrac haszn\xe1lhat\xf3; a tov\xe1bbi p\xf3t\xe1gy(ak) csak baba\xe1gy (0\u20133 \xe9v).`;return void this.messageService.add({severity:"warn",summary:"Nem menthet\u0151",detail:p,life:12e3})}}}this.loading=!0;const s=this.reservationForm.value,n=l=>Array.isArray(l)?l[0]?.id??null:l?.id??null,r=Array.isArray(s.guestIds)?Array.from(new Set(s.guestIds.map(l=>Number(l)).filter(l=>Number.isFinite(l)))):Array.isArray(s.guests)?Array.from(new Set(s.guests.map(l=>Number(l?.id)).filter(l=>Number.isFinite(l)))):s.guests?.id?[Number(s.guests.id)]:[],a={room_id:n(s.room)??s.room_id??null,conference_id:n(s.conference)??s.conference_id??null,startDate:s.startDate,endDate:s.endDate,status:s.status??"confirmed",notes:s.notes??null};if(s.id){const l={id:s.id,...a,guestIds:r};this.reservationService.update(l)}else{const l={...a,guestIds:r};this.reservationService.create(l)}this.doQuery()}cancel(){this.reservationForm.reset(this.originalFormValues)}handleMessage(i){if(i){if(this.loading=!1,"ERROR"==i||"error"===i?.severity)return void this.messageService.add({severity:"error",summary:i?.summary??"Error",detail:i?.detail??"Hiba t\xf6rt\xe9nt!"});this.messageService.add(i),this.tableItem={},this.selected=[],this.doQuery(!0),this.closeSidebar()}}onConfChange(i){this.selectedConferences=i.value,("user"===i.source||"auto-select-first"===i.source)&&(this.tableData=[],this.doQuery())}getAge(i){if(!i)return"";const t=Z(i);return Z().diff(t,"years").toString()}getBabyBedCount(i){if(!i?.guests||!i.guests.length)return 0;const t=Z();return i.guests.reduce((s,n)=>{if(!n?.birthDate)return s;const r=t.diff(Z(n.birthDate),"years");return r>=0&&r<3?s+1:s},0)}getBabyBedGuests(i){if(!i?.guests||!i.guests.length)return[];const t=Z();return i.guests.filter(s=>{if(!s?.birthDate)return!1;const n=t.diff(Z(s.birthDate),"years");return n>=0&&n<3})}getFreeCapacity(i){const t=i?.guests?.length??0;return(i?.room?.beds??0)+(i?.room?.extraBeds??0)-t}capacityStyle(i){return{"background-color":i<0?"#EF4444":"#22C55E",color:"#ffffff"}}capacityTooltip(i){return i<0?`T\xfalfoglalva ${Math.abs(i)} f\u0151vel`:`Szabad f\xe9r\u0151hely ${i} f\u0151 r\xe9sz\xe9re`}formatCapacityLabel(i){return i>0?`+${i}`:i<0?`${Math.abs(i)}`:""}exportExcel(){c.e(1486).then(c.bind(c,1486)).then(i=>{const t=[{key:"reservationNum",label:"Szoba-sz\xe1m"},{key:"reservationCode",label:"Szoba k\xf3d"},{key:"beds",label:"\xc1gyak sz\xe1ma"},{key:"spareBeds",label:"Matrac / gyerek\xe1gy"},{key:"building",label:"\xc9p\xfclet / folyos\xf3"},{key:"bedType",label:"\xc1gy t\xedpus"},{key:"bathreservation",label:"F\xfcrd\u0151szoba"},{key:"notes",label:"Megjegyz\xe9s"}],n=(this.selected.length>0?this.selected:this.tableData).map(u=>{let p={};return t.forEach(g=>{p[g.label]=u[g.key]??""}),p}),a={Sheets:{data:i.utils.json_to_sheet(n,{header:t.map(u=>u.label)})},SheetNames:["data"]},l=i.write(a,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(l,"reservations")})}saveAsExcelFile(i,t){const r=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});ke.saveAs(r,t+"_export_"+Z().format("YYYYMMDD")+".xlsx")}fromYMD(i){const[t,s,n]=i.split("-").map(Number);return new Date(t,s-1,n)}toYMD(i){return`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`}buildQueryKey(){const i=(this.selectedConferences??[]).map(s=>s.id).sort().join(","),t=Object.keys(this.filterValues).map(s=>this.filterValues[s]?`${s}=${this.filterValues[s]}`:"").filter(Boolean).join("&");return[this.page,this.rowsPerPage,this.sortField,this.sortOrder,this.globalFilter||"",i,t].join("|")}getSelectedRoom(){const i=this.room?.value;return Array.isArray(i)&&i.length?i[0]:null}validateCapacityForCurrentSelection(i){const t=Number(i?.id),s=Number(i?.beds??0),n=Number(i?.extraBeds??0),r=Array.isArray(this.guests?.value)?this.guests.value:[],a=r.map(u=>u?.id).filter(u=>null!=u);[...this.bedFullWarnedByGuest].filter(u=>u.startsWith(`${t}:`)).forEach(u=>this.bedFullWarnedByGuest.delete(u));const l=Math.max(0,a.length-s);if(l<=0)this.lastSelectionByRoom.set(t,a);else{for(let u=s;u<a.length;u++)this.bedFullWarnedByGuest.add(`${t}:${a[u]}`);if(1===l){const u=a[s],p=r.find(x=>x.id===u),g=p&&`${p.lastName??""} ${p.firstName??""}`.trim()||"A vend\xe9g";this.confirmationService.confirm({header:"Figyelmeztet\xe9s",message:`${g} m\xe1r nem f\xe9r \xe1gyra! Matracra vagy gyerek\xe1gyra ker\xfclhet.`,icon:"pi pi-exclamation-triangle",acceptLabel:"OK",rejectVisible:!1,accept:()=>{const x=s+n;a.length>x&&this.messageService.add({severity:"warn",summary:"Kev\xe9s f\xe9r\u0151hely",detail:`\xd6sszes kapacit\xe1s: ${x} (\xe1gy + matrac/gyerek\xe1gy), kijel\xf6lve: ${a.length}. ${a.length-x} f\u0151 t\xe9nylegesen nem f\xe9r be.`,life:15e3})}})}else this.confirmationService.confirm({header:"Figyelmeztet\xe9s",message:`${l} f\u0151 m\xe1r nem f\xe9r \xe1gyra! Matracra vagy gyerek\xe1gyra ker\xfclhet.`,icon:"pi pi-exclamation-triangle",acceptLabel:"OK",rejectVisible:!1,accept:()=>{const u=s+n;a.length>u&&this.messageService.add({severity:"warn",summary:"Kev\xe9s f\xe9r\u0151hely",detail:`\xd6sszes kapacit\xe1s: ${u} (\xe1gy + matrac/gyerek\xe1gy), kijel\xf6lve: ${a.length}. ${a.length-u} f\u0151 t\xe9nylegesen nem f\xe9r be.`,life:15e3})}});this.lastSelectionByRoom.set(t,a)}}applyConferenceSideEffects(i){const t=i??(Array.isArray(this.conference?.value)&&this.conference.value.length?this.conference.value[0]:null),s=!this.id?.value,n=u=>u?Z(u).format("YYYY-MM-DD"):null;this.reservationForm.patchValue({conference_id:t?.id??null},{emitEvent:!1}),this.roomFilter={...this.roomFilter,conferenceId:t?.id??null},this.guestFilter={...this.guestFilter,conferenceId:t?.id??null};const r=this.startDate?.value,a=this.endDate?.value,l={};t?((s||!r)&&(l.startDate=n(t.beginDate)),(s||!a)&&(l.endDate=n(t.endDate)),Object.keys(l).length&&this.reservationForm.patchValue(l,{emitEvent:!1}),this.room?.enable({emitEvent:!1}),this.guests?.enable({emitEvent:!1}),this.startDate?.enable({emitEvent:!1}),this.endDate?.enable({emitEvent:!1})):(s&&this.reservationForm.patchValue({startDate:null,endDate:null},{emitEvent:!1}),this.room?.disable({emitEvent:!1}),this.guests?.disable({emitEvent:!1}),this.startDate?.disable({emitEvent:!1}),this.endDate?.disable({emitEvent:!1})),this.updateRoomFilterForDateRange()}computeGuestDateRange(i){let t=null,s=null;for(const n of i??[]){const r=n.dateOfArrival,a=n.dateOfDeparture,l=r?Z(r,"YYYY-MM-DD",!0):null,u=a?Z(a,"YYYY-MM-DD",!0):null;l&&l.isValid()&&(!t||l.isBefore(t))&&(t=l),u&&u.isValid()&&(!s||u.isAfter(s))&&(s=u)}return{minArrival:t,maxDeparture:s}}isBabyGuest(i){if(!i?.birthDate)return!1;const s=Z().diff(Z(i.birthDate),"years");return s>=0&&s<3}getBabyBedTooltip(i){return i?.length?i.map(t=>{const s=`${t.lastName??""} ${t.firstName??""}`.trim(),n=this.getAge(t.birthDate);return n?`${s} (${n})`:s}).join(", "):""}getMattressCount(i){const t=Number(i?.room?.beds??0),s=i?.guests??[];if(!s.length)return 0;const n=this.getBabyBedGuests(i).length,r=Math.max(0,s.length-n);return Math.max(0,r-t)}getExtraBedPolicyByRoom(i){const t=i?.roomNum;return this.BABY_ONLY_ROOM_NUMS.has(t)?{kind:"babyOnly",allowedAdultExtra:0}:this.BABY_PLUS_MATTRESS_ROOM_NUMS.has(t)?{kind:"babyPlusMattress",allowedAdultExtra:1}:{kind:"default",allowedAdultExtra:Number.POSITIVE_INFINITY}}evaluateExtraGuests(i,t){const s=this.getExtraBedPolicyByRoom(i),n=i?.roomNum,r=Number(i?.beds??0),a=Number(i?.extraBeds??0),l=r+a,u=t.slice(r),p=u.filter(w=>this.isBabyGuest(w)).length;return{policy:s,roomNum:n,beds:r,extraBeds:a,totalCapacity:l,extraGuests:u,babyExtraCount:p,adultExtraCount:u.length-p,requiredBabyExtra:Math.max(0,u.length-s.allowedAdultExtra)}}revertGuestsToPrevious(i,t,s){const n=new Map(t.filter(a=>a&&null!=a.id).map(a=>[a.id,a])),r=s.map(a=>n.get(a)).filter(a=>!!a);this.suppressEmits=!0,this.reservationForm.patchValue({guests:r,guestIds:s},{emitEvent:!1}),this.suppressEmits=!1,this.lastSelectionByRoom.set(i,s)}buildRoomPolicySaveMessage(i,t){return t<=0?"":1===t?`Ebbe a szob\xe1ba \xf6sszesen ${i} f\u0151 ker\xfclhet, amib\u0151l az egyik 0\u20133 \xe9v k\xf6z\xf6tti!`:`Ebbe a szob\xe1ba \xf6sszesen ${i} f\u0151 ker\xfclhet, amib\u0151l legal\xe1bb ${t} f\u0151 0\u20133 \xe9v k\xf6z\xf6tti!`}getSelectedConferenceId(){const i=this.conference?.value,s=(Array.isArray(i)&&i.length?i[0]:null)?.id??null,n=Number(s);return Number.isFinite(n)?n:null}updateRoomFilterForDateRange(i,t){const s=this.getSelectedConferenceId();if(!s)return void(this.roomFilter={...this.roomFilter,conferenceId:null});const l={conferenceId:s,startDate:i??this.startDate?.value??null,endDate:t??this.endDate?.value??null,allowPartial:!0};l.excludeReservationId=(this.id?.value??null)||null,this.roomFilter={...this.roomFilter,...l}}verifyRoomAvailableForRange$(i,t,s){const n=this.getSelectedConferenceId();if(!n)return(0,se.of)(!0);const r={...this.roomFilter,enabled:!0,conferenceId:n,onlyNotReserved:!0,startDate:t,endDate:s,includeRoomIds:[i],excludeReservationId:this.id?.value??null};return this.roomService.searchRoomsForSelector$(r).pipe((0,T.U)(a=>{const l=(a??[]).find(u=>Number(u?.id)===i);return!!l&&!this.isRoomConsideredUnavailable(l)}),(0,Fe.K)(()=>(0,se.of)(!1)))}isRoomConsideredUnavailable(i){return!i||("boolean"==typeof i.disabled?i.disabled:"boolean"==typeof i.available?!i.available:"boolean"==typeof i.isAvailable?!i.isAvailable:"boolean"==typeof i.isReserved?i.isReserved:"boolean"==typeof i.reserved&&i.reserved)}clearSelectedRoom(){this.suppressEmits=!0,this.reservationForm.patchValue({room:[],room_id:null},{emitEvent:!1}),this.suppressEmits=!1,this.preselectRoomIds=void 0;const i={...this.roomFilter};delete i.includeRoomIds,this.roomFilter=i}requiresRebedding(i){}ngOnDestroy(){}static#e=this.\u0275fac=function(t){return new(t||oe)(e.Y36(ce),e.Y36(ue.X),e.Y36(Oe.K),e.Y36(ze.Z),e.Y36(E.YP),e.Y36(E.ez),e.Y36(Le.k),e.Y36(O.gz),e.Y36(v.qu))};static#t=this.\u0275cmp=e.Xpm({type:oe,selectors:[["reservation-component"]],viewQuery:function(t,s){if(1&t&&e.Gf(le.w,5),2&t){let n;e.iGM(n=e.CRH())&&(s.conferenceSelector=n.first)}},features:[e._Bn([E.ez,E.YP])],decls:28,vars:35,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-0","py-0"],["dataKey","id","responsiveLayout","scroll","currentPageReportTemplate","{first} - {last} bejegyz\xe9s a(z) {totalRecords}-b\xf3l megjelen\xedt\xe9se","selectionMode","multiple",3,"value","rows","totalRecords","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","selection","tableStyle","rowHover","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["id","sidebar","position","right","styleClass","p-sidebar-md",3,"visible","transitionOptions","fullScreen","blockScroll","visibleChange","onHide","onShow"],[4,"ngIf"],["pTemplate","footer"],["header","T\xf6rl\xe9s",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[3,"autoZIndex","blocked"],[3,"closable"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0"],["placeholder","V\xe1lasszon konferenci\xe1t...",3,"ngModel","emitOnSelectFirstOption","showNoneOption","selectionLimit","showClear","ngModelChange"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],["tooltipPosition","top",1,"border-round-xl","w-min","p-0",2,"background-color","#E2E8F0",3,"pTooltip"],[1,"flex","align-items-center","justify-content-center","py-1","px-1"],[1,"flex","align-items-center","justify-content-center","gap-2","px-2"],["width","24px","height","24px","viewBox","0 0 24 24","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","fill","#000000"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["id","ic_fluent_bed_24_filled","fill","#334155","fill-rule","nonzero"],["d","M19.25,11 C20.7125318,11 21.9084043,12.1417046 21.9949812,13.5824777 L22,13.75 L22,20.25 C22,20.6642136 21.6642136,21 21.25,21 C20.8703042,21 20.556509,20.7178461 20.5068466,20.3517706 L20.5,20.25 L20.5,18 L3.5,18 L3.5,20.25 C3.5,20.6296958 3.21784612,20.943491 2.85177056,20.9931534 L2.75,21 C2.37030423,21 2.05650904,20.7178461 2.00684662,20.3517706 L2,20.25 L2,13.75 C2,12.2874682 3.1417046,11.0915957 4.58247767,11.0050188 L4.75,11 L19.25,11 Z M6.75,4 L17.25,4 C18.7125318,4 19.9084043,5.1417046 19.9949812,6.58247767 L20,6.75 L20,10 L17,10 L16.9932723,9.88337887 C16.9399506,9.42429701 16.575703,9.06004937 16.1166211,9.00672773 L16,9 L14,9 C13.4871642,9 13.0644928,9.38604019 13.0067277,9.88337887 L13,10 L11,10 L10.9932723,9.88337887 C10.9399506,9.42429701 10.575703,9.06004937 10.1166211,9.00672773 L10,9 L8,9 C7.48716416,9 7.06449284,9.38604019 7.00672773,9.88337887 L7,10 L4,10 L4,6.75 C4,5.28746816 5.1417046,4.09159572 6.58247767,4.00501879 L6.75,4 Z"],[1,"text-2xl","font-normal","white-space-nowrap","vertical-align-middle"],[1,"pi","pi-users",2,"font-size","1.5rem"],["tooltipPosition","top",1,"border-round-xl","w-min","p-0","bg-green-100",3,"pTooltip"],["tooltipPosition","top",1,"border-round-xl","w-min","p-0","bg-yellow-100",3,"pTooltip"],["pButton","","pRipple","","label","\xdaj","icon","pi pi-plus",1,"p-button-success","mr-2",3,"disabled","click"],["pButton","","pRipple","","label","T\xf6rl\xe9s","icon","pi pi-trash",1,"p-button-danger","mr-2",3,"disabled","click"],["pSortableColumn","roomNum"],["field","roomNum"],["pSortableColumn","startDate"],["field","startDate"],["pSortableColumn","endDate"],["field","endDate"],["pSortableColumn","status"],["field","status"],["styleClass","w-3rem"],["pInputText","","type","text","placeholder","Szobasz\xe1m...",1,"mr-2",2,"width","8rem",3,"input"],["placeholder","\xc9p\xfclet...",1,"mr-2",3,"showClear","change"],["placeholder","\xc1gytipus...",3,"showClear","change"],["pInputText","","type","text","placeholder","Vend\xe9g...",2,"width","10rem",3,"input"],["appendTo","body","dataType","string","placeholder","Keres\xe9s...","inputStyleClass","w-6rem",3,"showButtonBar","onSelect","onClearClick"],["placeholder","St\xe1tusz...",3,"showClear","change"],["pInputText","","type","text","placeholder","Keres\xe9s...",2,"width","8rem",3,"input"],[3,"value"],[1,"p-column-title"],[1,"flex","align-items-center","gap-2"],[1,"pi","pi-key","vertical-align-middle"],["tooltipPosition","top",1,"text-2xl","font-semibold","white-space-nowrap","vertical-align-middle",3,"pTooltip"],["tooltipPosition","top",1,"block","min-w-max","border-left-1","px-2",3,"pTooltip"],[1,"flex","flex-column","align-items-left","justify-content-center"],[1,"text-base","font-semibold","uppercase"],["class","font-normal text-sm uppercase",4,"ngIf"],["class","pl-1",4,"ngIf"],[1,"font-light","text-xs","uppercase"],["icon","pi pi-user","size","large","shape","circle","tooltipPosition","top",3,"pTooltip",4,"ngFor","ngForOf"],["shape","circle","size","large","tooltipPosition","top",3,"label","style","pTooltip",4,"ngIf"],[2,"max-width","300px"],[1,"calendar-badge"],[1,"pi","pi-calendar","mr-1"],[3,"class",4,"ngIf"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"disabled","click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"disabled","click"],[1,"font-normal","text-sm","uppercase"],[1,"pl-1"],["class","border-round-xl w-min p-0 bg-purple-100",4,"ngIf"],[1,"border-round-xl","w-min","p-0","bg-purple-100"],[1,"flex","align-items-center","justify-content-center","gap-1","px-2"],[4,"ngIf","ngIfElse"],["multipleBabyBeds",""],["src","/assets/demo/images/baby-bed.svg","alt","Baby bed","tooltipPosition","top",2,"max-width","20px",3,"pTooltip"],[1,"text-sm","font-semibold","pl-1"],["class","border-round-xl w-min p-0","style","background-color: #FFEDD5;",4,"ngIf"],[1,"border-round-xl","w-min","p-0",2,"background-color","#FFEDD5"],["src","/assets/demo/images/mattress.svg","alt","Matrac","tooltipPosition","top",2,"max-width","20px",3,"pTooltip"],["pTooltip","\xdajra\xe1gyaz\xe1s sz\xfcks\xe9ges","tooltipPosition","top",1,"pi","pi-refresh","vertical-align-middle"],["icon","pi pi-user","size","large","shape","circle","tooltipPosition","top",3,"pTooltip"],["shape","circle","size","large","tooltipPosition","top",3,"label","pTooltip"],[1,"text-center"],[1,"font-semibold","text-xl"],["novalidate","",1,"grid","formgrid","p-fluid",3,"formGroup","ngSubmit"],["formControlName","id","type","hidden"],["formControlName","conference_id","type","hidden"],["formControlName","room_id","type","hidden"],["formControlName","guestIds","type","hidden"],[1,"field","mb-4","col-12"],["for","conference",1,"font-medium","text-900"],["formControlName","conference","placeholder","V\xe1lasszon konferenci\xe1t...",3,"preselectIds","showNoneOption","selectionLimit","showClear"],["class","block p-error",4,"ngIf"],["for","guest",1,"font-medium","text-900"],["formControlName","guests","placeholder","Vend\xe9g...",3,"filter","preselectIds","emitOnPreselectId","showOnlyNotReserved","groupByRoomMate","showClear"],["for","room_id",1,"font-medium","text-900"],["formControlName","room","placeholder","Szoba...",3,"filter","selectionLimit","preselectIds","emitOnPreselectId","showOnlyNotReserved","showClear"],[1,"field","mb-4","col-6"],["for","startDate",1,"font-medium","text-900"],["id","startDate","formControlName","startDate","dateFormat","yy-mm-dd","dataType","string","appendTo","body",3,"ngClass"],["class","p-error",4,"ngIf"],["for","endDate",1,"font-medium","text-900"],["id","endDate","formControlName","endDate","dateFormat","yy-mm-dd","dataType","string","appendTo","body",3,"ngClass"],["for","status",1,"font-medium","text-900"],["formControlName","status","placeholder","St\xe1tusz...",3,"showClear"],["for","notes",1,"font-medium","text-900"],["id","notes","type","text","formControlName","notes","pInputTextarea","","rows","5"],[1,"block","p-error"],[1,"p-error"],[1,"flex","justify-content-end","ap-2"],["pButton","","pRipple","","label","M\xe9gsem","icon","pi pi-times",1,"p-button-outlined",3,"disabled","click"],["pButton","","pRipple","","label","Ment\xe9s","icon","pi pi-check",1,"p-button","ml-2",3,"disabled","click"],["pButton","","pRipple","","label","Nem","icon","pi pi-times",1,"p-button-outlined",3,"click"],["pButton","","pRipple","","label","Igen","icon","pi pi-check",1,"p-button","ml-2",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3,4),e.NdJ("selectionChange",function(r){return s.selected=r})("onLazyLoad",function(r){return s.onLazyLoad(r)}),e.YNc(5,Wt,42,18,"ng-template",5),e.YNc(6,Xt,37,5,"ng-template",6),e.YNc(7,ms,59,32,"ng-template",7),e.YNc(8,hs,3,1,"ng-template",8),e.qZA()(),e.TgZ(9,"p-sidebar",9),e.NdJ("visibleChange",function(r){return s.sidebar=r})("onHide",function(){return s.onSidebarHide()})("onShow",function(){return s.onSidebarShow()}),e.YNc(10,gs,2,1,"ng-template",6),e.YNc(11,Is,45,39,"ng-container",10),e.YNc(12,Es,3,2,"ng-template",11),e.qZA(),e.TgZ(13,"p-dialog",12),e.NdJ("visibleChange",function(r){return s.deleteDialog=r}),e.TgZ(14,"div",13),e._UZ(15,"i",14),e.YNc(16,As,5,1,"span",10),e.qZA(),e.YNc(17,Rs,2,0,"ng-template",11),e.qZA(),e.TgZ(18,"p-dialog",12),e.NdJ("visibleChange",function(r){return s.bulkDeleteDialog=r}),e.TgZ(19,"div",13),e._UZ(20,"i",14),e.TgZ(21,"span"),e._uU(22,"Biztosan t\xf6r\xf6lni akarja a kiv\xe1lasztott foglal\xe1sokat?"),e.qZA()(),e.YNc(23,Fs,2,0,"ng-template",11),e.qZA()()(),e.TgZ(24,"p-blockUI",15),e._UZ(25,"p-progressSpinner"),e.qZA(),e._UZ(26,"p-toast")(27,"p-confirmDialog",16)),2&t&&(e.xp6(3),e.Q6J("value",s.tableData)("rows",s.rowsPerPage)("totalRecords",s.totalRecords)("globalFilterFields",e.DdM(30,Zs))("paginator",!0)("rowsPerPageOptions",s.rowsPerPageOptions)("showCurrentPageReport",!0)("selection",s.selected)("tableStyle",e.DdM(31,ws))("rowHover",!0)("lazy",!0),e.xp6(6),e.Q6J("visible",s.sidebar)("transitionOptions",".3s cubic-bezier(0, 0, 0.2, 1)")("fullScreen",s.isMobile)("blockScroll",!0),e.xp6(2),e.Q6J("ngIf",s.sidebar),e.xp6(2),e.Akn(e.DdM(32,Re)),e.Q6J("visible",s.deleteDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",s.tableItem),e.xp6(2),e.Akn(e.DdM(33,Re)),e.Q6J("visible",s.bulkDeleteDialog)("modal",!0),e.xp6(6),e.Q6J("autoZIndex",!0)("blocked",s.loading),e.xp6(3),e.Akn(e.DdM(34,Ns)),e.Q6J("closable",!1))},dependencies:[_.mk,_.sg,_.O5,V.iA,E.jx,V.lQ,V.fz,V.UA,V.Mo,v._Y,v.Fj,v.JJ,v.JL,v.On,v.sg,v.u,P.Hq,H.H,de.FN,pe.o,me.V,he.G,ge.b,fe.Y,le.w,Ge.n,Be.p,Ve,it,ht,W.u,Ce.q,xe.H,Se.f,Te.g,qt,_.uU,Y.X$],encapsulation:2})};ie=(0,U.gn)([(0,Ze.k)()],ie);let ks=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#t=this.\u0275mod=e.oAB({type:o});static#s=this.\u0275inj=e.cJS({imports:[O.Bz.forChild([{path:"",component:ie}]),O.Bz]})}return o})();var Ds=c(6263),Ms=c(9502),Os=c(5609),zs=c(6651),Ls=c(7902),Gs=c(1865),Bs=c(2285);let $s=(()=>{class o{static#e=this.\u0275fac=function(s){return new(s||o)};static#t=this.\u0275mod=e.oAB({type:o});static#s=this.\u0275inj=e.cJS({providers:[ce],imports:[_.ez,ks,V.U$,v.u5,v.UX,P.hJ,H.T,de.EV,pe.j,_e.kW,me.S,Ds.W,Ms.$,he.L,ge.u,fe.l,Bs.L,Os.Iu,W.z,zs.q,Ce.F,xe.Q,Ls.JH,Gs.cc,Y.aw,Se._8,ye.o,Te.A,Kt]})}return o})()},746:(ee,$,c)=>{c.d($,{Q:()=>T});var _=c(5619),v=c(9397),O=c(6306),U=c(7398),z=c(2096),F=c(2029),J=c(8814);let T=(()=>{class R{constructor(d){this.apiService=d,this.apiURL=d.apiURL,this.data$=new _.X(null),this.createdGuest$=new _.X(null),this.message$=new _.X(null)}get guestObs(){return this.data$.asObservable()}get createdGuestObs(){return this.createdGuest$.asObservable()}get messageObs(){return this.message$.asObservable()}get(d,h,y,C){let I="";""!==y&&(I=""!=y.sortField?`sort=${y.sortField}&order=${1===y.sortOrder?"ASC":"DESC"}`:"");const Q=""!==I&&""!==C?I+"&"+C:""!==I&&""===C?I:""===I&&""!==C?C:"";this.apiService.get(`guest/get/${d}/${h}${""!==Q?"?"+Q:""}`).subscribe({next:j=>{this.data$.next(j)},error:j=>{this.message$.next(j)}})}getBySearch(d,h,y){let C={};h&&h.sortField&&(C.sort=h.sortField,C.order=1===h.sortOrder?"ASC":"DESC"),y&&y.length>0&&(C.conferenceIds=y.join(",")),this.apiService.get(`guest/search/${encodeURIComponent(d)}`,{params:C}).subscribe({next:I=>{this.data$.next(I)},error:I=>{this.message$.next(I)}})}getBySearchQuery(d){this.apiService.get(`guest/searchquery?${d}`).subscribe({next:h=>{this.data$.next(h)},error:h=>{this.message$.next(h)}})}getBySearchQuery$(d){return this.apiService.get(`guest/searchquery?${d}`)}getByConferenceName(d){return this.apiService.get(`guest/searchquery?conferenceName=${d}`)}getByRFID(d){return this.apiService.get(`guest/getbyrfid/${d}`)}updateLastTagUsage(d){this.apiService.get(`guest/updatelasttagusage/${d}`).subscribe({next:h=>{},error:h=>{this.message$.next(h)}})}create(d,h){const y=new FormData;if(y.append("guest",JSON.stringify(d)),h&&h.length>0)for(const C of h){if(!C)return;y.append("idcard",C,C.name)}this.apiService.post("guest/create/",y).subscribe({next:C=>{this.createdGuest$.next(C.guest);const I=this.registrationToast(C.guest),Q=this.emailStatusToast(C.email);this.message$.next(I),this.message$.next(Q)},error:C=>{this.message$.next({severity:"error",summary:"Vend\xe9g r\xf6gz\xedt\xe9s sikertelen",detail:C?.errorMessage||C?.message||"Ismeretlen hiba t\xf6rt\xe9nt."})}})}update(d,h=[]){const y={...d};if(delete y.idcard,h&&h.length>0){const C=new FormData;C.append("guest",JSON.stringify(y));for(const I of h)I&&C.append("idcard",I,I.name);this.apiService.put(`guest/update/${d.id}`,C).subscribe({next:()=>{this.message$.next("success")},error:I=>{this.message$.next(I)}})}else y.idCardUploaded=0,this.apiService.put(`guest/update/${d.id}`,y).subscribe({next:()=>{this.message$.next("success")},error:C=>{this.message$.next(C)}})}updateGuest2(d){return this.apiService.put(`guest/update/${d.id}`,d).pipe((0,v.b)(()=>console.log(`updated guest id=${d.id}`)),(0,O.K)(this.handleError("updateGuest2")))}delete(d){this.apiService.delete(`guest/delete/${d.id}`).subscribe({next:h=>{this.message$.next({severity:"success",summary:"Sikeres vend\xe9g t\xf6rl\xe9s",detail:`${d.lastName} ${d.firstName} t\xf6r\xf6lve`})},error:h=>{this.message$.next(h)}})}bulkdelete(d){let h={ids:d.map(y=>y.id)};this.apiService.post("guest/bulkdelete",h).subscribe({next:y=>{this.message$.next({severity:"success",summary:"Sikeres vend\xe9g t\xf6rl\xe9s",detail:`${d.length} vend\xe9g t\xf6r\xf6lve`})},error:y=>{this.message$.next(y)}})}searchGuestsForSelector$(d={}){const h=this.buildGuestQS(d);return this.apiService.get(`guest/searchquery?${h}`).pipe((0,U.U)(y=>y?y.rows??[]:[]))}buildGuestQS(d={}){const h=[];return null!=d.conferenceId&&h.push(`conferenceid=${encodeURIComponent(String(d.conferenceId))}`),"number"==typeof d.minBeds&&h.push(`minBeds=${d.minBeds}`),"boolean"==typeof d.climate&&h.push("climate="+(d.climate?1:0)),d.onlyNotReserved&&h.push("onlyNotReserved=true"),d.includeGuestIds?.length&&h.push(`includeGuestIds=${d.includeGuestIds.join(",")}`),d.enabled&&h.push("enabled=1"),h.join("&")}handleError(d="operation",h){return y=>(console.error(y),console.error(`${d} failed: ${y.message}`),(0,z.of)(h))}emailStatusToast(d){if(!d)return{severity:"warn",summary:"E-mail",detail:"E-mail st\xe1tusz ismeretlen."};switch(d.status){case"sent":return{severity:"success",summary:"E-mail",detail:"Visszaigazol\xf3 e-mail elk\xfcldve."};case"timeout":return{severity:"warn",summary:"E-mail",detail:"Az e-mail k\xfcld\xe9s id\u0151korl\xe1tot \xe9rt el."};case"failed":return{severity:"error",summary:"E-mail hiba",detail:d.message||"Az e-mail k\xfcld\xe9s nem siker\xfclt."};default:return{severity:"info",summary:"E-mail",detail:"E-mail st\xe1tusz: ismeretlen."}}}registrationToast(d){return{severity:"success",summary:"Vend\xe9g r\xf6gz\xedtve",detail:(d?.lastName&&d?.firstName?`${d.lastName} ${d.firstName}`:"Vend\xe9g")+" sikeresen r\xf6gz\xedtve."}}static#e=this.\u0275fac=function(h){return new(h||R)(F.LFG(J.s))};static#t=this.\u0275prov=F.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"})}return R})()},1116:(ee,$,c)=>{function _(v,O){return U=>{const z=U.get(v)?.value,F=U.get(O)?.value;return z&&F&&(new Date(z)>new Date(F)||new Date(F)<new Date(z))?{dateRangeInvalid:!0}:null}}c.d($,{W:()=>_})},6218:(ee,$,c)=>{c.d($,{A:()=>z,g:()=>U});var _=c(2029),v=c(6814),O=c(6223);let U=(()=>{class F{el;ngModel;control;cd;autoResize;onResize=new _.vpe;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;constructor(T,R,G,d){this.el=T,this.ngModel=R,this.control=G,this.cd=d}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(T){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(T){this.autoResize&&this.resize(T)}onBlur(T){this.autoResize&&this.resize(T)}resize(T){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(T||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}static \u0275fac=function(R){return new(R||F)(_.Y36(_.SBq),_.Y36(O.On,8),_.Y36(O.a5,8),_.Y36(_.sBO))};static \u0275dir=_.lG2({type:F,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(R,G){1&R&&_.NdJ("input",function(h){return G.onInput(h)})("focus",function(h){return G.onFocus(h)})("blur",function(h){return G.onBlur(h)}),2&R&&_.ekj("p-filled",G.filled)("p-inputtextarea-resizable",G.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}})}return F})(),z=(()=>{class F{static \u0275fac=function(R){return new(R||F)};static \u0275mod=_.oAB({type:F});static \u0275inj=_.cJS({imports:[v.ez]})}return F})()}}]);