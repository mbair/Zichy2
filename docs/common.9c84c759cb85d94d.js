(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8592],{117:(x,v,l)=>{"use strict";l.d(v,{T:()=>d});var e=l(2029),c=l(6223),h=l(7394),g=l(1206),E=l(6193),u=l(6814),i=l(5219),n=l(3965),a=l(9515);function s(o,_){if(1&o&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&o){const t=_.$implicit,p=e.oxw(2);e.Q6J("ngClass",p.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}function r(o,_){if(1&o&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&o){const t=_.$implicit,p=e.oxw(2);e.Q6J("ngClass",p.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}const f=function(){return{minWidth:"13rem"}};function m(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(y){e.CHM(t);const T=e.oxw();return e.KtG(T.handleOnChange(y))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,s,3,2,"ng-template",3),e.YNc(4,r,3,2,"ng-template",4),e.qZA()}if(2&o){const t=_.ngIf,p=e.oxw();e.Akn(e.DdM(11,f)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("formControl",t)("options",p.users)("showClear",p.showClear)}}function C(o,_){if(1&o&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&o){const t=_.$implicit,p=e.oxw(2);e.Q6J("ngClass",p.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",t.fullname," ")}}function w(o,_){if(1&o&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&o){const t=_.$implicit,p=e.oxw(2);e.Q6J("ngClass",p.getRoleStyleClass(t.user_rolesid)),e.xp6(2),e.hij(" ",null==t?null:t.fullname," ")}}function b(o,_){if(1&o){const t=e.EpF();e.TgZ(0,"p-dropdown",7),e.NdJ("ngModelChange",function(y){e.CHM(t);const T=e.oxw();return e.KtG(T.selectedUser=y)})("onChange",function(y){e.CHM(t);const T=e.oxw();return e.KtG(T.handleOnChange(y))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,C,3,2,"ng-template",3),e.YNc(4,w,3,2,"ng-template",4),e.qZA()}if(2&o){const t=e.oxw();e.Akn(e.DdM(11,f)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("ngModel",t.selectedUser)("options",t.users)("showClear",t.showClear)}}let d=(()=>{class o{constructor(t,p,y){this.userService=t,this.roleService=p,this.cdRef=y,this.change=new e.vpe,this.disabled=!1,this.users=[],this.selectedUser="",this.roles=[],this.subs=new h.w0,this.onChange=T=>{},this.onTouched=()=>{}}ngOnInit(){this.subs.add(this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:t=>{t&&(this.users=this.user_rolesid?t.filter(p=>p.user_rolesid===this.user_rolesid):t,this.fetchRolesForUsers(),this.selectedUser&&!this.users.some(p=>p.id===this.selectedUser)&&(this.selectedUser="",this.onChange("")),this.cdRef.detectChanges())}}))}ngOnDestroy(){this.subs.unsubscribe()}ngOnChanges(t){t.user_rolesid&&!t.user_rolesid.firstChange&&this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:p=>{this.users=this.user_rolesid?p.filter(y=>y.user_rolesid===this.user_rolesid):p,this.selectedUser&&!this.users.some(y=>y.id===this.selectedUser)&&(this.selectedUser="",this.onChange("")),this.cdRef.detectChanges()}})}fetchRolesForUsers(){this.subs.add(this.roleService.fetchRoles().subscribe({next:t=>{this.roles=t,this.cdRef.detectChanges()}}))}getFormControl(){return this.parentForm?this.parentForm.get(this.controlName):null}handleOnChange(t){this.selectedUser=t.value,this.onChange(t.value),this.onTouched(),this.change.emit({value:t.value,field:this.controlName})}getRoleStyleClass(t){const p=this.roles.find(T=>T.id==t);return`user-role-badge role-${p?p?.name?.trim().toLowerCase().replace(/\s+/g,""):""}`}setDisabledState(t){this.disabled=t,this.cdRef.detectChanges()}writeValue(t){this.selectedUser=t,this.cdRef.detectChanges()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static#e=this.\u0275fac=function(p){return new(p||o)(e.Y36(g.K),e.Y36(E.N),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",user_rolesid:"user_rolesid",showClear:"showClear"},outputs:{change:"change"},features:[e._Bn([{provide:c.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.TTD],decls:3,vars:2,consts:[["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","style","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],[1,"pi","pi-user","mr-1"],["optionLabel","fullname","optionValue","id","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(p,y){if(1&p&&(e.YNc(0,m,5,12,"p-dropdown",0),e.YNc(1,b,5,12,"ng-template",null,1,e.W1O)),2&p){const T=e.MAs(2);e.Q6J("ngIf",y.getFormControl())("ngIfElse",T)}},dependencies:[u.mk,u.O5,c.JJ,c.On,c.oH,i.jx,n.Lt,a.X$],encapsulation:2})}return o})()},3139:(x,v,l)=>{"use strict";l.d(v,{Q:()=>h});var e=l(8645),c=l(2029);let h=(()=>{class g{constructor(){this.mealChanged=new e.x,this.meals={breakfast:{begin:7,end:10},lunch:{begin:11,end:15},dinner:{begin:17,end:20}},this.checkMealStart(),setInterval(()=>{this.checkMealStart()},2e4)}checkMealStart(){const i=(new Date).getHours();for(const n of Object.keys(this.meals)){const a=this.meals[n];if(i>=a.begin&&i<a.end)return void this.mealChanged.next(n)}}getMealNameByTime(u){const i=u.getHours();for(const n in this.meals){const a=this.meals[n];if(i>=a.begin&&i<=a.end)return this.translateMealName(n)}return"Jelenleg nincs \xe9tkeztet\xe9s"}getMealsForSelector(){let u=[];for(const i in this.meals)u.push(this.translateMealName(i));return u}translateMealName(u){return{breakfast:"reggeli",lunch:"eb\xe9d",dinner:"vacsora"}[u]||u}isOpen(){const u=(new Date).getHours();for(const i in this.meals){const n=this.meals[i];if(u>=n.begin&&u<n.end)return!0}return!1}static#e=this.\u0275fac=function(i){return new(i||g)};static#t=this.\u0275prov=c.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},2835:(x,v,l)=>{"use strict";l.d(v,{c:()=>g});var e=l(5619),c=l(2029),h=l(8814);let g=(()=>{class E{constructor(i){this.apiService=i,this.apiURL=i.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get tagObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(i,n,a,s){let r="";""!==a&&(r=""!=a.sortField?`sort=${a.sortField}&order=${1===a.sortOrder?"ASC":"DESC"}`:"");const f=""!==r&&""!==s?r+"&"+s:""!==r&&""===s?r:""===r&&""!==s?s:"";this.apiService.get(`rfid/get/${i}/${n}${""!==f?"?"+f:""}`).subscribe({next:C=>{let w=C.rows;w&&w.length>0&&w.forEach(b=>{b.identifier=b.rfid}),this.data$.next(C)},error:C=>{this.message$.next(C)}})}getBySearch(i,n){let a="";""!==n&&(a=""!=n.sortField?`?sort=${n.sortField}&order=${1===n.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`rfid/search/${i}${a}`).subscribe({next:s=>{let r=s.rows;r&&r.length>0&&r.forEach(f=>{f.identifier=f.rfid}),this.data$.next(s)},error:s=>{this.message$.next(s)}})}getBySearchQuery(i){this.apiService.get(`rfid/searchquery?${i}`).subscribe({next:n=>{let a=n.rows;a&&a.length>0&&a.forEach(s=>{s.identifier=s.rfid}),this.data$.next(n)},error:n=>{this.message$.next(n)}})}create(i){this.apiService.post("rfid/create/",i).subscribe({next:n=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke r\xf6gz\xedt\xe9s",detail:`${i.rfid} r\xf6gz\xedtve`})},error:n=>{this.message$.next(n)}})}update(i){this.apiService.put(`rfid/update/${i.id}`,i).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke m\xf3dos\xedt\xe1s",detail:`${i.rfid} m\xf3dos\xedtva`})},error:n=>{this.message$.next(n)}})}delete(i){this.apiService.delete(`rfid/delete/${i.id}`).subscribe({next:n=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${i.rfid} t\xf6r\xf6lve`})},error:n=>{this.message$.next(n)}})}bulkdelete(i){let n={ids:i.map(a=>a.id)};this.apiService.post("rfid/bulkdelete",n).subscribe({next:a=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${i.length} c\xedmke t\xf6r\xf6lve`})},error:a=>{this.message$.next(a)}})}getByRFID(i){return this.apiService.get(`rfid/search/${i}`)}static#e=this.\u0275fac=function(n){return new(n||E)(c.LFG(h.s))};static#t=this.\u0275prov=c.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},1836:(x,v,l)=>{"use strict";function e(){return c=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(c.value)?null:{invalidEmail:{value:c.value}}}l.d(v,{u:()=>e})},8842:(x,v,l)=>{"use strict";function e(){return c=>{const h=c.get("password"),g=c.get("password_again");return h&&g&&h.value!==g.value?{passwordsDoNotMatch:!0}:null}}l.d(v,{C:()=>e})},217:function(x,v){var l,c;void 0!==(c="function"==typeof(l=function(){"use strict";function g(s,r,f){var m=new XMLHttpRequest;m.open("GET",s),m.responseType="blob",m.onload=function(){a(m.response,r,f)},m.onerror=function(){console.error("could not download file")},m.send()}function E(s){var r=new XMLHttpRequest;r.open("HEAD",s,!1);try{r.send()}catch{}return 200<=r.status&&299>=r.status}function u(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(r)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,n=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(s,r,f){var m=i.URL||i.webkitURL,C=document.createElement("a");C.download=r=r||s.name||"download",C.rel="noopener","string"==typeof s?(C.href=s,C.origin===location.origin?u(C):E(C.href)?g(s,r,f):u(C,C.target="_blank")):(C.href=m.createObjectURL(s),setTimeout(function(){m.revokeObjectURL(C.href)},4e4),setTimeout(function(){u(C)},0))}:"msSaveOrOpenBlob"in navigator?function(s,r,f){if(r=r||s.name||"download","string"!=typeof s)navigator.msSaveOrOpenBlob(function h(s,r){return typeof r>"u"?r={autoBom:!1}:"object"!=typeof r&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\ufeff",s],{type:s.type}):s}(s,f),r);else if(E(s))g(s,r,f);else{var m=document.createElement("a");m.href=s,m.target="_blank",setTimeout(function(){u(m)})}}:function(s,r,f,m){if((m=m||open("","_blank"))&&(m.document.title=m.document.body.innerText="downloading..."),"string"==typeof s)return g(s,r,f);var C="application/octet-stream"===s.type,w=/constructor/i.test(i.HTMLElement)||i.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||C&&w||n)&&typeof FileReader<"u"){var d=new FileReader;d.onloadend=function(){var t=d.result;t=b?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=t:location=t,m=null},d.readAsDataURL(s)}else{var o=i.URL||i.webkitURL,_=o.createObjectURL(s);m?m.location=_:location.href=_,m=null,setTimeout(function(){o.revokeObjectURL(_)},4e4)}});i.saveAs=a.saveAs=a,x.exports=a})?l.apply(v,[]):l)&&(x.exports=c)},4532:(x,v,l)=>{"use strict";l.d(v,{d:()=>b});var e=l(6814),c=l(2029),h=l(5219);let b=(()=>{class d{static \u0275fac=function(t){return new(t||d)};static \u0275mod=c.oAB({type:d});static \u0275inj=c.cJS({imports:[e.ez,h.m8]})}return d})()},1913:(x,v,l)=>{"use strict";l.d(v,{h:()=>g,l:()=>E});var e=l(6814),c=l(2029),h=l(2076);let g=(()=>{class u{el;renderer;zone;constructor(n,a,s){this.el=n,this.renderer=a,this.zone=s}selector;enterClass;enterActiveClass;enterToClass;leaveClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;eventListener;documentClickListener;documentKeydownListener;target;enterListener;leaveListener;animating;clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){h.p.hasClass(this.target,this.toggleClass)?h.p.removeClass(this.target,this.toggleClass):h.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",h.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",h.p.addClass(this.target,"hidden"),this.target.style.height=""),h.p.addClass(this.target,this.enterActiveClass),this.enterClass&&h.p.removeClass(this.target,this.enterClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{h.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&h.p.addClass(this.target,this.enterToClass),this.enterListener&&this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterClass&&h.p.removeClass(this.target,this.enterClass),this.enterToClass&&h.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,h.p.addClass(this.target,this.leaveActiveClass),this.leaveClass&&h.p.removeClass(this.target,this.leaveClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{h.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&h.p.addClass(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):(this.leaveClass&&h.p.removeClass(this.target,this.leaveClass),this.leaveToClass&&h.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",n=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(n)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",n=>{const{key:a,keyCode:s,which:r}=n;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===a&&27===s&&27===r&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(n){return!this.el.nativeElement.isSameNode(n.target)&&!this.el.nativeElement.contains(n.target)&&!this.target.contains(n.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}static \u0275fac=function(a){return new(a||u)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.R0b))};static \u0275dir=c.lG2({type:u,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(a,s){1&a&&c.NdJ("click",function(f){return s.clickListener(f)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}})}return u})(),E=(()=>{class u{static \u0275fac=function(a){return new(a||u)};static \u0275mod=c.oAB({type:u});static \u0275inj=c.cJS({imports:[e.ez]})}return u})()}}]);