"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[9474],{9474:(O,p,l)=>{l.d(p,{w:()=>t});var i=l(2029),m=l(6223),g=l(7394),C=l(219),f=l(5219),_=l(4055),S=l(9515);const d=["conferenceSelector"];function v(n,o){1&n&&i._uU(0),2&n&&i.hij(" ",o.$implicit.name," ")}function s(n,o){1&n&&i._uU(0),2&n&&i.hij(" ",o.$implicit.name," ")}let t=(()=>{class n{set preselectConferenceId(e){this._pendingSelectId=e,this.tryPreselectById()}runSilently(e){this.suppress++;try{return e()}finally{this.suppress--}}constructor(e,r,c){this.conferenceService=e,this.messageService=r,this.cdr=c,this.selectFirstOption=!1,this.showClear=!0,this.style={},this.disabledOptions=[],this.emitOnSelectFirstOption=!1,this.emitOnPreselectId=!1,this.emitOnWriteValue=!1,this.change=new i.vpe,this.loading=!0,this.disabled=!1,this.conferences=[],this.originalConferences=[],this.selectedConferences=[],this.subscriptions=new g.w0,this.suppress=0,this.onChange=a=>{},this.onTouched=()=>{}}ngOnInit(){const e=this.conferenceService.getConferencesForSelector().subscribe({next:r=>{this.conferences=r??[],this.originalConferences=[...r??[]],this.syncSelectedConferences(),this.handleSelectFirstOption(),this.updateDisabledFlags(),this.tryPreselectById(),this.loading=!1},error:()=>{this.conferences=[],this.originalConferences=[],this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load conferences. Please try again later."})}});this.subscriptions.add(e)}ngOnChanges(e){e.disabledOptions&&this.originalConferences.length>0&&this.updateDisabledFlags(),e.preselectConferenceId&&this.tryPreselectById()}ngOnDestroy(){this.subscriptions.unsubscribe()}updateDisabledFlags(){this.conferences=this.originalConferences.map(e=>({...e,disabled:this.disabledOptions.some(r=>r.id===e.id)})),this.cdr.markForCheck()}setSelection(e,r){const c=r?.source??"programmatic";this.runSilently(()=>{this.selectedConferences=e?.slice(0,this.selectionLimit??e.length)??[]}),r?.emit?this.emit(this.selectedConferences,c,!0):this.cdr.markForCheck()}clearSelection(e){const r=e?.source??"programmatic";this.runSilently(()=>{this.selectedConferences=[]}),e?.emit?this.emit(this.selectedConferences,r,!0):this.cdr.markForCheck();try{this.conferenceSelectorRef?.updateLabel?.()}catch{}}handleSelectFirstOption(){this.selectFirstOption&&0===this.selectedConferences.length&&this.conferences.length&&(this.runSilently(()=>{this.selectedConferences=this.conferences.slice(0,this.selectionLimit??1)}),this.emitOnSelectFirstOption?this.emit(this.selectedConferences,"auto-select-first",!0):this.cdr.markForCheck())}tryPreselectById(){if(!this.conferences?.length||null==this._pendingSelectId)return;const e=this.conferences.find(r=>r.id===this._pendingSelectId);this.runSilently(()=>{this.selectedConferences=e?[e]:[]}),this.emitOnPreselectId?this.emit(this.selectedConferences,"preselect-id",!0):this.cdr.markForCheck()}setDisabledState(e){this.disabled=e}syncSelectedConferences(){this.selectedConferences=this.conferences.filter(e=>this.selectedConferences.some(r=>r.id===e.id)),this.onChange(this.selectedConferences),this.cdr.markForCheck()}onSelectionChange(e){this.selectedConferences=e.value,this.emit(this.selectedConferences,"user"),1==this.selectionLimit&&this.selectedConferences?.length>=1&&setTimeout(()=>this.conferenceSelectorRef?.hide())}onSelectionClear(){this.selectedConferences=[],this.emit(this.selectedConferences,"user",!0)}emit(e,r,c=!1){this.suppress&&!c||(this.onChange(e),this.onTouched(),this.change.emit({value:e,source:r}),this.cdr.markForCheck())}writeValue(e){this.runSilently(()=>{this.selectedConferences=e?.slice(0,this.selectionLimit??e.length)??[]}),this.emitOnWriteValue?this.emit(this.selectedConferences,"programmatic",!0):this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}static#e=this.\u0275fac=function(r){return new(r||n)(i.Y36(C.Z),i.Y36(f.ez),i.Y36(i.sBO))};static#t=this.\u0275cmp=i.Xpm({type:n,selectors:[["app-conference-selector"]],viewQuery:function(r,c){if(1&r&&i.Gf(d,5),2&r){let a;i.iGM(a=i.CRH())&&(c.conferenceSelectorRef=a.first)}},inputs:{selectionLimit:"selectionLimit",selectFirstOption:"selectFirstOption",placeholder:"placeholder",showClear:"showClear",style:"style",disabledOptions:"disabledOptions",emitOnSelectFirstOption:"emitOnSelectFirstOption",emitOnPreselectId:"emitOnPreselectId",emitOnWriteValue:"emitOnWriteValue",preselectConferenceId:"preselectConferenceId"},outputs:{change:"change"},features:[i._Bn([{provide:m.JU,useExisting:(0,i.Gpc)(()=>n),multi:!0}]),i.TTD],decls:5,vars:14,consts:[["dataKey","id","optionLabel","name","optionDisabled","disabled","scrollHeight","400px","appendTo","body","display","chip",1,"multiselect-custom-virtual-scroll",3,"options","ngModel","disabled","selectionLimit","placeholder","emptyMessage","virtualScroll","virtualScrollItemSize","showClear","resetFilterOnHide","ngModelChange","onChange","onClear"],["conferenceSelector",""],["pTemplate","item"],["pTemplate","selectedItem"]],template:function(r,c){1&r&&(i.TgZ(0,"p-multiSelect",0,1),i.NdJ("ngModelChange",function(u){return c.selectedConferences=u})("onChange",function(u){return c.onSelectionChange(u)})("onClear",function(){return c.onSelectionClear()}),i.ALo(2,"translate"),i.YNc(3,v,1,1,"ng-template",2),i.YNc(4,s,1,1,"ng-template",3),i.qZA()),2&r&&(i.Akn(c.style),i.s9C("emptyMessage",i.lcZ(2,12,"Nincs tal\xe1lat...")),i.Q6J("options",c.conferences)("ngModel",c.selectedConferences)("disabled",c.disabled)("selectionLimit",c.selectionLimit)("placeholder",c.placeholder)("virtualScroll",!0)("virtualScrollItemSize",43)("showClear",c.showClear)("resetFilterOnHide",!0))},dependencies:[m.JJ,m.On,f.jx,_.NU,S.X$],encapsulation:2,changeDetection:0})}return n})()},219:(O,p,l)=>{l.d(p,{Z:()=>S});var i=l(5619),m=l(7398),g=l(6306),C=l(2096),f=l(2029),_=l(8814);let S=(()=>{class d{constructor(s){this.apiService=s,this.apiURL=s.apiURL,this.data$=new i.X(null),this.message$=new i.X(null)}get conferenceObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(s,t,n,o){const e=localStorage.getItem("userrole"),r=localStorage.getItem("userid");if("Szervezo"===e&&r){const h=`organizer_user_id=${r}`;o=o?`${o}&${h}`:h}o.includes("enabled=")||(o=o?`${o}&enabled=1`:"enabled=1");let c="";""!==n&&(c=`sort=${n.sortField&&""!==n.sortField?n.sortField:"beginDate"}&order=${1===n.sortOrder?"ASC":"DESC"}`);const a=""!==c&&""!==o?c+"&"+o:""!==c&&""===o?c:""===c&&""!==o?o:"";this.apiService.get(`conference/get/${s}/${t}${""!==a?"?"+a:""}`).subscribe({next:h=>{this.data$.next(h)},error:h=>{this.message$.next(h)}})}getBySearch(s,t){let n="";""!==t&&(n=""!=t.sortField?`?sort=${t.sortField}&order=${1===t.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`conference/search/${s}${n}`).subscribe({next:o=>{this.data$.next(o)},error:o=>{this.message$.next(o)}})}getBySearchQuery(s){this.apiService.get(`conference/searchquery?${s}`).subscribe({next:t=>{this.data$.next(t)},error:t=>{this.message$.next(t)}})}create(s){this.apiService.post("conference/create/",s).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres konferencia r\xf6gz\xedt\xe9s",detail:`${s.name} r\xf6gz\xedtve`})},error:t=>{this.message$.next(t)}})}update(s){this.apiService.put(`conference/update/${s.id}`,s).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres konferencia m\xf3dos\xedt\xe1s",detail:`${s.name} m\xf3dos\xedtva`})},error:t=>{this.message$.next(t)}})}delete(s){this.apiService.delete(`conference/delete/${s.id}`).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres konferencia t\xf6rl\xe9s",detail:`${s.name} t\xf6r\xf6lve`})},error:t=>{this.message$.next(t)}})}bulkdelete(s){let t={ids:s.map(n=>n.id)};this.apiService.post("conference/bulkdelete",t).subscribe({next:n=>{this.message$.next({severity:"success",summary:"Sikeres konferencia t\xf6rl\xe9s",detail:`${s.length} konferencia t\xf6r\xf6lve`})},error:n=>{this.message$.next(n)}})}getConferencesForSelector(){return this.get(0,999,{sortField:"beginDate",sortOrder:1},""),this.data$.asObservable().pipe((0,m.U)(t=>t?t.rows:[]))}getById(s){return this.apiService.get(`conference/getbyid/${s}`)}isSlugValid(s){return this.get(0,20,"slug=","sort"),this.data$.pipe((0,m.U)(t=>t&&t.data&&t.rows.length>0),(0,g.K)(()=>(0,C.of)(!1)))}assignRoomsToConference(s,t){return this.apiService.post(`conferencesroom/addroom/${s.id}`,{roomIds:t})}removeRoomsFromConference(s,t){this.apiService.post(`conferencesroom/removeroom/${s}`,{roomIds:t}).subscribe({next:n=>{this.message$.next({severity:"success",summary:"\xd6sszerendel\xe9s t\xf6r\xf6lve",detail:"Szoba-konferencia \xf6sszerendel\xe9s t\xf6r\xf6lve"})},error:n=>{this.message$.next(n)}})}saveFormFieldInfos(s){this.apiService.post(`conference/saveFormFieldInfos/${s.conferenceId}`,s.fields).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Mez\u0151 inform\xe1ci\xf3k mentve",detail:"\u0170rlap mez\u0151 inform\xe1ci\xf3k sikeresen mentve"})},error:t=>{this.message$.next(t)}})}static#e=this.\u0275fac=function(t){return new(t||d)(f.LFG(_.s))};static#t=this.\u0275prov=f.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);