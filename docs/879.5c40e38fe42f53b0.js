"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[879],{3613:(D,x,l)=>{l.r(x),l.d(x,{EcommerceDashboardModule:()=>te});var d=l(6814),_=l(1640),Z=l(7582),T=l(4279),v=l(5219),y=l(6676),e=l(2029),f=l(5619),g=l(8814);let L=(()=>{class n{constructor(t){this.apiService=t,this.apiURL=t.apiURL,this.data$=new f.X(null),this.message$=new f.X(null)}get dashboardObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}getInformations(){this.apiService.get("dashboard/getinformations").subscribe({next:t=>{this.data$.next(t)},error:t=>{this.message$.next(t)}})}static#e=this.\u0275fac=function(a){return new(a||n)(e.LFG(g.s))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var i=l(219),r=l(746),c=l(1206);let u=(()=>{class n{constructor(t){this.apiService=t,this.activities=[{activityName:"Bejelentkez\xe9s",userName:"Timi",timestamp:new Date},{activityName:"Szoba hozz\xe1rendel\xe9s",userName:"Admin",timestamp:new Date},{activityName:"Jelentkez\xe9s elutas\xedt\xe1s",userName:"Admin",timestamp:new Date},{activityName:"Konyhanapt\xe1r megtekint\xe9se",userName:"Konyha admin",timestamp:new Date},{activityName:"Takar\xf3 hozz\xe1ad\xe1sa",userName:"Tak. admin",timestamp:new Date}]}getActivities(){return this.activities}addActivity(t){this.activities.push(t)}getInformation(){this.apiService.get("dashboard/getinformations").subscribe({next:t=>{},error:t=>{}})}static#e=this.\u0275fac=function(a){return new(a||n)(e.LFG(g.s))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var m=l(3859),b=l(707),w=l(4480),C=l(3965),E=l(6223),M=l(9552),U=l(3714),S=l(9252);function R(n,s){if(1&n&&(e.O4$(),e.TgZ(0,"text",5),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.uIk("x",50)("y",57)("fill",t.textColor)("name",t.name),e.xp6(1),e.Oqu(t.valueToDisplay())}}const z={provide:E.JU,useExisting:(0,e.Gpc)(()=>$),multi:!0};let $=(()=>{class n{document;renderer;cd;el;styleClass;style;valueColor="var(--primary-color, Black)";rangeColor="var(--surface-border, LightGray)";textColor="var(--text-color-secondary, Black)";valueTemplate="{value}";name;size=100;step=1;min=0;max=100;strokeWidth=14;disabled;showValue=!0;readonly=!1;onChange=new e.vpe;radius=40;midX=50;midY=50;minRadians=4*Math.PI/3;maxRadians=-Math.PI/3;value=0;windowMouseMoveListener;windowMouseUpListener;windowTouchMoveListener;windowTouchEndListener;onModelChange=()=>{};onModelTouched=()=>{};constructor(t,a,o,h){this.document=t,this.renderer=a,this.cd=o,this.el=h}mapRange(t,a,o,h,p){return(t-a)*(p-h)/(o-a)+h}onClick(t){!this.disabled&&!this.readonly&&this.updateValue(t.offsetX,t.offsetY)}updateValue(t,a){let p=Math.atan2(this.size/2-a,t-this.size/2),O=-Math.PI/2-Math.PI/6;this.updateModel(p,O)}updateModel(t,a){let o;if(t>this.maxRadians)o=this.mapRange(t,this.minRadians,this.maxRadians,this.min,this.max);else{if(!(t<a))return;o=this.mapRange(t+2*Math.PI,this.minRadians,this.maxRadians,this.min,this.max)}let h=Math.round((o-this.min)/this.step)*this.step+this.min;this.value=h,this.onModelChange(this.value),this.onChange.emit(this.value)}onMouseDown(t){if(!this.disabled&&!this.readonly){const a=this.document.defaultView||"window";this.windowMouseMoveListener=this.renderer.listen(a,"mousemove",this.onMouseMove.bind(this)),this.windowMouseUpListener=this.renderer.listen(a,"mouseup",this.onMouseUp.bind(this)),t.preventDefault()}}onMouseUp(t){!this.disabled&&!this.readonly&&(this.windowMouseMoveListener&&(this.windowMouseMoveListener(),this.windowMouseUpListener=null),this.windowMouseUpListener&&(this.windowMouseUpListener(),this.windowMouseMoveListener=null),t.preventDefault())}onTouchStart(t){if(!this.disabled&&!this.readonly){const a=this.document.defaultView||"window";this.windowTouchMoveListener=this.renderer.listen(a,"touchmove",this.onTouchMove.bind(this)),this.windowTouchEndListener=this.renderer.listen(a,"touchend",this.onTouchEnd.bind(this)),t.preventDefault()}}onTouchEnd(t){!this.disabled&&!this.readonly&&(this.windowTouchMoveListener&&this.windowTouchMoveListener(),this.windowTouchEndListener&&this.windowTouchEndListener(),this.windowTouchMoveListener=null,this.windowTouchEndListener=null,t.preventDefault())}onMouseMove(t){!this.disabled&&!this.readonly&&(this.updateValue(t.offsetX,t.offsetY),t.preventDefault())}onTouchMove(t){if(!this.disabled&&!this.readonly&&t instanceof TouchEvent&&1===t.touches.length){const a=this.el.nativeElement.children[0].getBoundingClientRect(),o=t.targetTouches.item(0);o&&this.updateValue(o.clientX-a.left,o.clientY-a.top)}}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}containerClass(){return{"p-knob p-component":!0,"p-disabled":this.disabled}}rangePath(){return`M ${this.minX()} ${this.minY()} A ${this.radius} ${this.radius} 0 1 1 ${this.maxX()} ${this.maxY()}`}valuePath(){return`M ${this.zeroX()} ${this.zeroY()} A ${this.radius} ${this.radius} 0 ${this.largeArc()} ${this.sweep()} ${this.valueX()} ${this.valueY()}`}zeroRadians(){return this.mapRange(this.min>0&&this.max>0?this.min:0,this.min,this.max,this.minRadians,this.maxRadians)}valueRadians(){return this.mapRange(this._value,this.min,this.max,this.minRadians,this.maxRadians)}minX(){return this.midX+Math.cos(this.minRadians)*this.radius}minY(){return this.midY-Math.sin(this.minRadians)*this.radius}maxX(){return this.midX+Math.cos(this.maxRadians)*this.radius}maxY(){return this.midY-Math.sin(this.maxRadians)*this.radius}zeroX(){return this.midX+Math.cos(this.zeroRadians())*this.radius}zeroY(){return this.midY-Math.sin(this.zeroRadians())*this.radius}valueX(){return this.midX+Math.cos(this.valueRadians())*this.radius}valueY(){return this.midY-Math.sin(this.valueRadians())*this.radius}largeArc(){return Math.abs(this.zeroRadians()-this.valueRadians())<Math.PI?0:1}sweep(){return this.valueRadians()>this.zeroRadians()?0:1}valueToDisplay(){return this.valueTemplate.replace("{value}",this._value.toString())}get _value(){return null!=this.value?this.value:this.min}static \u0275fac=function(a){return new(a||n)(e.Y36(d.K0),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(e.SBq))};static \u0275cmp=e.Xpm({type:n,selectors:[["p-knob"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",valueColor:"valueColor",rangeColor:"rangeColor",textColor:"textColor",valueTemplate:"valueTemplate",name:"name",size:"size",step:"step",min:"min",max:"max",strokeWidth:"strokeWidth",disabled:"disabled",showValue:"showValue",readonly:"readonly"},outputs:{onChange:"onChange"},features:[e._Bn([z])],decls:5,vars:15,consts:[[3,"ngClass","ngStyle"],["viewBox","0 0 100 100",3,"click","mousedown","mouseup","touchstart","touchend"],[1,"p-knob-range"],[1,"p-knob-value"],["text-anchor","middle","class","p-knob-text",4,"ngIf"],["text-anchor","middle",1,"p-knob-text"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.O4$(),e.TgZ(1,"svg",1),e.NdJ("click",function(p){return o.onClick(p)})("mousedown",function(p){return o.onMouseDown(p)})("mouseup",function(p){return o.onMouseUp(p)})("touchstart",function(p){return o.onTouchStart(p)})("touchend",function(p){return o.onTouchEnd(p)}),e._UZ(2,"path",2)(3,"path",3),e.YNc(4,R,2,5,"text",4),e.qZA()()),2&a&&(e.Tol(o.styleClass),e.Q6J("ngClass",o.containerClass())("ngStyle",o.style),e.xp6(1),e.Udp("width",o.size+"px")("height",o.size+"px"),e.xp6(1),e.uIk("d",o.rangePath())("stroke-width",o.strokeWidth)("stroke",o.rangeColor),e.xp6(1),e.uIk("d",o.valuePath())("stroke-width",o.strokeWidth)("stroke",o.valueColor),e.xp6(1),e.Q6J("ngIf",o.showValue))},dependencies:[d.mk,d.O5,d.PC],styles:["@keyframes dash-frame{to{stroke-dashoffset:0}}.p-knob-range{fill:none;transition:stroke .1s ease-in}.p-knob-value{animation-name:dash-frame;animation-fill-mode:forwards;fill:none}.p-knob-text{font-size:1.3rem;text-align:center}\n"],encapsulation:2,changeDetection:0})}return n})(),I=(()=>{class n{static \u0275fac=function(a){return new(a||n)};static \u0275mod=e.oAB({type:n});static \u0275inj=e.cJS({imports:[d.ez]})}return n})();var q=l(9474);function N(n,s){1&n&&(e.TgZ(0,"tr")(1,"th",44),e._uU(2,"N\xe9v "),e._UZ(3,"p-sortIcon",45),e.qZA(),e.TgZ(4,"th",46),e._uU(5,"Kateg\xf3ria "),e._UZ(6,"p-sortIcon",47),e.qZA(),e.TgZ(7,"th",48),e._uU(8,"\xc1r "),e._UZ(9,"p-sortIcon",49),e.qZA(),e.TgZ(10,"th",50),e._uU(11,"St\xe1tusz "),e._UZ(12,"p-sortIcon",51),e.qZA(),e._UZ(13,"th"),e.qZA())}function F(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span",52),e._uU(5,"Kateg\xf3ria"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"span",52),e._uU(9,"\xc1r"),e.qZA(),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"td")(13,"span",52),e._uU(14,"St\xe1tusz"),e.qZA(),e.TgZ(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"td",53),e._UZ(18,"button",54),e.qZA()()),2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(4),e.hij(" ",t.category,""),e.xp6(4),e.hij(" ",e.xi3(11,6,t.price,"USD"),""),e.xp6(5),e.Tol("product-badge status-"+(null==t.inventoryStatus?null:t.inventoryStatus.toLowerCase())),e.xp6(1),e.Oqu(t.inventoryStatus)}}function P(n,s){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Tev\xe9kenys\xe9g"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Felhaszn\xe1l\xf3"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Id\u0151pont"),e.qZA()())}function B(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA()()),2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.activityName),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(e.xi3(7,3,t.timestamp,"yyyy-MM-dd HH:mm:ss"))}}const Y=function(){return["name","category","inventoryStatus"]};function K(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._uU(5,"Konferenci\xe1k"),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"span",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8)(11,"span",9),e._uU(12,"+00%"),e.qZA(),e._UZ(13,"i",10),e.qZA()(),e.TgZ(14,"div",6),e.O4$(),e.TgZ(15,"svg",11),e._UZ(16,"path",12),e.qZA()()()()(),e.kcU(),e.TgZ(17,"div",2)(18,"div",3)(19,"span",4),e._uU(20,"Vend\xe9gek"),e.qZA(),e.TgZ(21,"div",5)(22,"div",6)(23,"span",7),e._uU(24),e.qZA(),e.TgZ(25,"div",8)(26,"span",9),e._uU(27,"+00%"),e.qZA(),e._UZ(28,"i",10),e.qZA()(),e.TgZ(29,"div",6),e.O4$(),e.TgZ(30,"svg",13),e._UZ(31,"path",14),e.qZA()()()()(),e.kcU(),e.TgZ(32,"div",2)(33,"div",3)(34,"span",4),e._uU(35,"Szob\xe1k"),e.qZA(),e.TgZ(36,"div",5)(37,"div",6)(38,"span",7),e._uU(39),e.qZA(),e.TgZ(40,"div",15)(41,"span",9),e._uU(42,"+00%"),e.qZA(),e._UZ(43,"i",16),e.qZA()(),e.TgZ(44,"div",6),e.O4$(),e.TgZ(45,"svg",13),e._UZ(46,"path",17),e.qZA()()()()(),e.kcU(),e.TgZ(47,"div",2)(48,"div",3)(49,"span",4),e._uU(50,"NFC c\xedmk\xe9k"),e.qZA(),e.TgZ(51,"div",5)(52,"div",6)(53,"span",7),e._uU(54),e.qZA(),e.TgZ(55,"div",8)(56,"span",9),e._uU(57,"+00%"),e.qZA(),e._UZ(58,"i",10),e.qZA()(),e.TgZ(59,"div",18)(60,"p-knob",19),e.NdJ("ngModelChange",function(o){e.CHM(t);const h=e.oxw();return e.KtG(h.rfidPercentage=o)}),e.qZA()()()()(),e.TgZ(61,"div",20)(62,"div",3)(63,"div",21)(64,"span",22),e._uU(65,"Bev\xe9telek \xe1ttekint\xe9se"),e.qZA(),e.TgZ(66,"p-dropdown",23),e.NdJ("ngModelChange",function(o){e.CHM(t);const h=e.oxw();return e.KtG(h.selectedWeek=o)})("onChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onWeekChange())}),e.qZA()(),e._UZ(67,"p-chart",24),e.qZA()(),e.TgZ(68,"div",25)(69,"div",3)(70,"div",26),e._uU(71,"Koroszt\xe1lyok"),e.qZA(),e._UZ(72,"p-chart",27),e.qZA()(),e.TgZ(73,"div",28)(74,"div",29)(75,"div",30)(76,"div",31),e._uU(77,"Legut\xf3bbi \xe9rt\xe9kes\xedt\xe9sek"),e.qZA(),e.TgZ(78,"div",32)(79,"span",33),e._UZ(80,"i",34),e.TgZ(81,"input",35),e.NdJ("input",function(o){e.CHM(t);const h=e.MAs(84),p=e.oxw();return e.KtG(p.onGlobalFilter(h,o))}),e.qZA()(),e.TgZ(82,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(84);return e.KtG(o.exportCSV())}),e.qZA()()(),e.TgZ(83,"p-table",37,38),e.YNc(85,N,14,0,"ng-template",39),e.YNc(86,F,19,9,"ng-template",40),e.qZA()()(),e.TgZ(87,"div",41)(88,"div",3)(89,"div",42),e._uU(90,"Tev\xe9kenys\xe9gek"),e.qZA(),e.TgZ(91,"p-table",43),e.YNc(92,P,7,0,"ng-template",39),e.YNc(93,B,8,6,"ng-template",40),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(9),e.Oqu(t.conferences.active||0),e.xp6(15),e.Oqu(t.guests.active||0),e.xp6(15),e.Oqu(t.rooms.active||0),e.xp6(15),e.AsE("",t.tags.used||0," / ",(null==t.tags?null:t.tags.active)||0,""),e.xp6(6),e.Q6J("ngModel",t.rfidPercentage)("readonly",!0)("strokeWidth",2)("size",90),e.xp6(6),e.Q6J("options",t.weeks)("ngModel",t.selectedWeek),e.xp6(1),e.Q6J("data",t.barData)("options",t.barOptions),e.xp6(5),e.Q6J("data",t.pieData)("options",t.pieOptions),e.xp6(11),e.Q6J("value",t.products)("columns",t.cols)("paginator",!0)("rows",5)("globalFilterFields",e.DdM(21,Y)),e.xp6(8),e.Q6J("value",t.activities)}}function V(n,s){if(1&n&&(e.TgZ(0,"span",68),e._UZ(1,"i",69),e._uU(2),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.startDate)}}const G=function(n){return{"line-through":n}};function J(n,s){if(1&n&&(e.TgZ(0,"li",62)(1,"div",63)(2,"label",64),e._uU(3),e.qZA()(),e.TgZ(4,"div",65)(5,"div",66),e.YNc(6,V,3,1,"span",67),e.qZA()()()),2&n){const t=s.$implicit;e.xp6(2),e.Q6J("ngClass",e.VKq(3,G,t.completed)),e.xp6(1),e.Oqu(t.name),e.xp6(3),e.Q6J("ngIf",t.startDate)}}function W(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",55)(2,"app-conference-selector",56),e.NdJ("ngModelChange",function(o){e.CHM(t);const h=e.oxw();return e.KtG(h.selectedConferences=o)})("ngModelChange",function(o){e.CHM(t);const h=e.oxw();return e.KtG(h.onConferenceChange(o))}),e.qZA()(),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"span",4),e._uU(7,"Regisztr\xe1ci\xf3k sz\xe1ma"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"span",7),e._uU(11),e.qZA()()()()(),e.TgZ(12,"div",2)(13,"div",3)(14,"span",4),e._uU(15,"Szob\xe1ra v\xe1r\xf3k"),e.qZA(),e.TgZ(16,"div",5)(17,"div",6)(18,"span",7),e._uU(19),e.qZA()()()()(),e.TgZ(20,"div",2)(21,"div",3)(22,"span",4),e._uU(23,"Regisztr\xe1ci\xf3 hat\xe1rid\u0151"),e.qZA(),e.TgZ(24,"div",5)(25,"div",6)(26,"span",7),e._uU(27),e.qZA()()()()(),e.TgZ(28,"div",2)(29,"div",3)(30,"span",4),e._uU(31,"M\xf3dos\xedt\xe1s hat\xe1rid\u0151"),e.qZA(),e.TgZ(32,"div",5)(33,"div",6)(34,"span",7),e._uU(35),e.qZA()()()()(),e.TgZ(36,"div",57)(37,"div",3)(38,"span",4),e._uU(39,"El\u0151leget fizetett / \xf6sszes vend\xe9g"),e.qZA(),e.TgZ(40,"div",5)(41,"div",6)(42,"span",7),e._uU(43),e.qZA()(),e.TgZ(44,"div",18)(45,"p-knob",19),e.NdJ("ngModelChange",function(o){e.CHM(t);const h=e.oxw();return e.KtG(h.prepaidPercentage=o)}),e.qZA()()()()()(),e.TgZ(46,"div",58)(47,"div",59),e._uU(48,"Teend\u0151k"),e.qZA(),e.TgZ(49,"ul",60),e.YNc(50,J,7,5,"li",61),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.selectedConferences)("selectionLimit",1)("selectFirstOption",!0)("emitOnSelectFirstOption",!0)("showClear",!0),e.xp6(9),e.Oqu(t.registrations),e.xp6(8),e.hij(" ",t.guestsWithoutRoom," "),e.xp6(8),e.hij(" ",t.registrationEndDate," "),e.xp6(8),e.hij(" ",t.guestEditEndDate," "),e.xp6(8),e.AsE(" ",t.prepaid," / ",t.registrations," "),e.xp6(2),e.Q6J("ngModel",t.prepaidPercentage)("readonly",!0)("strokeWidth",2)("size",90),e.xp6(5),e.Q6J("ngForOf",t.taskList)}}y.locale("hu");let A=class k{constructor(s,t,a,o,h,p){this.dashboardService=s,this.conferenceService=t,this.guestService=a,this.userService=o,this.activityService=h,this.layoutService=p,this.loading=!0,this.userRole="",this.activities=[],this.weeks=[],this.products=[],this.cols=[],this.rfidPercentage=85,this.prepaidPercentage=0,this.selectedConferences=[],this.conferenceGuests=[],this.taskList=[],this.conferences={active:0,inactive:0},this.guests={active:0,inactive:0},this.rooms={active:0,inactive:0},this.tags={active:0,inactive:0},this.adults=0,this.childrens=0,this.totals={active:{conferences:0,guests:0,rooms:0,tags:0}},this.changeTheme("indigo"),this.subscription=this.layoutService.configUpdate$.subscribe(O=>{this.initCharts()})}ngOnInit(){this.userService.getUserRole().subscribe(s=>{this.userRole=s,console.log("Updated userRole",this.userRole)}),this.dashboardObs$=this.dashboardService.dashboardObs,this.dashboardObs$.subscribe(s=>{this.loading=!1,s&&(this.conferences=s.conferences,this.guests=s.guests,this.rooms.active=106,this.tags=s.tags,this.rfidPercentage=Number((s.tags.used/s.tags.active*100).toFixed(0)),this.adults=Number(this.guests.guestsAge[0].adults),this.childrens=parseFloat(this.guests.guestsAge[0].childrens),this.initCharts())}),this.dashboardService.getInformations(),this.conferenceObs$=this.conferenceService.conferenceObs,this.conferenceObs$.subscribe(s=>{s&&s.rows&&(this.conferenceData=s.rows[0])}),this.taskList=[{name:"Regisztr\xe1ci\xf3k j\xf3v\xe1hagy\xe1sa",startDate:"2025.01.01",completed:!1},{name:"Vend\xe9gek szob\xe1hoz ad\xe1sa",startDate:"2025.01.01",completed:!1},{name:"El\u0151legek ellen\u0151rz\xe9se",startDate:"2025.01.01",completed:!1}],this.activities=this.activityService.getActivities(),this.information=this.activityService.getInformation(),this.weeks=[{label:"El\u0151z\u0151 h\xe9t",value:0,data:[[65,59,80,81,56,55,40],[28,48,40,19,86,27,90]]},{label:"Aktu\xe1lis h\xe9t",value:1,data:[[35,19,40,61,16,55,30],[48,78,10,29,76,77,10]]}],this.selectedWeek=this.weeks[0],this.initCharts(),this.cols=[{header:"N\xe9v",field:"name"},{header:"Kateg\xf3ria",field:"category"},{header:"\xc1r",field:"price"},{header:"St\xe1tusz",field:"inventoryStatus"}]}initCharts(){const s=getComputedStyle(document.documentElement),t=s.getPropertyValue("--text-color"),a=s.getPropertyValue("--text-color-secondary"),o=s.getPropertyValue("--surface-border");this.barData={labels:["H\xc9T","KED","SZE","CS\xdc","P\xc9N","SZO","VAS"],datasets:[{label:"Bev\xe9tel",backgroundColor:s.getPropertyValue("--primary-500"),barThickness:12,borderRadius:12,data:this.selectedWeek.data[0]},{label:"Profit",backgroundColor:s.getPropertyValue("--primary-200"),barThickness:12,borderRadius:12,data:this.selectedWeek.data[1]}]},this.pieData={labels:["Feln\u0151tt","Gyerek"],datasets:[{data:[this.adults,this.childrens],backgroundColor:[s.getPropertyValue("--primary-700"),s.getPropertyValue("--primary-100")],hoverBackgroundColor:[s.getPropertyValue("--primary-600"),s.getPropertyValue("--primary-300"),s.getPropertyValue("--primary-200")]}]},this.barOptions={animation:{duration:0},plugins:{legend:{labels:{color:t,usePointStyle:!0,font:{weight:700},padding:28},position:"bottom"}},scales:{x:{ticks:{color:a,font:{weight:500}},grid:{display:!1,drawBorder:!1}},y:{ticks:{color:a},grid:{color:o,drawBorder:!1}}}},this.pieOptions={animation:{duration:0},plugins:{legend:{labels:{color:t,usePointStyle:!0,font:{weight:700},padding:28},position:"bottom"}}}}get registrations(){return this.conferenceGuests?.length||0}get guestsWithoutRoom(){return this.conferenceGuests?.filter(s=>null===s.roomNum).length||0}get registrationEndDate(){let s="";return this.selectedConference?.registrationEndDate&&(s=y(this.selectedConference.registrationEndDate).format("YYYY.MM.DD")),s}get guestEditEndDate(){let s="";return this.selectedConference?.guestEditEndDate&&(s=y(this.selectedConference.guestEditEndDate).format("YYYY.MM.DD")),s}get prepaid(){return this.conferenceGuests?.filter(s=>null===s.prepaid).length||0}onWeekChange(){let s={...this.barData};s.datasets[0].data=this.selectedWeek.data[0],s.datasets[1].data=this.selectedWeek.data[1],this.barData=s}onGlobalFilter(s,t){s.filterGlobal(t.target.value,"contains")}onConferenceChange(s){console.log("Selected conference:",s),this.selectedConference=s[0];const t=this.selectedConference?.name;t?this.guestService.getByConferenceName(t).subscribe(a=>{this.conferenceGuests=a.rows||[],this.prepaidPercentage=Math.round(this.prepaid/this.registrations*100)||0}):console.error("Conference name is undefined")}replaceThemeLink(s,t){const a=document.getElementById("theme-link"),o=a.cloneNode(!0);o.setAttribute("href",s),o.setAttribute("id","theme-link-clone"),a.parentNode.insertBefore(o,a.nextSibling),o.addEventListener("load",()=>{a.remove(),o.setAttribute("id","theme-link"),t()})}changeTheme(s){const t=document.getElementById("theme-link");if(t){const a=t.getAttribute("href").replace(this.layoutService.config.theme,s);this.replaceThemeLink(a,()=>{this.layoutService.config.theme=s,this.layoutService.onConfigUpdate()})}}ngOnDestroy(){}static#e=this.\u0275fac=function(t){return new(t||k)(e.Y36(L),e.Y36(i.Z),e.Y36(r.Q),e.Y36(c.K),e.Y36(u),e.Y36(m.P))};static#t=this.\u0275cmp=e.Xpm({type:k,selectors:[["ng-component"]],features:[e._Bn([v.ez])],decls:2,vars:2,consts:[[4,"ngIf"],[1,"grid"],[1,"col-12","md:col-6","xl:col-3"],[1,"card","h-full"],[1,"font-semibold","text-lg"],[1,"flex","justify-content-between","align-items-start","mt-3"],[1,"w-6"],[1,"text-4xl","font-bold","text-900"],[1,"text-green-500"],[1,"font-medium"],[1,"pi","pi-arrow-up","text-xs","ml-2"],["width","100%","viewBox","0 0 258 96","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1 93.9506L4.5641 94.3162C8.12821 94.6817 15.2564 95.4128 22.3846 89.6451C29.5128 83.8774 36.641 71.6109 43.7692 64.4063C50.8974 57.2018 58.0256 55.0592 65.1538 58.9268C72.2821 62.7945 79.4103 72.6725 86.5385 73.5441C93.6667 74.4157 100.795 66.2809 107.923 65.9287C115.051 65.5765 122.179 73.0068 129.308 66.8232C136.436 60.6396 143.564 40.8422 150.692 27.9257C157.821 15.0093 164.949 8.97393 172.077 6.43766C179.205 3.9014 186.333 4.86425 193.462 12.0629C200.59 19.2616 207.718 32.696 214.846 31.0487C221.974 29.4014 229.103 12.6723 236.231 5.64525C243.359 -1.38178 250.487 1.29325 254.051 2.63076L257.615 3.96827","stroke","10",2,"stroke-width","2px","stroke","var(--primary-color)"],["width","100%","viewBox","0 0 115 41","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1 35.6498L2.24444 32.4319C3.48889 29.214 5.97778 22.7782 8.46667 20.3627C10.9556 17.9473 13.4444 19.5522 15.9333 21.7663C18.4222 23.9803 20.9111 26.8035 23.4 30.6606C25.8889 34.5176 28.3778 39.4085 30.8667 37.2137C33.3556 35.0189 35.8444 25.7383 38.3333 26.3765C40.8222 27.0146 43.3111 37.5714 45.8 38.9013C48.2889 40.2311 50.7778 32.3341 53.2667 31.692C55.7556 31.0499 58.2444 37.6628 60.7333 39.4617C63.2222 41.2607 65.7111 38.2458 68.2 34.9205C70.6889 31.5953 73.1778 27.9597 75.6667 23.5955C78.1556 19.2313 80.6444 14.1385 83.1333 13.8875C85.6222 13.6365 88.1111 18.2272 90.6 20.2425C93.0889 22.2578 95.5778 21.6977 98.0667 18.8159C100.556 15.9341 103.044 10.7306 105.533 7.37432C108.022 4.01806 110.511 2.50903 111.756 1.75451L113 1",2,"stroke-width","1px","stroke","var(--primary-color)"],[1,"text-pink-500"],[1,"pi","pi-arrow-down","text-xs","ml-2"],["d","M1.5 1L2.74444 2.61495C3.98889 4.2299 6.47778 7.4598 8.96667 9.07151C11.4556 10.6832 13.9444 10.6767 16.4333 11.6127C18.9222 12.5487 21.4111 14.4271 23.9 16.6724C26.3889 18.9178 28.8778 21.5301 31.3667 20.1977C33.8556 18.8652 36.3444 13.5878 38.8333 11.3638C41.3222 9.13969 43.8111 9.96891 46.3 11.9894C48.7889 14.0099 51.2778 17.2217 53.7667 16.2045C56.2556 15.1873 58.7444 9.9412 61.2333 11.2783C63.7222 12.6155 66.2111 20.5359 68.7 21.4684C71.1889 22.401 73.6778 16.3458 76.1667 16.0009C78.6556 15.6561 81.1444 21.0217 83.6333 24.2684C86.1222 27.515 88.6111 28.6428 91.1 27.4369C93.5889 26.2311 96.0778 22.6916 98.5667 22.7117C101.056 22.7317 103.544 26.3112 106.033 29.7859C108.522 33.2605 111.011 36.6302 112.256 38.3151L113.5 40",2,"stroke-width","1px","stroke","var(--pink-500)"],[1,"w-6","text-right"],["valueTemplate","{value}%","styleClass","-mt-5",3,"ngModel","readonly","strokeWidth","size","ngModelChange"],[1,"col-12","xl:col-9"],[1,"flex","align-items-start","justify-content-between","mb-6"],[1,"text-900","text-xl","font-semibold"],["styleClass","w-10rem","optionLabel","label",3,"options","ngModel","ngModelChange","onChange"],["type","bar","height","300px",3,"data","options"],[1,"col-12","xl:col-3"],[1,"text-900","text-xl","font-semibold","mb-6"],["type","pie","height","300px",3,"data","options"],[1,"col-12","lg:col-8"],[1,"card"],[1,"flex","flex-column","md:flex-row","md:align-items-start","md:justify-content-between","mb-3"],[1,"text-900","text-xl","font-semibold","mb-3","md:mb-0"],[1,"inline-flex","align-items-center"],[1,"p-input-icon-left","flex-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search",1,"w-full",2,"border-radius","2rem",3,"input"],["pButton","","pRipple","","icon","pi pi-upload",1,"p-button-rounded","mx-3",3,"click"],["responsiveLayout","scroll",3,"value","columns","paginator","rows","globalFilterFields"],["dt",""],["pTemplate","header"],["pTemplate","body"],[1,"col-12","lg:col-4"],[1,"text-900","text-xl","font-semibold","mb-3"],[3,"value"],["pSortableColumn","name",1,"white-space-nowrap",2,"min-width","12rem"],["field","name"],["pSortableColumn","category",1,"white-space-nowrap",2,"min-width","10rem"],["field","category"],["pSortableColumn","price",1,"white-space-nowrap",2,"min-width","10rem"],["field","price"],["pSortableColumn","inventoryStatus",1,"white-space-nowrap",2,"min-width","10rem"],["field","inventoryStatus"],[1,"p-column-title"],[2,"text-align","center"],["pButton","","type","button","icon","pi pi-search",1,"p-button-outlined","p-button-rounded"],[1,"w-full","mb-3"],["placeholder","V\xe1lasszon konferenci\xe1t...",3,"ngModel","selectionLimit","selectFirstOption","emitOnSelectFirstOption","showClear","ngModelChange"],[1,"col-12","md:col-6","xl:col-6"],[1,"card","h-full","mt-3"],[1,"text-900","font-semibold","text-lg","mb-3","border-bottom-1","surface-border","pb-3"],[1,"list-none","p-0","m-0"],["class","flex flex-column gap-3 md:flex-row md:align-items-center p-2 border-bottom-1 surface-border",4,"ngFor","ngForOf"],[1,"flex","flex-column","gap-3","md:flex-row","md:align-items-center","p-2","border-bottom-1","surface-border"],[1,"flex","align-items-center","flex-1"],["for","task.id",1,"font-medium","ml-2",2,"word-break","break-word",3,"ngClass"],[1,"flex","flex-1","gap-3","flex-column","sm:flex-row","sm:justify-content-between"],[1,"flex","align-items-center"],["class","flex align-items-center font-semibold white-space-nowrap",4,"ngIf"],[1,"flex","align-items-center","font-semibold","white-space-nowrap"],[1,"pi","pi-clock","mr-2"]],template:function(t,a){1&t&&(e.YNc(0,K,94,22,"div",0),e.YNc(1,W,51,16,"div",0)),2&t&&(e.Q6J("ngIf","Szervezo"!==a.userRole),e.xp6(1),e.Q6J("ngIf","Szervezo"===a.userRole))},dependencies:[d.mk,d.sg,d.O5,b.Hq,v.jx,w.H,C.Lt,E.JJ,E.On,M.iA,M.lQ,M.fz,U.o,S.C,$,q.w,d.H9,d.uU],encapsulation:2})};A=(0,Z.gn)([(0,T.k)()],A);let j=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#s=this.\u0275inj=e.cJS({imports:[_.Bz.forChild([{path:"",component:A}]),_.Bz]})}return n})();var X=l(6218),Q=l(6022),H=l(4532),ee=l(2285);let te=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#s=this.\u0275inj=e.cJS({imports:[d.ez,j,b.hJ,w.T,C.kW,E.u5,M.U$,U.j,X.A,S.S,Q.Xt,I,H.d,ee.L]})}return n})()},746:(D,x,l)=>{l.d(x,{Q:()=>f});var d=l(5619),_=l(9397),Z=l(6306),T=l(7398),v=l(2096),y=l(2029),e=l(8814);let f=(()=>{class g{constructor(i){this.apiService=i,this.apiURL=i.apiURL,this.data$=new d.X(null),this.createdGuest$=new d.X(null),this.message$=new d.X(null)}get guestObs(){return this.data$.asObservable()}get createdGuestObs(){return this.createdGuest$.asObservable()}get messageObs(){return this.message$.asObservable()}get(i,r,c,u){let m="";""!==c&&(m=""!=c.sortField?`sort=${c.sortField}&order=${1===c.sortOrder?"ASC":"DESC"}`:"");const b=""!==m&&""!==u?m+"&"+u:""!==m&&""===u?m:""===m&&""!==u?u:"";this.apiService.get(`guest/get/${i}/${r}${""!==b?"?"+b:""}`).subscribe({next:C=>{this.data$.next(C)},error:C=>{this.message$.next(C)}})}getBySearch(i,r,c){let u={};r&&r.sortField&&(u.sort=r.sortField,u.order=1===r.sortOrder?"ASC":"DESC"),c&&c.length>0&&(u.conferenceIds=c.join(",")),this.apiService.get(`guest/search/${encodeURIComponent(i)}`,{params:u}).subscribe({next:m=>{this.data$.next(m)},error:m=>{this.message$.next(m)}})}getBySearchQuery(i){this.apiService.get(`guest/searchquery?${i}`).subscribe({next:r=>{this.data$.next(r)},error:r=>{this.message$.next(r)}})}getBySearchQuery$(i){return this.apiService.get(`guest/searchquery?${i}`)}getByConferenceName(i){return this.apiService.get(`guest/searchquery?conferenceName=${i}`)}getByRFID(i){return this.apiService.get(`guest/getbyrfid/${i}`)}updateLastTagUsage(i){this.apiService.get(`guest/updatelasttagusage/${i}`).subscribe({next:r=>{},error:r=>{this.message$.next(r)}})}create(i,r){const c=new FormData;if(c.append("guest",JSON.stringify(i)),r&&r.length>0)for(const u of r){if(!u)return;c.append("idcard",u,u.name)}this.apiService.post("guest/create/",c).subscribe({next:u=>{this.createdGuest$.next(u.guest);const m=this.registrationToast(u.guest),b=this.emailStatusToast(u.email);this.message$.next(m),this.message$.next(b)},error:u=>{this.message$.next({severity:"error",summary:"Vend\xe9g r\xf6gz\xedt\xe9s sikertelen",detail:u?.errorMessage||u?.message||"Ismeretlen hiba t\xf6rt\xe9nt."})}})}update(i,r=[]){const c={...i};if(delete c.idcard,r&&r.length>0){const u=new FormData;u.append("guest",JSON.stringify(c));for(const m of r)m&&u.append("idcard",m,m.name);this.apiService.put(`guest/update/${i.id}`,u).subscribe({next:()=>{this.message$.next("success")},error:m=>{this.message$.next(m)}})}else c.idCardUploaded=0,this.apiService.put(`guest/update/${i.id}`,c).subscribe({next:()=>{this.message$.next("success")},error:u=>{this.message$.next(u)}})}updateGuest2(i){return this.apiService.put(`guest/update/${i.id}`,i).pipe((0,_.b)(()=>console.log(`updated guest id=${i.id}`)),(0,Z.K)(this.handleError("updateGuest2")))}delete(i){this.apiService.delete(`guest/delete/${i.id}`).subscribe({next:r=>{this.message$.next({severity:"success",summary:"Sikeres vend\xe9g t\xf6rl\xe9s",detail:`${i.lastName} ${i.firstName} t\xf6r\xf6lve`})},error:r=>{this.message$.next(r)}})}bulkdelete(i){let r={ids:i.map(c=>c.id)};this.apiService.post("guest/bulkdelete",r).subscribe({next:c=>{this.message$.next({severity:"success",summary:"Sikeres vend\xe9g t\xf6rl\xe9s",detail:`${i.length} vend\xe9g t\xf6r\xf6lve`})},error:c=>{this.message$.next(c)}})}searchGuestsForSelector$(i={}){const r=this.buildGuestQS(i);return this.apiService.get(`guest/searchquery?${r}`).pipe((0,T.U)(c=>c?c.rows??[]:[]))}buildGuestQS(i={}){const r=[];return null!=i.conferenceId&&r.push(`conferenceid=${encodeURIComponent(String(i.conferenceId))}`),"number"==typeof i.minBeds&&r.push(`minBeds=${i.minBeds}`),"boolean"==typeof i.climate&&r.push("climate="+(i.climate?1:0)),i.onlyNotReserved&&r.push("onlyNotReserved=true"),i.includeGuestIds?.length&&r.push(`includeGuestIds=${i.includeGuestIds.join(",")}`),i.enabled&&r.push("enabled=1"),r.join("&")}handleError(i="operation",r){return c=>(console.error(c),console.error(`${i} failed: ${c.message}`),(0,v.of)(r))}emailStatusToast(i){if(!i)return{severity:"warn",summary:"E-mail",detail:"E-mail st\xe1tusz ismeretlen."};switch(i.status){case"sent":return{severity:"success",summary:"E-mail",detail:"Visszaigazol\xf3 e-mail elk\xfcldve."};case"timeout":return{severity:"warn",summary:"E-mail",detail:"Az e-mail k\xfcld\xe9s id\u0151korl\xe1tot \xe9rt el."};case"failed":return{severity:"error",summary:"E-mail hiba",detail:i.message||"Az e-mail k\xfcld\xe9s nem siker\xfclt."};default:return{severity:"info",summary:"E-mail",detail:"E-mail st\xe1tusz: ismeretlen."}}}registrationToast(i){return{severity:"success",summary:"Vend\xe9g r\xf6gz\xedtve",detail:(i?.lastName&&i?.firstName?`${i.lastName} ${i.firstName}`:"Vend\xe9g")+" sikeresen r\xf6gz\xedtve."}}static#e=this.\u0275fac=function(r){return new(r||g)(y.LFG(e.s))};static#t=this.\u0275prov=y.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},8468:(D,x,l)=>{l.d(x,{x:()=>T});var d=l(2029),_=l(4713),Z=l(2332);let T=(()=>{class v extends _.s{pathId;ngOnInit(){this.pathId="url(#"+(0,Z.Th)()+")"}static \u0275fac=function(){let e;return function(g){return(e||(e=d.n5z(v)))(g||v)}}();static \u0275cmp=d.Xpm({type:v,selectors:[["TimesCircleIcon"]],standalone:!0,features:[d.qOj,d.jDz],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(f,g){1&f&&(d.O4$(),d.TgZ(0,"svg",0)(1,"g"),d._UZ(2,"path",1),d.qZA(),d.TgZ(3,"defs")(4,"clipPath",2),d._UZ(5,"rect",3),d.qZA()()()),2&f&&(d.Tol(g.getClassNames()),d.uIk("aria-label",g.ariaLabel)("aria-hidden",g.ariaHidden)("role",g.role),d.xp6(1),d.uIk("clip-path",g.pathId),d.xp6(3),d.Q6J("id",g.pathId))},encapsulation:2})}return v})()}}]);