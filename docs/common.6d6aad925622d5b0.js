"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[8592],{117:(S,v,l)=>{l.d(v,{T:()=>C});var e=l(2029),h=l(1206),c=l(6193),g=l(6814),f=l(6223),u=l(5219),i=l(2352),t=l(9515);function a(s,d){if(1&s&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&s){const n=d.$implicit,m=e.oxw(2);e.Q6J("ngClass",m.getRoleStyleClass(n.user_rolesid)),e.xp6(2),e.hij(" ",n.fullname," ")}}function o(s,d){if(1&s&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&s){const n=d.$implicit,m=e.oxw(2);e.Q6J("ngClass",m.getRoleStyleClass(n.user_rolesid)),e.xp6(2),e.hij(" ",n.fullname," ")}}const _=function(){return{minWidth:"13rem"}};function y(s,d){if(1&s){const n=e.EpF();e.TgZ(0,"p-dropdown",2),e.NdJ("onChange",function(x){e.CHM(n);const E=e.oxw();return e.KtG(E.handleOnChange(x))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,a,3,2,"ng-template",3),e.YNc(4,o,3,2,"ng-template",4),e.qZA()}if(2&s){const n=d.ngIf,m=e.oxw();e.Akn(e.DdM(11,_)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("formControl",n)("options",m.users)("showClear",m.showClear)}}function O(s,d){if(1&s&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&s){const n=d.$implicit,m=e.oxw(2);e.Q6J("ngClass",m.getRoleStyleClass(n.user_rolesid)),e.xp6(2),e.hij(" ",n.fullname," ")}}function p(s,d){if(1&s&&(e.TgZ(0,"span",5),e._UZ(1,"i",6),e._uU(2),e.qZA()),2&s){const n=d.$implicit,m=e.oxw(2);e.Q6J("ngClass",m.getRoleStyleClass(n.user_rolesid)),e.xp6(2),e.hij(" ",null==n?null:n.fullname," ")}}function r(s,d){if(1&s){const n=e.EpF();e.TgZ(0,"p-dropdown",7),e.NdJ("ngModelChange",function(x){e.CHM(n);const E=e.oxw();return e.KtG(E.selecteduser=x)})("onChange",function(x){e.CHM(n);const E=e.oxw();return e.KtG(E.handleOnChange(x))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.YNc(3,O,3,2,"ng-template",3),e.YNc(4,p,3,2,"ng-template",4),e.qZA()}if(2&s){const n=e.oxw();e.Akn(e.DdM(11,_)),e.s9C("placeholder",e.lcZ(1,7,"V\xe1lasszon...")),e.s9C("emptyMessage",e.lcZ(2,9,"Nincs tal\xe1lat...")),e.Q6J("ngModel",n.selecteduser)("options",n.users)("showClear",n.showClear)}}let C=(()=>{class s{constructor(n,m){this.userService=n,this.roleService=m,this.change=new e.vpe,this.users=[],this.selecteduser="",this.roles=[]}ngOnInit(){this.userService.getUsersForSelector(this.user_rolesid).subscribe({next:n=>{n&&(this.users=this.user_rolesid?n.filter(m=>m.user_rolesid===this.user_rolesid):n,this.fetchRolesForUsers())}})}ngOnChanges(n){}fetchRolesForUsers(){this.roleService.fetchRoles().subscribe({next:n=>{this.roles=n}})}getFormControl(){return this.parentForm?this.parentForm.get(this.controlName):null}handleOnChange(n){this.change.emit({value:n.value,field:this.controlName})}getRoleStyleClass(n){const m=this.roles.find(E=>E.id==n);return`user-role-badge role-${m?m?.name?.trim().toLowerCase().replace(/\s+/g,""):""}`}static#e=this.\u0275fac=function(m){return new(m||s)(e.Y36(h.K),e.Y36(c.N))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-user-selector"]],inputs:{parentForm:"parentForm",controlName:"controlName",user_rolesid:"user_rolesid",showClear:"showClear"},outputs:{change:"change"},features:[e.TTD],decls:3,vars:2,consts:[["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","style","onChange",4,"ngIf","ngIfElse"],["useNgModel",""],["optionLabel","fullname","optionValue","id","appendTo","body",3,"formControl","options","placeholder","emptyMessage","showClear","onChange"],["pTemplate","item"],["pTemplate","selectedItem"],[3,"ngClass"],[1,"pi","pi-user","mr-1"],["optionLabel","fullname","optionValue","id","appendTo","body",3,"ngModel","options","placeholder","emptyMessage","showClear","ngModelChange","onChange"]],template:function(m,x){if(1&m&&(e.YNc(0,y,5,12,"p-dropdown",0),e.YNc(1,r,5,12,"ng-template",null,1,e.W1O)),2&m){const E=e.MAs(2);e.Q6J("ngIf",x.getFormControl())("ngIfElse",E)}},dependencies:[g.mk,g.O5,f.JJ,f.On,f.oH,u.jx,i.Lt,t.X$],encapsulation:2})}return s})()},3763:(S,v,l)=>{l.d(v,{$:()=>g});var e=l(5619),h=l(2029),c=l(8814);let g=(()=>{class f{constructor(i){this.apiService=i,this.apiURL=i.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get logObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(i,t,a,o){let _="";""!==a&&(_=""!=a.sortField?`sort=${a.sortField}&order=${1===a.sortOrder?"ASC":"DESC"}`:"");const y=""!==_&&""!==o?_+"&"+o:""!==_&&""===o?_:""===_&&""!==o?o:"";this.apiService.get(`logs/get/${i}/${t}${""!==y?"?"+y:""}`).subscribe({next:p=>{p&&p.rows?.length&&(p.rows=p.rows.filter(r=>"updatelasttagusage"!==r.action_type),p.rows=p.rows.filter(r=>"questions"!==r.table_name),p.rows=p.rows.filter(r=>"answers"!==r.table_name),p.rows=p.rows.filter(r=>{if("update"==r.action_type){let C=JSON.parse(r.original_data),s=JSON.parse(r.new_data);if(null==C.rfid&&null!==s.rfid)return!1}return!0}),p.rows.forEach(r=>{if(r.expandable=this.isRowExpandable(r),r.status||(r.response_data=r.original_data),"{}"==r.new_data?r.new_data=null:"{}"==r.original_data?r.original_data=null:"{}"==r.response_data&&(r.response_data=null),200==r.status){let s=JSON.parse(r.response_data).message;if(s){let d=JSON.parse(r.original_data);r.response_data="Success delete"==s?`${d.lastName} ${d.firstName} t\xf6r\xf6lve`:"Update success"==s?`${d.fullname} m\xf3dos\xedtva`:"Guest updated successfully"==s?`${d.lastName} ${d.firstName} m\xf3dos\xedtva`:s}}if(201==r.status){let C=JSON.parse(r.new_data),s="";if("conference"==r.table_name)s=`${C?.name} konferencia l\xe9trehozva`;else if("guest"==r.table_name)if(null==r.new_data){let n=JSON.parse(JSON.stringify(JSON.parse(r.response_data))).guest||{};r.original_data=JSON.stringify(n),s=`${n.lastName||"N\xe9v hi\xe1nyzik"} ${n.firstName||"N\xe9v hi\xe1nyzik"} vend\xe9g regisztr\xe1lva`}else s=`${C?.lastName} ${C?.firstName} vend\xe9g l\xe9trehozva`;else"users"==r.table_name&&(s=`${C?.fullname} felhaszn\xe1l\xf3 l\xe9trehozva`);r.response_data=s}if(400==r.status){let C=JSON.parse(r.response_data),s=C.error,d=C.message;d&&(r.response_data=d),s&&(r.original_data=JSON.stringify(s))}})),this.data$.next(p)},error:p=>{this.message$.next(p)}})}getBySearch(i,t){let a="";""!==t&&(a=""!=t.sortField?`?sort=${t.sortField}&order=${1===t.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`logs/search/${i}${a}`).subscribe({next:o=>{this.data$.next(o)},error:o=>{this.message$.next(o)}})}getBySearchQuery(i){this.apiService.get(`logs/searchquery?${i}`).subscribe({next:t=>{this.data$.next(t)},error:t=>{this.message$.next(t)}})}create(i){i.userid=Number(localStorage.getItem("userid"))||1,i.user_fullname=localStorage.getItem("fullname")||"SYSTEM",i.user_email=localStorage.getItem("email")||"info@nfcreserve.com",this.apiService.post("logs/create/",i).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres log r\xf6gz\xedt\xe9s",detail:"Log r\xf6gz\xedtve"})},error:t=>{this.message$.next(t)}})}update(i){this.apiService.put(`logs/update/${i.id}`,i).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres log m\xf3dos\xedt\xe1s",detail:"Log m\xf3dos\xedtva"})},error:t=>{this.message$.next(t)}})}delete(i){this.apiService.delete(`logs/delete/${i.id}`).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres log t\xf6rl\xe9s",detail:"Log t\xf6r\xf6lve"})},error:t=>{this.message$.next(t)}})}bulkdelete(i){let t={ids:i.map(a=>a.id)};this.apiService.post("logs/bulkdelete",t).subscribe({next:a=>{this.message$.next({severity:"success",summary:"Sikeres log t\xf6rl\xe9s",detail:`${i.length} log t\xf6r\xf6lve`})},error:a=>{this.message$.next(a)}})}isRowExpandable(i){return!!i.action_type&&!["scanned code","assign tag","unassign","same code","tag duplicate","already received food","unknown device","import"].includes(i.action_type?.toLowerCase())}static#e=this.\u0275fac=function(t){return new(t||f)(h.LFG(c.s))};static#t=this.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},3139:(S,v,l)=>{l.d(v,{Q:()=>c});var e=l(8645),h=l(2029);let c=(()=>{class g{constructor(){this.mealChanged=new e.x,this.meals={breakfast:{begin:7,end:10},lunch:{begin:11,end:15},dinner:{begin:17,end:20}},this.checkMealStart(),setInterval(()=>{this.checkMealStart()},2e4)}checkMealStart(){const i=(new Date).getHours();for(const t of Object.keys(this.meals)){const a=this.meals[t];if(i>=a.begin&&i<a.end)return void this.mealChanged.next(t)}}getMealNameByTime(u){const i=u.getHours();for(const t in this.meals){const a=this.meals[t];if(i>=a.begin&&i<=a.end)return this.translateMealName(t)}return"Jelenleg nincs \xe9tkeztet\xe9s"}getMealsForSelector(){let u=[];for(const i in this.meals)u.push(this.translateMealName(i));return u}translateMealName(u){return{breakfast:"reggeli",lunch:"eb\xe9d",dinner:"vacsora"}[u]||u}isOpen(){const u=(new Date).getHours();for(const i in this.meals){const t=this.meals[i];if(u>=t.begin&&u<t.end)return!0}return!1}static#e=this.\u0275fac=function(i){return new(i||g)};static#t=this.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},2835:(S,v,l)=>{l.d(v,{c:()=>g});var e=l(5619),h=l(2029),c=l(8814);let g=(()=>{class f{constructor(i){this.apiService=i,this.apiURL=i.apiURL,this.data$=new e.X(null),this.message$=new e.X(null)}get tagObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(i,t,a,o){let _="";""!==a&&(_=""!=a.sortField?`sort=${a.sortField}&order=${1===a.sortOrder?"ASC":"DESC"}`:"");const y=""!==_&&""!==o?_+"&"+o:""!==_&&""===o?_:""===_&&""!==o?o:"";this.apiService.get(`rfid/get/${i}/${t}${""!==y?"?"+y:""}`).subscribe({next:p=>{let r=p.rows;r&&r.length>0&&r.forEach(C=>{C.identifier=C.rfid}),this.data$.next(p)},error:p=>{this.message$.next(p)}})}getBySearch(i,t){let a="";""!==t&&(a=""!=t.sortField?`?sort=${t.sortField}&order=${1===t.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`rfid/search/${i}${a}`).subscribe({next:o=>{let _=o.rows;_&&_.length>0&&_.forEach(y=>{y.identifier=y.rfid}),this.data$.next(o)},error:o=>{this.message$.next(o)}})}getBySearchQuery(i){this.apiService.get(`rfid/searchquery?${i}`).subscribe({next:t=>{let a=t.rows;a&&a.length>0&&a.forEach(o=>{o.identifier=o.rfid}),this.data$.next(t)},error:t=>{this.message$.next(t)}})}create(i){this.apiService.post("rfid/create/",i).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke r\xf6gz\xedt\xe9s",detail:`${i.rfid} r\xf6gz\xedtve`})},error:t=>{this.message$.next(t)}})}update(i){this.apiService.put(`rfid/update/${i.id}`,i).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke m\xf3dos\xedt\xe1s",detail:`${i.rfid} m\xf3dos\xedtva`})},error:t=>{this.message$.next(t)}})}delete(i){this.apiService.delete(`rfid/delete/${i.id}`).subscribe({next:t=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${i.rfid} t\xf6r\xf6lve`})},error:t=>{this.message$.next(t)}})}bulkdelete(i){let t={ids:i.map(a=>a.id)};this.apiService.post("rfid/bulkdelete",t).subscribe({next:a=>{this.message$.next({severity:"success",summary:"Sikeres c\xedmke t\xf6rl\xe9s",detail:`${i.length} c\xedmke t\xf6r\xf6lve`})},error:a=>{this.message$.next(a)}})}getByRFID(i){return this.apiService.get(`rfid/search/${i}`)}static#e=this.\u0275fac=function(t){return new(t||f)(h.LFG(c.s))};static#t=this.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},1836:(S,v,l)=>{function e(){return h=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(h.value)?null:{invalidEmail:{value:h.value}}}l.d(v,{u:()=>e})},8842:(S,v,l)=>{function e(){return h=>{const c=h.get("password"),g=h.get("password_again");return c&&g&&c.value!==g.value?{passwordsDoNotMatch:!0}:null}}l.d(v,{C:()=>e})},4532:(S,v,l)=>{l.d(v,{d:()=>C});var e=l(6814),h=l(2029),c=l(5219);let C=(()=>{class s{static \u0275fac=function(m){return new(m||s)};static \u0275mod=h.oAB({type:s});static \u0275inj=h.cJS({imports:[e.ez,c.m8]})}return s})()},1913:(S,v,l)=>{l.d(v,{h:()=>g,l:()=>f});var e=l(6814),h=l(2029),c=l(2076);let g=(()=>{class u{el;renderer;zone;constructor(t,a,o){this.el=t,this.renderer=a,this.zone=o}selector;enterClass;enterActiveClass;enterToClass;leaveClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;eventListener;documentClickListener;documentKeydownListener;target;enterListener;leaveListener;animating;clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){c.p.hasClass(this.target,this.toggleClass)?c.p.removeClass(this.target,this.toggleClass):c.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",c.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",c.p.addClass(this.target,"hidden"),this.target.style.height=""),c.p.addClass(this.target,this.enterActiveClass),this.enterClass&&c.p.removeClass(this.target,this.enterClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{c.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&c.p.addClass(this.target,this.enterToClass),this.enterListener&&this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):(this.enterClass&&c.p.removeClass(this.target,this.enterClass),this.enterToClass&&c.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,c.p.addClass(this.target,this.leaveActiveClass),this.leaveClass&&c.p.removeClass(this.target,this.leaveClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{c.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&c.p.addClass(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):(this.leaveClass&&c.p.removeClass(this.target,this.leaveClass),this.leaveToClass&&c.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",t=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(t)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",t=>{const{key:a,keyCode:o,which:_}=t;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===a&&27===o&&27===_&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(t){return!this.el.nativeElement.isSameNode(t.target)&&!this.el.nativeElement.contains(t.target)&&!this.target.contains(t.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}static \u0275fac=function(a){return new(a||u)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.R0b))};static \u0275dir=h.lG2({type:u,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(a,o){1&a&&h.NdJ("click",function(y){return o.clickListener(y)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}})}return u})(),f=(()=>{class u{static \u0275fac=function(a){return new(a||u)};static \u0275mod=h.oAB({type:u});static \u0275inj=h.cJS({imports:[e.ez]})}return u})()}}]);