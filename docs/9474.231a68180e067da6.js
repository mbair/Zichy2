"use strict";(self.webpackChunknfc_reserve=self.webpackChunknfc_reserve||[]).push([[9474],{9474:(O,p,a)=>{a.d(p,{w:()=>s});var r=a(2029),m=a(6223),g=a(7394),C=a(219),f=a(5219),_=a(4055),S=a(9515);const d=["conferenceSelector"];function b(c,o){1&c&&r._uU(0),2&c&&r.hij(" ",o.$implicit.name," ")}function i(c,o){1&c&&r._uU(0),2&c&&r.hij(" ",o.$implicit.name," ")}let s=(()=>{class c{set preselectIds(e){const t=(Array.isArray(e)?e:null!=e?[e]:[]).map(l=>"string"==typeof l?Number(l):l).filter(l=>Number.isFinite(l));this._pendingSelectIds=t.length?t:void 0,this.preselectByIds()}runSilently(e){this.suppress++;try{return e()}finally{this.suppress--}}constructor(e,n,t){this.conferenceService=e,this.messageService=n,this.cdr=t,this.selectFirstOption=!1,this.showClear=!0,this.style={},this.disabledOptions=[],this.emitOnSelectFirstOption=!1,this.emitOnPreselectId=!1,this.emitOnWriteValue=!1,this.change=new r.vpe,this.loading=!0,this.disabled=!1,this.conferences=[],this.originalConferences=[],this.selectedConferences=[],this.subscriptions=new g.w0,this.suppress=0,this.onChange=l=>{},this.onTouched=()=>{}}ngOnInit(){const e=this.conferenceService.getConferencesForSelector().subscribe({next:n=>{this.conferences=n??[],this.originalConferences=[...n??[]],this.syncSelectedConferences(),this.handleSelectFirstOption(),this.updateDisabledFlags(),this.preselectByIds(),this.loading=!1},error:()=>{this.conferences=[],this.originalConferences=[],this.loading=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load conferences. Please try again later."})}});this.subscriptions.add(e)}ngOnChanges(e){e.disabledOptions&&this.originalConferences.length>0&&this.updateDisabledFlags(),e.preselectIds&&this.preselectByIds()}ngOnDestroy(){this.subscriptions.unsubscribe()}updateDisabledFlags(){const e=Array.isArray(this.disabledOptions)?this.disabledOptions:[];this.conferences=this.originalConferences.map(n=>({...n,disabled:e.some(t=>t?.id===n.id)})),this.cdr.markForCheck()}setSelection(e,n){const t=n?.source??"programmatic";this.runSilently(()=>{this.selectedConferences=e?.slice(0,this.selectionLimit??e.length)??[]}),n?.emit?this.emit(this.selectedConferences,t,!0):this.cdr.markForCheck()}handleSelectFirstOption(){this.selectFirstOption&&0===this.selectedConferences.length&&this.conferences.length&&(this.runSilently(()=>{this.selectedConferences=this.conferences.slice(0,this.selectionLimit??1)}),this.emitOnSelectFirstOption?this.emit(this.selectedConferences,"auto-select-first",!0):this.cdr.markForCheck())}preselectByIds(){if(!this.conferences?.length||!this._pendingSelectIds?.length)return;const e=new Set(this._pendingSelectIds),n=this.conferences.filter(t=>{const l="string"==typeof t.id?Number(t.id):t.id;return e.has(l)});this.runSilently(()=>{this.selectedConferences=n.slice(0,this.selectionLimit??n.length),this.conferenceSelectorRef?.writeValue(this.selectedConferences)}),this.emitOnPreselectId?this.emit(this.selectedConferences,"preselect-id",!0):this.cdr.markForCheck()}setDisabledState(e){this.disabled=e}syncSelectedConferences(){const e=Array.isArray(this.selectedConferences)?this.selectedConferences:[];this.selectedConferences=this.conferences.filter(n=>e.some(t=>t?.id===n?.id)),this.onChange(this.selectedConferences),this.cdr.markForCheck()}onSelectionChange(e){this.selectedConferences=Array.isArray(e?.value)?e.value:[],this.emit(this.selectedConferences,"user"),1==this.selectionLimit&&this.selectedConferences?.length>=1&&setTimeout(()=>this.conferenceSelectorRef?.hide())}onSelectionClear(){this.runSilently(()=>{this.selectedConferences=[],this.conferenceSelectorRef?.writeValue([])}),this.emit(this.selectedConferences,"user",!0)}emit(e,n,t=!1){this.suppress&&!t||(this.onChange(e),this.onTouched(),this.change.emit({value:e,source:n}),this.cdr.markForCheck())}writeValue(e){const n=Array.isArray(e)?e:e?[e]:[],t=Number.isFinite(this.selectionLimit)&&this.selectionLimit>0?this.selectionLimit:n.length;this.runSilently(()=>{this.selectedConferences=n.slice(0,t)}),this.emitOnWriteValue?this.emit(this.selectedConferences,"programmatic",!0):this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}static#e=this.\u0275fac=function(n){return new(n||c)(r.Y36(C.Z),r.Y36(f.ez),r.Y36(r.sBO))};static#t=this.\u0275cmp=r.Xpm({type:c,selectors:[["app-conference-selector"]],viewQuery:function(n,t){if(1&n&&r.Gf(d,5),2&n){let l;r.iGM(l=r.CRH())&&(t.conferenceSelectorRef=l.first)}},inputs:{selectionLimit:"selectionLimit",selectFirstOption:"selectFirstOption",placeholder:"placeholder",showClear:"showClear",style:"style",disabledOptions:"disabledOptions",emitOnSelectFirstOption:"emitOnSelectFirstOption",emitOnPreselectId:"emitOnPreselectId",emitOnWriteValue:"emitOnWriteValue",preselectIds:"preselectIds"},outputs:{change:"change"},features:[r._Bn([{provide:m.JU,useExisting:(0,r.Gpc)(()=>c),multi:!0}]),r.TTD],decls:5,vars:14,consts:[["dataKey","id","optionLabel","name","optionDisabled","disabled","scrollHeight","400px","appendTo","body","display","chip",1,"multiselect-custom-virtual-scroll",3,"options","ngModel","disabled","selectionLimit","placeholder","emptyMessage","virtualScroll","virtualScrollItemSize","showClear","resetFilterOnHide","ngModelChange","onChange","onClear"],["conferenceSelector",""],["pTemplate","item"],["pTemplate","selectedItem"]],template:function(n,t){1&n&&(r.TgZ(0,"p-multiSelect",0,1),r.NdJ("ngModelChange",function(u){return t.selectedConferences=u})("onChange",function(u){return t.onSelectionChange(u)})("onClear",function(){return t.onSelectionClear()}),r.ALo(2,"translate"),r.YNc(3,b,1,1,"ng-template",2),r.YNc(4,i,1,1,"ng-template",3),r.qZA()),2&n&&(r.Akn(t.style),r.s9C("emptyMessage",r.lcZ(2,12,"Nincs tal\xe1lat...")),r.Q6J("options",t.conferences)("ngModel",t.selectedConferences)("disabled",t.disabled)("selectionLimit",t.selectionLimit)("placeholder",t.placeholder)("virtualScroll",!0)("virtualScrollItemSize",43)("showClear",t.showClear)("resetFilterOnHide",!0))},dependencies:[m.JJ,m.On,f.jx,_.NU,S.X$],encapsulation:2,changeDetection:0})}return c})()},219:(O,p,a)=>{a.d(p,{Z:()=>S});var r=a(5619),m=a(7398),g=a(6306),C=a(2096),f=a(2029),_=a(8814);let S=(()=>{class d{constructor(i){this.apiService=i,this.apiURL=i.apiURL,this.data$=new r.X(null),this.message$=new r.X(null)}get conferenceObs(){return this.data$.asObservable()}get messageObs(){return this.message$.asObservable()}get(i,s,c,o){const e=localStorage.getItem("userrole"),n=localStorage.getItem("userid");if("Szervezo"===e&&n){const h=`organizer_user_id=${n}`;o=o?`${o}&${h}`:h}o.includes("enabled=")||(o=o?`${o}&enabled=1`:"enabled=1");let t="";""!==c&&(t=`sort=${c.sortField&&""!==c.sortField?c.sortField:"beginDate"}&order=${1===c.sortOrder?"ASC":"DESC"}`);const l=""!==t&&""!==o?t+"&"+o:""!==t&&""===o?t:""===t&&""!==o?o:"";this.apiService.get(`conference/get/${i}/${s}${""!==l?"?"+l:""}`).subscribe({next:h=>{this.data$.next(h)},error:h=>{this.message$.next(h)}})}getBySearch(i,s){let c="";""!==s&&(c=""!=s.sortField?`?sort=${s.sortField}&order=${1===s.sortOrder?"ASC":"DESC"}`:""),this.apiService.get(`conference/search/${i}${c}`).subscribe({next:o=>{this.data$.next(o)},error:o=>{this.message$.next(o)}})}getBySearchQuery(i){this.apiService.get(`conference/searchquery?${i}`).subscribe({next:s=>{this.data$.next(s)},error:s=>{this.message$.next(s)}})}create(i){this.apiService.post("conference/create/",i).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres konferencia r\xf6gz\xedt\xe9s",detail:`${i.name} r\xf6gz\xedtve`})},error:s=>{this.message$.next(s)}})}update(i){this.apiService.put(`conference/update/${i.id}`,i).subscribe({next:()=>{this.message$.next({severity:"success",summary:"Sikeres konferencia m\xf3dos\xedt\xe1s",detail:`${i.name} m\xf3dos\xedtva`})},error:s=>{this.message$.next(s)}})}delete(i){this.apiService.delete(`conference/delete/${i.id}`).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Sikeres konferencia t\xf6rl\xe9s",detail:`${i.name} t\xf6r\xf6lve`})},error:s=>{this.message$.next(s)}})}bulkdelete(i){let s={ids:i.map(c=>c.id)};this.apiService.post("conference/bulkdelete",s).subscribe({next:c=>{this.message$.next({severity:"success",summary:"Sikeres konferencia t\xf6rl\xe9s",detail:`${i.length} konferencia t\xf6r\xf6lve`})},error:c=>{this.message$.next(c)}})}getConferencesForSelector(){return this.get(0,999,{sortField:"beginDate",sortOrder:1},""),this.data$.asObservable().pipe((0,m.U)(s=>s?s.rows:[]))}getById(i){return this.apiService.get(`conference/getbyid/${i}`)}isSlugValid(i){return this.get(0,20,"slug=","sort"),this.data$.pipe((0,m.U)(s=>s&&s.data&&s.rows.length>0),(0,g.K)(()=>(0,C.of)(!1)))}assignRoomsToConference(i,s){return this.apiService.post(`conferencesroom/addroom/${i.id}`,{roomIds:s})}removeRoomsFromConference(i,s){this.apiService.post(`conferencesroom/removeroom/${i}`,{roomIds:s}).subscribe({next:c=>{this.message$.next({severity:"success",summary:"\xd6sszerendel\xe9s t\xf6r\xf6lve",detail:"Szoba-konferencia \xf6sszerendel\xe9s t\xf6r\xf6lve"})},error:c=>{this.message$.next(c)}})}saveFormFieldInfos(i){this.apiService.post(`conference/saveFormFieldInfos/${i.conferenceId}`,i.fields).subscribe({next:s=>{this.message$.next({severity:"success",summary:"Mez\u0151 inform\xe1ci\xf3k mentve",detail:"\u0170rlap mez\u0151 inform\xe1ci\xf3k sikeresen mentve"})},error:s=>{this.message$.next(s)}})}static#e=this.\u0275fac=function(s){return new(s||d)(f.LFG(_.s))};static#t=this.\u0275prov=f.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);